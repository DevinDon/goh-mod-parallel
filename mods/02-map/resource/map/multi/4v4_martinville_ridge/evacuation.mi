{mission
  {Entity "evacuation_point" 0x802f
    {Position -2046.28 -2771.69}
    {xform zl 132.31}
    {Extender "map_point"
      {name base_flag_a}
      {zone
        {radius 0}
        {zoneId "base_a"}
      }
      {phase 0}
      {order 1}
      {show All}
      {visor MapPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Extender "fortification"
      {level
        {steps 0}
        {radius 0}
        {angle "42"}
        {elementAngle "0"}
        {buildTime 60}
        {entity "flagpoint_ammo"}
      }
      {level
        {steps 4}
        {radius 10}
        {angle "45"}
        {azimuth "14"}
        {buildTime 120}
        {entity "sandbag_framed_straight"}
        {manual
          {0
            0.753 0.657 0
            -0.657 0.753 0
            0 0 1
            -2446.12 -2171.12 271.672
          }
          {1
            0.748 0.663 0
            -0.663 0.748 0
            0 0 0.999
            -2248.49 -2021.8 275
          }
          {2
            0.234 0.972 0
            -0.972 0.234 0
            0 0 1
            -2835.31 -2267.5 261
          }
          {3
            -0.007 0.999 0
            -0.999 -0.007 0
            0 0 0.999
            -2883.74 -2261.94 257
          }
          {4
            0.337 0.941 0
            -0.941 0.337 0
            0 0 1
            -3092.14 -2532.7 248.364
          }
          {5
            0.715 0.698 0
            -0.698 0.715 0
            0 0 0.999
            -1580.88 -2775.32 293.145
          }
          {6
            0.591 -0.805 0
            0.805 0.591 0
            0 0 1
            -1998.2 -3387.24 274
          }
          {7
            0.769 -0.638 0
            0.638 0.769 0
            0 0 1
            -1962.72 -3353.82 275.36
          }
          {8
            0.651 -0.758 0
            0.758 0.651 0
            0 0 1
            -1780.38 -3197.07 285
          }
          {9
            0.815 -0.578 0
            0.578 0.815 0
            0 0 1
            -1747.53 -3161.06 285
          }
          {10
            0.827 0.561 0
            -0.561 0.827 0
            0 0 0.999
            -1550.88 -2810.25 295.081
          }
          {11
            0.987 -0.16 0
            0.16 0.987 0
            0 0 1
            -1636.21 -2447.37 293.724
          }
          {12
            0.996 0.083 0
            -0.083 0.996 0
            0 0 1
            -1634.31 -2398.62 294.041
          }
          {13
            0.842 -0.539 0
            0.539 0.842 0
            0 0 1
            -1523.34 -2275.42 296
          }
          {14
            0.746 0.665 0
            -0.665 0.746 0
            0 0 1
            -2172.87 -2285.02 277.808
          }
          {15
            0.59 0.807 0
            -0.807 0.59 0
            0 0 1
            -1958.17 -2127.77 284
          }
        }
      }
      {level
        {steps 3}
        {radius 21}
        {angle "0"}
        {azimuth "10"}
        {buildTime 120}
        {entity "sandbag_heap_curved"}
        {manual
          {0
            0.378 0.925 0
            -0.925 0.378 0
            0 0 1
            -1090.54 -2910.56 307
          }
          {1
            -0.53 0.847 0
            -0.847 -0.53 0
            0 0 1
            -1157.55 -2915.93 301.91
          }
          {2
            -0.388 0.921 0
            -0.921 -0.388 0
            0 0 0.999
            -995.548 -3127.55 307.666
          }
          {3
            0.989 0.145 0
            -0.145 0.989 0
            0 0 0.999
            -1980.22 -3708.91 263.877
          }
          {4
            0.255 0.966 0
            -0.966 0.255 0
            0 0 1
            -2020.79 -3662.1 264
          }
          {5
            0.645 -0.763 0
            0.763 0.645 0
            0 0 0.999
            -1678.15 -4051.24 265.179
          }
          {6
            0.986 0.164 0
            -0.164 0.986 0
            0 0 1
            -1661.08 -3991.21 268
          }
          {7
            0.164 0.986 0
            -0.986 0.164 0
            0 0 1
            -2871.27 -2937.11 241.818
          }
          {8
            0.413 0.897 -0.155
            -0.91 0.407 -0.07
            0 0.171 0.985
            -2819.45 -2697.68 251.631
          }
          {9
            0.64 0.752 0.155
            -0.76 0.649 -0.009
            -0.108 -0.112 0.987
            -2536.5 -2701.72 260.338
          }
          {10
            0.372 0.927 0
            -0.927 0.372 0
            0 0 0.999
            -3257.78 -2470.56 241
          }
          {11
            -0.989 0.142 0
            -0.142 -0.989 0
            0 0 1
            -1037.96 -3180.94 306
          }
        }
      }
      {level
        {steps 2}
        {radius 45}
        {angle "0"}
        {azimuth "45"}
        {elementAngle "0"}
        {buildTime 120}
        {entity "watch_tower"}
        {skip "1 2 3 4"}
        {manual
          {0
            0.188 0.982 0
            -0.982 0.188 0
            0 0 1
            -1786.23 -2146.62 290
          }
          {5
            0.448 0.893 0
            -0.893 0.448 0
            0 0 1
            -2309.55 -1767.25 275.929
          }
          {6
            0.98 0.195 0
            -0.195 0.98 0
            0 0 1
            -1763.1 -4342.17 257
          }
          {7
            0.995 0.097 0
            -0.097 0.995 0
            0 0 1
            -750.296 -2982.25 313
          }
        }
      }
      {level
        {steps 2}
        {radius 40}
        {angle "0"}
        {azimuth "45"}
        {elementAngle "0"}
        {buildTime 120}
        {entity "inf_crate_ger"}
        {skip "1 2 3 4"}
        {manual
          {0
            0.784 -0.619 0
            0.619 0.784 0
            0 0 1
            -1682.7 -2195.3 289.107
          }
          {5
            -0.75 -0.66 0
            0.66 -0.75 0
            0 0 1
            -3175.2 -2600.57 244.449
          }
          {6
            0.708 -0.705 0
            0.705 0.708 0
            0 0 1
            -1824.35 -3978.44 270.748
          }
          {7
            0.923 -0.382 0
            0.382 0.923 0
            0 0 1
            -1116.01 -3063.29 304
          }
        }
      }
    }
    {Player 0}
    {MID 48}
  }
  {Entity "map_point" 0x8005
    {Position 6594.04 -6761.4}
    {xform zl 147.94}
    {Extender "map_point"
      {name b4}
      {team b}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 4}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 4}
  }
  {Entity "map_point" 0x8007
    {Position -6548.57 6509.66}
    {xform zl -57.77}
    {Extender "map_point"
      {name b3}
      {team b}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 3}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 6}
  }
  {Entity "map_point" 0x8008
    {Position -3165.14 6672.8}
    {xform zl -91.9}
    {Extender "map_point"
      {name b7}
      {team b}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 7}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 7}
  }
  {Entity "map_point" 0x8003
    {Position 6728.42 -2962.34}
    {xform zl -178.77}
    {Extender "map_point"
      {name b5}
      {team b}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 5}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 1}
  }
  {Entity "map_point" 0x8004
    {Position 4786.5 5739.89}
    {xform zl -133.2}
    {Extender "map_point"
      {name b2}
      {team b}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 2}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 2}
  }
  {Entity "map_point" 0x8006
    {Position 6261.88 3441.87}
    {xform zl -144.5}
    {Extender "map_point"
      {name b1}
      {team b}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 1}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 3}
  }
  {Entity "map_point" 0x8009
    {Position 412.13 6215.45}
    {xform zl -113.94}
    {Extender "map_point"
      {name b6}
      {team b}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 6}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 5}
  }
  {Entity "map_point" 0x800a
    {Position -5444.85 -6373.73}
    {xform zl 45}
    {Extender "map_point"
      {name a1}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 1}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 8}
  }
  {Entity "map_point" 0x800b
    {Position -4520.24 -6828.96}
    {xform zl 45}
    {Extender "map_point"
      {name a2}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 2}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 10}
  }
  {Entity "map_point" 0x800c
    {Position -6315.87 -5533.7}
    {xform zl 45}
    {Extender "map_point"
      {name a3}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 3}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 11}
  }
  {Entity "map_point" 0x800d
    {Position -6677.02 -4799.39}
    {xform zl 45}
    {Extender "map_point"
      {name a4}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 4}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 12}
  }
  {Entity "ammo_point" 0x8012
    {Position 1588.96 -4985.56}
    {xform zl 87.31}
    {Placer
      {State "ammo" {Unlinked}}
    }
    {Extender "map_point"
      {name f1}
      {zone
        {radius 0}
        {zoneId "f1"}
      }
      {phase 0}
      {order 1}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 14}
  }
  {Entity "ammo_point" 0x8014
    {Position -2586.95 194.42}
    {xform zl 87.31}
    {Placer
      {State "ammo" {Unlinked}}
    }
    {Extender "map_point"
      {name f4}
      {zone
        {radius 0}
        {zoneId "f4"}
      }
      {phase 0}
      {order 4}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 15}
  }
  {Entity "ammo_point" 0x8016
    {Position 1457.77 -20.82}
    {xform zl 98.62}
    {Placer
      {State "ammo" {Unlinked}}
    }
    {Extender "map_point"
      {name f3}
      {zone
        {radius 0}
        {zoneId "f3"}
      }
      {phase 0}
      {order 3}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 16}
  }
  {Entity "ammo_point" 0x800e
    {Position 1586.36 -2073.99}
    {xform zl 87.31}
    {Placer
      {State "ammo" {Unlinked}}
    }
    {Extender "map_point"
      {name f2}
      {zone
        {radius 0}
        {zoneId "f2"}
      }
      {phase 0}
      {order 2}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 13}
  }
  {Entity "ammo_point" 0x8010
    {Position -4700.88 907.63}
    {xform zl 87.31}
    {Placer
      {State "ammo" {Unlinked}}
    }
    {Extender "map_point"
      {name f5}
      {zone
        {radius 0}
        {zoneId "f5"}
      }
      {phase 0}
      {order 5}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 17}
  }
  {Entity "map_point" 0x8013
    {Position 6608.47 16.62}
    {xform zl -155.46}
    {Extender "map_point"
      {name b8}
      {team b}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 8}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 9}
  }
  {Entity "ammo_point" 0x8015
    {Position -1638.73 -385.12}
    {Placer
      {State "ammo" {Unlinked}}
    }
    {Extender "map_point"
      {name f6}
      {zone
        {radius 0}
        {zoneId "f6"}
      }
      {phase 0}
      {order 6}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 18}
  }
  {Entity "ammo_point" 0xc000
    {Position -162.24 473.41 372.02}
    {Placer
      {State "ammo" {Unlinked}}
    }
    {Extender "map_point"
      {name f9}
      {zone
        {radius 0}
        {zoneId "f9"}
      }
      {phase 0}
      {order 9}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 20}
  }
  {Entity "ammo_point" 0xc002
    {Position -1463.92 1161 350.02}
    {Placer
      {State "ammo" {Unlinked}}
    }
    {Extender "map_point"
      {name f8}
      {zone
        {radius 0}
        {zoneId "f8"}
      }
      {phase 0}
      {order 8}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 21}
  }
  {Entity "ammo_point" 0xc004
    {Position -6217.88 1790.52 189.95}
    {Placer
      {State "ammo" {Unlinked}}
    }
    {Extender "map_point"
      {name f7}
      {zone
        {radius 0}
        {zoneId "f7"}
      }
      {phase 0}
      {order 7}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 22}
  }
  {Entity "map_point" 0xc001
    {Position -4902.14 -6850.81}
    {xform zl 45}
    {Extender "map_point"
      {name a5}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 5}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 27}
  }
  {Entity "map_point" 0xc003
    {Position -5269.88 -6693.07}
    {xform zl 45}
    {Extender "map_point"
      {name a6}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 6}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 28}
  }
  {Entity "map_point" 0xc005
    {Position -5899.83 -5668.68}
    {xform zl 45}
    {Extender "map_point"
      {name a7}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 7}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 29}
  }
  {Entity "map_point" 0xc006
    {Position -6652.34 -5202.09}
    {xform zl 45}
    {Extender "map_point"
      {name a8}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 8}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 30}
  }
  {Entity "map_point" 0x8002
    {Position -5399.95 -6000.82}
    {xform zl 45}
    {Extender "map_point"
      {name a9}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 9}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 19}
  }
  {Entity "map_point" 0x800f
    {Position -5720.63 -6033.55}
    {xform zl 45}
    {Extender "map_point"
      {name a10}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 10}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 23}
  }
  {Entity "map_point" 0x8011
    {Position -6297.65 -5203.88}
    {xform zl 45}
    {Extender "map_point"
      {name a11}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 11}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 24}
  }
  {Entity "map_point" 0x8017
    {Position -7018.51 -4739.39}
    {xform zl 45}
    {Extender "map_point"
      {name a12}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 12}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 25}
  }
  {Tags "flag" 0x802f}
  {Tags "spawn_b" 0x8005}
  {Tags "spawn_b" 0x8007}
  {Tags "spawn_b" 0x8008}
  {Tags "spawn_b" 0x8003}
  {Tags "spawn_b" 0x8004}
  {Tags "spawn_b" 0x8006}
  {Tags "spawn_b" 0x8009}
  {Tags "flag" 0x8012}
  {Tags "flag" 0x8014}
  {Tags "flag" 0x8016}
  {Tags "flag" 0x800e}
  {Tags "flag" 0x8010}
  {Tags "spawn_b" 0x8013}
  {Tags "flag" 0x8015}
  {Tags "flag" 0xc000}
  {Tags "flag" 0xc002}
  {Tags "flag" 0xc004}
  {Environment "goh/multi/west/summer/day_1"}
  {Helpers
    {event "action"}
    {event "ambient"}
    {event "disabled"}
    {event "gamestart"}
    {event "init"}
    {zone "poly"
      {position -2040.81 -2843.05 279}
      {Name "base_a"}
      {Point 340.217 -1466.3}
      {Point -470.699 -614.56}
      {Point -1265.71 374.822}
      {Point -242.812 1057.48}
      {Point 277.122 759.78}
      {Point 1361.88 -111.214}
    }
    {zone "poly"
      {position 1724.21 -5103.38 338}
      {Name "f1"}
      {Point -1025.76 161.391}
      {Point -465.218 850.047}
      {Point 404.066 281.316}
      {Point 768.511 -581.669}
      {Point 318.398 -711.085}
    }
    {zone "poly"
      {position 1615.99 -1993.99 353}
      {Name "f2"}
      {Point -69.9172 -816.859}
      {Point -586.802 559.228}
      {Point 44.6286 872.943}
      {Point 612.091 -615.311}
    }
    {zone "poly"
      {position 1478.55 -74.8674 398}
      {Name "f3"}
      {Point -117.843 -843.846}
      {Point -612.612 -266.409}
      {Point -118.469 725.242}
      {Point 21.848 774.61}
      {Point 717.365 406.895}
      {Point 109.711 -796.492}
    }
    {zone "poly"
      {position -2572.26 223.045 317.547}
      {Name "f4"}
      {Point 302.275 -562.654}
      {Point -647.115 -38.3992}
      {Point -301.257 564.464}
      {Point 646.098 36.5885}
    }
    {zone "poly"
      {position -4677.05 937.159 237.003}
      {Name "f5"}
      {Point 166.984 -899.4}
      {Point -818.841 -129.974}
      {Point -269.355 813.222}
      {Point 921.212 216.152}
    }
    {zone "poly"
      {position -1463.12 -394.873 318}
      {Name "f6"}
      {Point 529.94 -56.5506}
      {Point 145.678 -606.366}
      {Point -792.464 -52.2633}
      {Point -402.15 623.041}
      {Point 518.995 92.1386}
    }
    {zone "poly"
      {position -6210.02 1860.91 191}
      {Name "f7"}
      {Point 488.493 -865.17}
      {Point -935.82 17.71}
      {Point -708.265 468.285}
      {Point 151.97 366.984}
      {Point 1003.62 12.1901}
    }
    {zone "poly"
      {position -1608.11 1233.97 346}
      {Name "f8"}
      {Point 473.902 -952.784}
      {Point -932.748 -139.625}
      {Point -639.67 271.475}
      {Point -72.2511 701.49}
      {Point 1170.77 119.444}
    }
    {zone "poly"
      {position -4.87632 394.839 374.812}
      {Name "f9"}
      {Point -72.4075 -633.705}
      {Point -963.417 -169.711}
      {Point -323.511 934.33}
      {Point 900.452 369.1}
      {Point 458.883 -500.014}
    }
    {zone "poly"
      {position -14.807 4.21783 367}
      {Name "global"}
      {Point -7872.35 -7870.27}
      {Point -7890.38 7856}
      {Point 7898.57 7916.59}
      {Point 7864.16 -7902.32}
    }
    {reinforcements
      {scoreTotal 0}
      {scoreCurrent 0}
    }
    {vars
      {"action_selection"}
      {"ambient_selection"}
      {"ambient"}
      {"error"}
      {"ai_on"}
      {"user_nation"}
      {"user_team"}
      {"mp"}
      {"ignore_same_user"}
    }
    {mission_options
      {"any_weather"}
      {"day_weather"}
      {"night_weather"}
    }
    {triggers
      {"parachute"
        {condition
          {terms
            {"1.near"
              {units
                {ignore_captured_by_user 0}
                {tag eject}
                {type human}
              }
              {near_to
                {ignore_captured_by_user 0}
                {tag base}
              }
              {distance 100}
            }
          }
        }
        {actions
          {"delay"
            {time 0.05}
          }
          {"linker"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag base}
                  }
                }
                {exclude
                  {tag
                    {tag _flight}
                  }
                }
              }
            }
            {entities
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag eject}
                  }
                }
                {include
                  {prop
                    {prop human}
                  }
                }
                {exclude
                  {state
                    {state linked}
                  }
                }
              }
            }
          }
          {"delay"
            {time 0.05}
          }
          {"effect"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag base}
                  }
                }
                {exclude
                  {tag
                    {tag _flight}
                  }
                }
              }
            }
            {effect start}
          }
          {"delay"
            {time 0.05}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag base}
                  }
                }
                {include
                  {tag
                    {tag _flight}
                  }
                }
              }
            }
            {tag_add base_null}
            {tag_remove base}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag eject}
                  }
                }
                {include
                  {state
                    {state linked}
                  }
                }
              }
            }
            {tag_add eject_null}
            {tag_remove eject}
          }
          {"delay"
            {time 0.2}
          }
          {"trigger"
            {name "parachute"}
          }
        }
      }
      {"players_units"
        {condition
          {expression "(1 & 3) | (2 & 3)"}
          {terms
            {"1.entities"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {prop
                      {prop human}
                    }
                    {state
                      {state user_control}
                    }
                  }
                  {exclude
                    {tag
                      {tag player}
                    }
                    {tag
                      {tag hidden}
                    }
                    {state
                      {state dead}
                    }
                  }
                }
              }
            }
            {"2.entities"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {prop
                      {prop vehicle}
                    }
                    {state
                      {state "inhabited user_control"}
                    }
                  }
                  {exclude
                    {tag
                      {tag hidden}
                    }
                    {tag
                      {tag player_armor}
                    }
                    {tag
                      {tag player_car}
                    }
                    {tag
                      {tag player_veh}
                    }
                  }
                }
              }
            }
            {"3.cmp_i"
              {var "mp$"}
              {op "=="}
              {value 1}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {zone
                    {zone "global"}
                  }
                }
                {include
                  {prop
                    {prop human}
                  }
                  {state
                    {state user_control}
                  }
                }
                {exclude
                  {tag
                    {tag hidden}
                  }
                  {tag
                    {tag player}
                  }
                  {state
                    {state dead}
                  }
                }
              }
            }
            {tag_add player}
          }
          {"delay"
            {time 0.2}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {zone
                    {zone "global"}
                  }
                }
                {include
                  {prop
                    {prop tank}
                  }
                  {state
                    {state "inhabited user_control"}
                  }
                }
                {exclude
                  {tag
                    {tag player_armor}
                  }
                }
              }
            }
            {tag_add player_armor}
          }
          {"delay"
            {time 0.2}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {zone
                    {zone "global"}
                  }
                }
                {include
                  {prop
                    {prop car}
                  }
                  {state
                    {state "inhabited user_control"}
                  }
                }
                {exclude
                  {tag
                    {tag player_car}
                  }
                }
              }
            }
            {tag_add player_car}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {zone
                    {zone "global"}
                  }
                }
                {include
                  {prop
                    {prop vehicle}
                  }
                  {state
                    {state "inhabited user_control"}
                  }
                }
                {exclude
                  {tag
                    {tag player_veh}
                  }
                  {tag
                    {tag player_armor}
                  }
                  {tag
                    {tag player_car}
                  }
                  {tag
                    {tag engine_count_1}
                  }
                  {tag
                    {tag engine_count_2}
                  }
                }
              }
            }
            {tag_add player_veh}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {zone
                    {zone "global"}
                  }
                }
                {include
                  {state
                    {state "operatable user_control"}
                  }
                }
                {exclude
                  {tag
                    {tag _user}
                  }
                }
              }
            }
            {tag_add _user}
          }
          {"delay"
            {time 10}
          }
          {"trigger"
            {name "players_units"}
          }
        }
      }
      {"ai/ai_untow"
        {condition
          {type 1}
          {terms
            {"1.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot_tow}
                    }
                  }
                  {include
                    {prop
                      {prop vehicle}
                    }
                    {state
                      {state operatable}
                    }
                    {state
                      {state linked}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 200}
              }
              {tag
                {"tag pair"}
                {"for selector" tow_act}
              }
            }
            {"2.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot_tow}
                    }
                  }
                  {include
                    {prop
                      {prop vehicle}
                    }
                    {state
                      {state operatable}
                    }
                    {state
                      {state linked}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 200}
              }
              {tag
                {"tag pair"}
                {"for selector" tow_act}
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"linker"
            {selector
              {type vehicle}
            }
            {action unlink}
            {entities
              {ignore_captured_by_user 0}
              {tag tow_act}
            }
          }
          {"delay"
            {time 0.2}
          }
          {"entity_state"
            {selector
              {source advanced}
              {group
                {select
                  {tag
                    {tag bot_car}
                  }
                  {tag
                    {tag bot_tank}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {tag
                    {tag bot_towing}
                  }
                  {state
                    {state user_control}
                  }
                }
              }
              {sort
                {type entity}
                {entity
                  {ignore_captured_by_user 0}
                  {tag tow_act}
                }
              }
              {amount 1
              }
            }
            {tag_add bot_towing}
          }
          {"delay"
            {time 0.2}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag bot_towing}
              {state operatable}
            }
            {tag_add _lua_mi}
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type near}
                {units
                  {ignore_captured_by_user 0}
                  {tag bot_towing}
                }
                {near_to
                  {ignore_captured_by_user 0}
                  {tag tow_act}
                }
                {distance 22}
              }
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag bot_towing}
                          }
                        }
                        {include
                          {prop
                            {prop car}
                          }
                          {state
                            {state inhabited}
                          }
                        }
                        {exclude
                          {state
                            {state moveable}
                          }
                          {state
                            {state user_control}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"emit"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag bot_towing}
                      {type vehicle}
                      {state inhabited}
                    }
                    {drop orders}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag bot_towing}
                          }
                        }
                        {include
                          {prop
                            {prop vehicle}
                          }
                          {state
                            {state "operatable moveable"}
                          }
                        }
                        {exclude
                          {state
                            {state user_control}
                          }
                        }
                      }
                    }
                    {drop orders}
                    {action move}
                    {target
                      {ignore_captured_by_user 0}
                      {tag flag}
                      {zone "global"}
                    }
                  }
                  {"delay"
                    {time 5}
                  }
                  {"if"
                    {condition
                      {type entities}
                      {selector
                        {source advanced}
                        {ignore_captured_by_user 0}
                        {group
                          {select
                            {tag
                              {tag bot_towing}
                            }
                          }
                          {include
                            {prop
                              {prop car}
                            }
                            {state
                              {state inhabited}
                            }
                          }
                          {exclude
                            {state
                              {state user_control}
                            }
                          }
                        }
                      }
                    }
                    {"delay"
                      {time 0.1}
                    }
                    {"emit"
                      {selector
                        {tag bot_towing}
                        {type vehicle}
                        {state operatable}
                      }
                      {drop orders}
                    }
                  }
                }
              }
            }
            {"default"}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag bot_tow}
                  }
                }
                {include
                  {tag
                    {tag tow_act}
                  }
                }
              }
            }
            {tag_remove bot_tow}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag tow_act}
            }
            {tag_remove tow_act}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag bot_towing}
            }
            {tag_remove _lua_mi}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag bot_towing}
            }
            {tag_remove bot_towing}
          }
          {"delay"
            {time 8}
          }
          {"trigger"
            {name "ai/ai_untow"}
          }
        }
      }
      {"ai/ai_unhold"
        {condition
          {type 1}
          {terms
            {"1.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _bot}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag repairing}
                    }
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag _lua_alert}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 60}
              }
              {detection located}
              {tag
                {"tag pair"}
                {"for selector" unhold_iq}
                {"for enemy" enemy_near_iq}
              }
            }
            {"2.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _bot}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag repairing}
                    }
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag _lua_alert}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 60}
              }
              {detection located}
              {tag
                {"tag pair"}
                {"for selector" unhold_iq}
                {"for enemy" enemy_near_iq}
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag unhold_iq}
              {state operatable}
            }
            {tag_add _lua_mi}
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag unhold_iq}
                      }
                    }
                    {include
                      {tag
                        {tag bot}
                      }
                    }
                  }
                }
              }
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.4}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {drop orders}
                    {fire_mode open}
                    {move_mode free}
                    {weapon_prepare on}
                    {movement
                      {speed assault}
                    }
                    {ai
                      {advance_ratio "0.1"}
                    }
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.4}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {drop orders}
                    {fire_mode open}
                    {move_mode free}
                    {weapon_prepare on}
                    {movement
                      {type crawl}
                    }
                    {ai
                      {advance_ratio "0.05"}
                    }
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {drop orders}
                    {fire_mode open}
                    {move_mode free}
                    {weapon_prepare on}
                    {movement
                      {speed sneak}
                    }
                    {ai
                      {advance_ratio "0.1"}
                    }
                  }
                }
              }
            }
            {"case"
              {condition
                {type entities}
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag unhold_iq}
                      }
                    }
                    {include
                      {prop
                        {prop vehicle}
                      }
                    }
                    {exclude
                      {tag
                        {tag bot_veh}
                      }
                    }
                  }
                }
              }
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {tag unhold_iq}
                  {type vehicle}
                  {state operatable}
                }
                {drop orders}
                {fire_mode open}
                {ai_move
                  {mode enable}
                }
                {movement
                  {forward off}
                  {backward off}
                }
              }
              {"delay"
                {time 1}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.5}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {fire_mode open}
                    {move_mode free}
                    {ai_move
                      {mode enable}
                    }
                    {movement
                      {speed slow}
                      {forward on}
                      {backward on}
                    }
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.5}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {fire_mode open}
                    {move_mode free}
                    {ai_move
                      {mode enable}
                    }
                    {movement
                      {speed fast}
                      {forward on}
                      {backward on}
                    }
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {fire_mode open}
                    {move_mode free}
                    {weapon_prepare on}
                    {ai_move
                      {mode enable}
                    }
                    {movement
                      {speed normal}
                      {forward on}
                      {backward on}
                    }
                  }
                }
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {group
                    {select
                      {tag
                        {tag unhold_iq}
                      }
                    }
                    {include
                      {tag
                        {tag bot_veh}
                      }
                      {state
                        {state operatable}
                      }
                    }
                  }
                }
                {drop orders}
                {fire_mode open}
                {move_mode free}
                {ai_move
                  {mode enable}
                }
                {cannon fire}
              }
              {"delay"
                {time 1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag unhold_iq}
                      }
                    }
                    {include
                      {tag
                        {tag bot_veh}
                      }
                    }
                  }
                }
                {tag_add _mi_temp2}
                {tag_remove unhold_iq}
              }
            }
          }
          {"delay"
            {time 0.1}
          }
          {"delay"
            {time 5}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {ignore_captured_by_user 0}
                  {tag unhold_iq}
                  {type vehicle}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action rotate}
                    {target
                      {ignore_captured_by_user 0}
                      {tag enemy_near_iq}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action move}
                    {target
                      {ignore_captured_by_user 0}
                      {tag enemy_near_iq}
                    }
                  }
                  {"delay"
                    {time 5}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action rotate}
                    {target
                      {ignore_captured_by_user 0}
                      {tag enemy_near_iq}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action advance}
                    {target
                      {ignore_captured_by_user 0}
                      {tag enemy_near_iq}
                    }
                  }
                  {"delay"
                    {time 8}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action advance}
                    {target
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {zone
                            {zone "global"}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {state
                            {state inactive}
                          }
                        }
                      }
                      {sort
                        {type entity}
                        {entity
                          {ignore_captured_by_user 0}
                          {tag enemy_near_iq}
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 6}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action rotate}
                    {target
                      {ignore_captured_by_user 0}
                      {tag enemy_near_iq}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action attack}
                    {target
                      {ignore_captured_by_user 0}
                      {tag enemy_near_iq}
                    }
                  }
                  {"delay"
                    {time 8}
                  }
                }
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action move}
                    {target
                      {ignore_captured_by_user 0}
                      {tag enemy_near_iq}
                    }
                  }
                  {"delay"
                    {time 4}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action advance}
                    {target
                      {ignore_captured_by_user 0}
                      {tag enemy_near_iq}
                    }
                  }
                  {"delay"
                    {time 5}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action advance}
                    {target
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {zone
                            {zone "global"}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {state
                            {state inactive}
                          }
                        }
                      }
                      {sort
                        {type entity}
                        {entity
                          {ignore_captured_by_user 0}
                          {tag enemy_near_iq}
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 6}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action attack}
                    {target
                      {ignore_captured_by_user 0}
                      {tag enemy_near_iq}
                    }
                  }
                  {"delay"
                    {time 8}
                  }
                }
              }
            }
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type see_enemy}
                {selector
                  {ignore_captured_by_user 0}
                  {tag unhold_iq}
                }
              }
              {"delay"
                {time 0.1}
              }
            }
            {"default"
              {"delay"
                {time 5}
              }
            }
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {ignore_captured_by_user 0}
                  {tag unhold_iq}
                  {type vehicle}
                  {state operatable}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {tag unhold_iq}
                  {state operatable}
                }
                {movement
                  {forward off}
                  {backward off}
                }
              }
              {"delay"
                {time 2}
              }
              {"actor_state"
                {selector
                  {tag unhold_iq}
                  {state operatable}
                }
                {fire_mode open}
                {move_mode free}
                {ai_move
                  {mode enable}
                }
                {movement
                  {speed slow}
                  {forward on}
                  {backward on}
                }
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.5}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_to_cover"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {mode random}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {fire_mode open}
                    {move_mode free}
                    {ai_move
                      {mode enable}
                    }
                    {ai
                      {advance_ratio 1}
                    }
                  }
                }
              }
            }
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag unhold_iq}
                      }
                    }
                    {include
                      {team
                        {team a}
                      }
                    }
                  }
                }
              }
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag bot}
                      }
                    }
                    {include
                      {prop
                        {prop human}
                      }
                      {state
                        {state operatable}
                      }
                      {team
                        {team a}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                  {amount 4
                  }
                  {sort
                    {type entity}
                    {entity
                      {ignore_captured_by_user 0}
                      {tag unhold_iq}
                    }
                  }
                }
                {drop orders}
                {move_mode free}
                {ai_move
                  {mode enable}
                }
                {ai
                  {advance_ratio 1}
                }
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag bot}
                      }
                    }
                    {include
                      {prop
                        {prop human}
                      }
                      {state
                        {state operatable}
                      }
                      {team
                        {team b}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                  {amount 4
                  }
                  {sort
                    {type entity}
                    {entity
                      {ignore_captured_by_user 0}
                      {tag unhold_iq}
                    }
                  }
                }
                {drop orders}
                {move_mode free}
                {ai_move
                  {mode enable}
                }
                {ai
                  {advance_ratio 1}
                }
              }
            }
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag unhold_iq}
            }
            {tag_add _mi_temp2}
            {tag_remove unhold_iq}
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type cmp_i}
                {var "players:composition@"}
                {op "=="}
                {value 8}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag enemy_near_iq}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                      {state
                        {state user_control}
                      }
                    }
                  }
                }
                {tag_add noted_by_ai}
              }
            }
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag enemy_near_iq}
            }
            {tag_remove enemy_near_iq}
          }
          {"delay"
            {time 20}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _mi_temp2}
            }
            {tag_remove _lua_mi}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _mi_temp2}
            }
            {tag_remove _mi_temp2}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "ai/ai_unhold"}
          }
        }
      }
      {"ai/tank_alt_fight"
        {condition
          {type 1}
          {terms
            {"1.see_actors"
              {selector
                {source advanced}
                {group
                  {select
                    {tag
                      {tag bot_tank}
                    }
                    {tag
                      {tag bot_car}
                    }
                  }
                  {include
                    {prop
                      {prop vehicle}
                    }
                    {state
                      {state "moveable inhabited"}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag engine_count_1}
                    }
                    {tag
                      {tag engine_count_2}
                    }
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 180}
              }
              {tag
                {"tag pair"}
                {"for selector" e_tank_alt_a}
                {"for enemy" p_tank_target}
              }
            }
            {"2.see_actors"
              {selector
                {source advanced}
                {group
                  {select
                    {tag
                      {tag bot_tank}
                    }
                    {tag
                      {tag bot_car}
                    }
                  }
                  {include
                    {prop
                      {prop vehicle}
                    }
                    {state
                      {state "moveable inhabited"}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag engine_count_1}
                    }
                    {tag
                      {tag engine_count_2}
                    }
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 180}
              }
              {tag
                {"tag pair"}
                {"for selector" e_tank_alt_b}
                {"for enemy" p_tank_target}
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"actor_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag e_tank_alt_a}
                  }
                  {tag
                    {tag e_tank_alt_b}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {state
                    {state user_control}
                  }
                }
              }
            }
            {drop orders}
            {fire_mode open}
            {ai_move
              {mode enable}
            }
            {movement
              {forward off}
              {backward off}
            }
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type cmp_i}
                {var "ai_on$"}
                {op "<<"}
                {value 1}
              }
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag e_tank_alt_a}
                }
                {tag_remove e_tank_alt_a}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag e_tank_alt_b}
                }
                {tag_remove e_tank_alt_b}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag p_tank_target}
                }
                {tag_remove p_tank_target}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {ignore_captured_by_user 0}
                      {tag e_tank_alt_a}
                      {zone "global"}
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag e_tank_alt_a}
                    }
                    {tag_add e_tank_alt}
                    {tag_remove e_tank_alt_a}
                  }
                  {"delay"
                    {time 0.4}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {group
                        {select
                          {tag
                            {tag bot}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {team
                            {team a}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {amount 5
                      }
                      {sort
                        {type entity}
                        {entity
                          {ignore_captured_by_user 0}
                          {tag e_tank_alt}
                        }
                      }
                    }
                    {tag_add temp2}
                  }
                  {"delay"
                    {time 0.1}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag e_tank_alt_b}
                    }
                    {tag_add e_tank_alt}
                    {tag_remove e_tank_alt_b}
                  }
                  {"delay"
                    {time 0.4}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag bot}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {team
                            {team b}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {amount 5
                      }
                      {sort
                        {type entity}
                        {entity
                          {ignore_captured_by_user 0}
                          {tag e_tank_alt}
                        }
                      }
                    }
                    {tag_add temp2}
                  }
                  {"delay"
                    {time 0.1}
                  }
                }
              }
              {"delay"
                {time 0.3}
              }
              {"while"
                {condition
                  {type near}
                  {units
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag temp2}
                        }
                      }
                      {include
                        {prop
                          {prop human}
                        }
                        {state
                          {state operatable}
                        }
                      }
                      {exclude
                        {tag
                          {tag e_tank_alt}
                        }
                      }
                    }
                  }
                  {near_to
                    {ignore_captured_by_user 0}
                    {tag e_tank_alt}
                  }
                  {distance 100}
                }
                {"delay"
                  {time 0.1}
                }
                {"entity_state"
                  {selector
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag temp2}
                        }
                      }
                      {include
                        {prop
                          {prop human}
                        }
                        {state
                          {state operatable}
                        }
                      }
                      {exclude
                        {tag
                          {tag e_tank_alt}
                        }
                      }
                    }
                    {sort
                      {type entity}
                      {entity
                        {ignore_captured_by_user 0}
                        {tag e_tank_alt}
                      }
                    }
                    {amount 1
                    }
                  }
                  {tag_add e_tank_alt}
                  {tag_remove temp2}
                }
                {"delay"
                  {time 0.1}
                }
              }
              {"delay"
                {time 0.3}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag e_tank_alt}
                  {state operatable}
                }
                {tag_add _lua_mi}
              }
              {"actor_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag e_tank_alt}
                  {type human}
                  {state operatable}
                }
                {drop orders}
                {fire_mode open}
                {move_mode free}
                {ai_move
                  {mode enable}
                }
                {ai
                  {advance_ratio "0.1"}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag e_tank_alt}
                  {type vehicle}
                  {state operatable}
                }
                {drop orders}
                {fire_mode open}
                {move_mode free}
                {ai_move
                  {mode enable}
                }
                {movement
                  {speed fast}
                  {forward on}
                  {backward on}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"squad_create"
                {selector
                  {ignore_captured_by_user 0}
                  {tag e_tank_alt}
                  {zone "global"}
                  {state operatable}
                }
                {name e_tank_squad}
              }
              {"delay"
                {time 0.3}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.5}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {tag e_tank_alt}
                      {zone "global"}
                      {type vehicle}
                      {state inhabited}
                    }
                    {drop orders}
                    {action rotate}
                    {target
                      {ignore_captured_by_user 0}
                      {tag p_tank_target}
                      {zone "global"}
                    }
                  }
                  {"delay"
                    {time 5}
                  }
                  {"actor_state"
                    {selector
                      {tag e_tank_alt}
                      {zone "global"}
                      {type vehicle}
                      {state inhabited}
                    }
                    {fire_mode open}
                    {ai_move
                      {mode enable}
                    }
                    {movement
                      {forward on}
                      {backward on}
                    }
                  }
                  {"delay"
                    {time 0.25}
                  }
                  {"action"
                    {selector
                      {tag e_tank_alt}
                      {zone "global"}
                      {type vehicle}
                      {state inhabited}
                    }
                    {action attack}
                    {target
                      {ignore_captured_by_user 0}
                      {tag p_tank_target}
                      {zone "global"}
                    }
                  }
                }
                {"default"
                  {"delay"
                    {time 0.25}
                  }
                  {"action"
                    {selector
                      {tag e_tank_alt}
                      {zone "global"}
                      {type vehicle}
                      {state inhabited}
                    }
                    {drop orders}
                    {action rotate}
                    {target
                      {ignore_captured_by_user 0}
                      {tag p_tank_target}
                      {zone "global"}
                    }
                  }
                  {"delay"
                    {time 5}
                  }
                  {"actor_state"
                    {selector
                      {tag e_tank_alt}
                      {zone "global"}
                      {type vehicle}
                      {state inhabited}
                    }
                    {fire_mode open}
                    {weapon_prepare on}
                    {ai_move
                      {mode enable}
                    }
                    {movement
                      {speed fast}
                      {forward on}
                      {backward off}
                    }
                  }
                  {"delay"
                    {time 0.25}
                  }
                  {"action"
                    {selector
                      {tag e_tank_alt}
                      {zone "global"}
                      {type vehicle}
                      {state inhabited}
                    }
                    {drop orders}
                    {action move}
                    {target
                      {ignore_captured_by_user 0}
                      {tag p_tank_target}
                      {zone "global"}
                    }
                  }
                  {"delay"
                    {time 8}
                  }
                  {"actor_state"
                    {selector
                      {tag e_tank_alt}
                      {zone "global"}
                      {type vehicle}
                      {state inhabited}
                    }
                    {fire_mode open}
                    {move_mode free}
                    {weapon_prepare on}
                    {ai_move
                      {mode enable}
                    }
                    {movement
                      {speed normal}
                      {forward on}
                      {backward on}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                  {"action"
                    {selector
                      {tag e_tank_alt}
                      {zone "global"}
                      {type vehicle}
                      {state inhabited}
                    }
                    {action attack}
                    {target
                      {ignore_captured_by_user 0}
                      {tag p_tank_target}
                      {zone "global"}
                    }
                  }
                }
              }
              {"delay"
                {time 1}
              }
              {"switch"
                {"case"
                  {condition
                    {type near}
                    {units
                      {tag e_tank_alt}
                      {type vehicle}
                      {state operatable}
                    }
                    {near_to
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag flag}
                          }
                        }
                        {exclude
                          {state
                            {state inactive}
                          }
                        }
                      }
                    }
                    {distance 100}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"effect"
                    {selector
                      {tag e_tank_alt}
                      {type vehicle}
                      {state operatable}
                    }
                    {effect smoke_screen}
                  }
                }
                {"default"}
              }
              {"delay"
                {time 30}
              }
              {"squad_dismiss"
                {squad e_tank_squad}
              }
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag e_tank_alt}
                  {zone "global"}
                  {type vehicle}
                }
                {movement
                  {speed normal}
                  {forward on}
                  {backward on}
                }
              }
              {"delay"
                {time 0.5}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "players:composition@"}
                    {op "=="}
                    {value 8}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag p_tank_target}
                          }
                        }
                        {include
                          {state
                            {state "operatable user_control"}
                          }
                        }
                      }
                    }
                    {tag_add noted_by_ai}
                  }
                }
              }
              {"delay"
                {time 1}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag e_tank_alt}
                }
                {tag_add _mi_temp5}
                {tag_remove e_tank_alt}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag p_tank_target}
                }
                {tag_remove p_tank_target}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag temp2}
                }
                {tag_remove temp2}
              }
              {"delay"
                {time 30}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag _mi_temp5}
                }
                {tag_remove _lua_mi}
              }
              {"delay"
                {time 1}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag _mi_temp5}
                }
                {tag_remove _mi_temp5}
              }
              {"delay"
                {time 0.1}
              }
              {"trigger"
                {name "ai/tank_alt_fight"}
              }
            }
          }
        }
      }
      {"ai/bail_portables"
        {condition
          {type 1}
          {terms
            {"1.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot_veh}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {state
                      {state linked}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {prop
                      {prop human}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 33}
              }
              {tag
                {"tag pair"}
                {"for selector" bail_veh}
                {"for enemy" bail_target}
              }
            }
            {"2.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot_veh}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {state
                      {state linked}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {prop
                      {prop human}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 33}
              }
              {tag
                {"tag pair"}
                {"for selector" bail_veh}
                {"for enemy" bail_target}
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"emit"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag bail_veh}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {state
                    {state user_control}
                  }
                }
              }
            }
            {drop orders}
            {emit
              {count 1}
            }
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag bail_target}
              {state operatable}
            }
            {tag_add noted_by_ai}
            {tag_remove bail_target}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag bail_veh}
            }
            {tag_remove bail_veh}
          }
          {"delay"
            {time 5}
          }
          {"trigger"
            {name "ai/bail_portables"}
          }
        }
      }
      {"ai/recrew_portables"
        {condition
          {type 1}
          {terms
            {"1.see_actors"
              {selector
                {source advanced}
                {group
                  {select
                    {tag
                      {tag bot}
                    }
                  }
                  {include
                    {prop
                      {prop human}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag repairing}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot_veh}
                    }
                    {tag
                      {tag player_veh}
                    }
                  }
                  {include
                    {prop
                      {prop vehicle}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag destroyed}
                    }
                    {tag
                      {tag "_no-recrew"}
                    }
                    {state
                      {state inhabited}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 48}
              }
              {tag
                {"tag pair"}
                {"for selector" ecrew_a}
                {"for enemy" ecannon_enter}
              }
            }
            {"2.see_actors"
              {selector
                {source advanced}
                {group
                  {select
                    {tag
                      {tag bot}
                    }
                  }
                  {include
                    {prop
                      {prop human}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag repairing}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot_veh}
                    }
                    {tag
                      {tag player_veh}
                    }
                  }
                  {include
                    {prop
                      {prop vehicle}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag destroyed}
                    }
                    {tag
                      {tag "_no-recrew"}
                    }
                    {state
                      {state inhabited}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 48}
              }
              {tag
                {"tag pair"}
                {"for selector" ecrew_b}
                {"for enemy" ecannon_enter}
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type see_actors}
                {selector
                  {tag ecrew_a}
                  {zone "global"}
                  {type human}
                  {state "not dead"}
                }
                {enemy
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {zone
                        {zone "global"}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                      {team
                        {team b}
                      }
                    }
                    {exclude
                      {state
                        {state inactive}
                      }
                    }
                  }
                }
                {distance
                  {mode near_than}
                  {meters 45}
                }
                {detection visible}
              }
              {"delay"
                {time 5}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ecrew_a}
                }
                {tag_remove ecrew_a}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ecrew_b}
                }
                {tag_remove ecrew_b}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ecannon_enter}
                }
                {tag_remove ecannon_enter}
              }
              {"delay"
                {time 20}
              }
            }
            {"case"
              {condition
                {type see_actors}
                {selector
                  {tag ecrew_b}
                  {zone "global"}
                  {type human}
                  {state "not dead"}
                }
                {enemy
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {zone
                        {zone "global"}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                      {team
                        {team a}
                      }
                    }
                    {exclude
                      {state
                        {state inactive}
                      }
                    }
                  }
                }
                {distance
                  {mode near_than}
                  {meters 45}
                }
                {detection visible}
              }
              {"delay"
                {time 5}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ecrew_a}
                }
                {tag_remove ecrew_a}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ecrew_b}
                }
                {tag_remove ecrew_b}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ecannon_enter}
                }
                {tag_remove ecannon_enter}
              }
              {"delay"
                {time 20}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ecrew_a}
                      {zone "global"}
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ecrew_a}
                    }
                    {tag_add ecrew}
                    {tag_remove ecrew_a}
                  }
                  {"delay"
                    {time 0.4}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag bot}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {team
                            {team a}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {tag
                            {tag ecrew}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {amount 2
                      }
                      {sort
                        {type entity}
                        {entity
                          {tag ecrew}
                        }
                      }
                    }
                    {tag_add temp1}
                  }
                  {"delay"
                    {time 0.1}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ecrew_b}
                    }
                    {tag_add ecrew}
                    {tag_remove ecrew_b}
                  }
                  {"delay"
                    {time 0.4}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag bot}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {team
                            {team b}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {tag
                            {tag ecrew}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {amount 2
                      }
                      {sort
                        {type entity}
                        {entity
                          {tag ecrew}
                        }
                      }
                    }
                    {tag_add temp1}
                  }
                  {"delay"
                    {time 0.1}
                  }
                }
              }
              {"delay"
                {time 0.2}
              }
              {"while"
                {condition
                  {type near}
                  {units
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag temp1}
                        }
                      }
                      {include
                        {prop
                          {prop human}
                        }
                        {state
                          {state operatable}
                        }
                      }
                      {exclude
                        {tag
                          {tag ecrew}
                        }
                        {state
                          {state inactive}
                        }
                        {state
                          {state linked}
                        }
                      }
                    }
                  }
                  {near_to
                    {ignore_captured_by_user 0}
                    {tag ecannon_enter}
                  }
                  {distance 110}
                }
                {"delay"
                  {time 0.1}
                }
                {"entity_state"
                  {selector
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag temp1}
                        }
                      }
                      {include
                        {prop
                          {prop human}
                        }
                        {state
                          {state operatable}
                        }
                      }
                      {exclude
                        {tag
                          {tag ecrew}
                        }
                        {state
                          {state inactive}
                        }
                        {state
                          {state linked}
                        }
                      }
                    }
                    {sort
                      {type entity}
                      {entity
                        {ignore_captured_by_user 0}
                        {tag ecannon_enter}
                      }
                    }
                    {amount 1
                    }
                  }
                  {tag_add ecrew}
                  {tag_remove temp1}
                }
                {"delay"
                  {time 0.1}
                }
              }
              {"delay"
                {time 0.3}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ecrew}
                  {state operatable}
                }
                {tag_add _lua_mi}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag ecrew}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                }
                {drop orders}
                {fire_mode open}
                {move_mode free}
                {movement
                  {speed assault}
                }
              }
              {"delay"
                {time 0.3}
              }
              {"action"
                {selector
                  {source advanced}
                  {group
                    {select
                      {tag
                        {tag ecrew}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                }
                {drop orders}
                {action move}
                {target
                  {ignore_captured_by_user 0}
                  {tag ecannon_enter}
                }
              }
              {"delay"
                {time 5}
              }
              {"switch"
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag ecannon_enter}
                          }
                        }
                        {include
                          {prop
                            {prop vehicle}
                          }
                        }
                        {exclude
                          {tag
                            {tag destroyed}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"board"
                    {selector
                      {source advanced}
                      {group
                        {select
                          {tag
                            {tag ecrew}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {tag
                            {tag repairing}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                    }
                    {vehicle
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag ecannon_enter}
                          }
                        }
                        {include
                          {prop
                            {prop vehicle}
                          }
                        }
                        {exclude
                          {tag
                            {tag destroyed}
                          }
                        }
                      }
                    }
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag ecrew}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {tag
                            {tag repairing}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                    }
                    {drop orders}
                    {fire_mode open}
                    {move_mode free}
                    {ai_move
                      {mode enable}
                    }
                  }
                }
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ecrew}
                  {state operatable}
                }
                {tag_add _mi_temp4}
              }
              {"delay"
                {time 20}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag ecrew}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                }
                {tag_remove ecrew}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ecannon_enter}
                }
                {tag_remove ecannon_enter}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag temp1}
                }
                {tag_remove temp1}
              }
              {"delay"
                {time 20}
              }
            }
          }
          {"delay"
            {time 30}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _mi_temp4}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {tag
                    {tag repairing}
                  }
                  {state
                    {state inactive}
                  }
                  {state
                    {state linked}
                  }
                }
              }
            }
            {tag_remove _lua_mi}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _mi_temp4}
            }
            {tag_remove _mi_temp4}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "ai/recrew_portables"}
          }
        }
      }
      {"ai/ai_flag_smoke"
        {condition
          {type 1}
          {terms
            {"1.see_actors"
              {selector
                {source advanced}
                {group
                  {select
                    {tag
                      {tag smk_}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag repairing}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _user}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 95}
              }
              {tag
                {"tag pair"}
                {"for selector" ai_smoke}
                {"for enemy" smk_target}
              }
            }
            {"2.see_actors"
              {selector
                {source advanced}
                {group
                  {select
                    {tag
                      {tag smk_}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag repairing}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _user}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 95}
              }
              {tag
                {"tag pair"}
                {"for selector" ai_smoke}
                {"for enemy" smk_target}
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type near}
                {units
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag smk_target}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                    }
                  }
                }
                {near_to
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag flag}
                      }
                    }
                    {exclude
                      {state
                        {state inactive}
                      }
                    }
                  }
                }
                {distance 150}
              }
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag ai_smoke}
                          }
                        }
                        {include
                          {with_item
                            {type amount}
                            {item "nbk39" "grenade"}
                            {min 1}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {group
                        {select
                          {tag
                            {tag smk_}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {with_item
                            {type amount}
                            {item "nbk39" "grenade"}
                            {min 1}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {tag
                            {tag ai_smoke}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {sort
                        {type entity}
                        {entity
                          {tag ai_smoke}
                        }
                      }
                      {amount 2
                      }
                    }
                    {tag_add ai_smoke}
                  }
                  {"delay"
                    {time 0.3}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {state operatable}
                    }
                    {tag_add _mi_temp1}
                  }
                  {"delay"
                    {time 0.2}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _mi_temp1}
                    }
                    {tag_add _lua_mi}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"inventory"
                    {selector
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {action take}
                    {item "nbk39" "grenade"}
                  }
                  {"delay"
                    {time 0.5}
                  }
                  {"action"
                    {selector
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {drop "orders sensor senseless"}
                    {action attack_ground}
                    {target
                      {ignore_captured_by_user 0}
                      {tag null}
                    }
                  }
                  {"delay"
                    {time 4}
                  }
                  {"action"
                    {selector
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {drop orders}
                    {action advance}
                    {target
                      {ignore_captured_by_user 0}
                      {tag smk_target}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                }
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag ai_smoke}
                          }
                        }
                        {include
                          {with_item
                            {type amount}
                            {item "rdg1_smoke" "grenade"}
                            {min 1}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {group
                        {select
                          {tag
                            {tag smk_}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {with_item
                            {type amount}
                            {item "rdg1_smoke" "grenade"}
                            {min 1}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {tag
                            {tag ai_smoke}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {sort
                        {type entity}
                        {entity
                          {tag ai_smoke}
                        }
                      }
                      {amount 2
                      }
                    }
                    {tag_add ai_smoke}
                  }
                  {"delay"
                    {time 0.3}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {state operatable}
                    }
                    {tag_add _mi_temp1}
                  }
                  {"delay"
                    {time 0.2}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _mi_temp1}
                    }
                    {tag_add _lua_mi}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"inventory"
                    {selector
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {action take}
                    {item "rdg1_smoke" "grenade"}
                  }
                  {"delay"
                    {time 0.5}
                  }
                  {"action"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {drop "orders sensor senseless"}
                    {action attack_ground}
                    {target
                      {ignore_captured_by_user 0}
                      {tag null}
                    }
                  }
                  {"delay"
                    {time 4}
                  }
                  {"action"
                    {selector
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {drop orders}
                    {action advance}
                    {target
                      {ignore_captured_by_user 0}
                      {tag smk_target}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                }
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag ai_smoke}
                          }
                        }
                        {include
                          {with_item
                            {type amount}
                            {item "m24_smoke" "grenade"}
                            {min 1}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {group
                        {select
                          {tag
                            {tag smk_}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {with_item
                            {type amount}
                            {item "m24_smoke" "grenade"}
                            {min 1}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {tag
                            {tag ai_smoke}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {sort
                        {type entity}
                        {entity
                          {tag ai_smoke}
                        }
                      }
                      {amount 2
                      }
                    }
                    {tag_add ai_smoke}
                  }
                  {"delay"
                    {time 0.3}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {state operatable}
                    }
                    {tag_add _mi_temp1}
                  }
                  {"delay"
                    {time 0.2}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _mi_temp1}
                    }
                    {tag_add _lua_mi}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"inventory"
                    {selector
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {action take}
                    {item "m24_smoke" "grenade"}
                  }
                  {"delay"
                    {time 0.5}
                  }
                  {"action"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {drop "orders sensor senseless"}
                    {action attack_ground}
                    {target
                      {ignore_captured_by_user 0}
                      {tag null}
                    }
                  }
                  {"delay"
                    {time 4}
                  }
                  {"action"
                    {selector
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {drop orders}
                    {action advance}
                    {target
                      {ignore_captured_by_user 0}
                      {tag smk_target}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                }
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag ai_smoke}
                          }
                        }
                        {include
                          {with_item
                            {type amount}
                            {item "m43_smoke" "grenade"}
                            {min 1}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {group
                        {select
                          {tag
                            {tag smk_}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {with_item
                            {type amount}
                            {item "m43_smoke" "grenade"}
                            {min 1}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {tag
                            {tag ai_smoke}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {sort
                        {type entity}
                        {entity
                          {tag ai_smoke}
                        }
                      }
                      {amount 2
                      }
                    }
                    {tag_add ai_smoke}
                  }
                  {"delay"
                    {time 0.3}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {state operatable}
                    }
                    {tag_add _mi_temp1}
                  }
                  {"delay"
                    {time 0.2}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _mi_temp1}
                    }
                    {tag_add _lua_mi}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"inventory"
                    {selector
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {action take}
                    {item "m43_smoke" "grenade"}
                  }
                  {"delay"
                    {time 0.5}
                  }
                  {"action"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {drop "orders sensor senseless"}
                    {action attack_ground}
                    {target
                      {ignore_captured_by_user 0}
                      {tag null}
                    }
                  }
                  {"delay"
                    {time 4}
                  }
                  {"action"
                    {selector
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {drop orders}
                    {action advance}
                    {target
                      {ignore_captured_by_user 0}
                      {tag smk_target}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                    }
                    {tag_remove ai_smoke}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag smk_target}
                    }
                    {tag_remove smk_target}
                  }
                }
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag smk_target}
                }
                {tag_remove smk_target}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ai_smoke}
                }
                {tag_remove ai_smoke}
              }
            }
          }
          {"delay"
            {time 2}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {ignore_captured_by_user 0}
                  {tag ai_smoke}
                  {state operatable}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type see_enemy}
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {state operatable}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                  {"actor_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {state operatable}
                    }
                    {drop orders}
                    {fire_mode open}
                    {move_mode free}
                    {ai_move
                      {mode enable}
                    }
                    {ai
                      {advance_ratio "0.1"}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                  {"actor_to_cover"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {state operatable}
                    }
                  }
                }
                {"default"
                  {"delay"
                    {time 8}
                  }
                  {"actor_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {state operatable}
                    }
                    {drop orders}
                    {fire_mode open}
                    {move_mode free}
                    {ai_move
                      {mode enable}
                    }
                    {ai
                      {advance_ratio "0.5"}
                    }
                  }
                }
              }
              {"delay"
                {time 1}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag smk_target}
                }
                {tag_remove smk_target}
              }
              {"delay"
                {time 50}
              }
            }
            {"default"}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag ai_smoke}
            }
            {tag_remove ai_smoke}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _mi_temp1}
            }
            {tag_remove _lua_mi}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _mi_temp1}
            }
            {tag_remove _mi_temp1}
          }
          {"delay"
            {time 80}
          }
          {"trigger"
            {name "ai/ai_flag_smoke"}
          }
        }
      }
      {"bots_units"
        {condition
          {terms
            {"1.entities"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                  }
                  {exclude
                    {tag
                      {tag _bot}
                    }
                    {tag
                      {tag hidden}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
            }
            {"2.cmp_i"
              {var "ai_on$"}
              {op ">"}
              {value 0}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {zone
                    {zone "global"}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {tag
                    {tag _bot}
                  }
                  {tag
                    {tag _ai}
                  }
                  {tag
                    {tag hidden}
                  }
                  {state
                    {state user_control}
                  }
                }
              }
            }
            {tag_add _ai}
          }
          {"delay"
            {time 0.4}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _ai}
                  }
                }
                {include
                  {prop
                    {prop tank}
                  }
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {tag
                    {tag bot_tank}
                  }
                  {state
                    {state user_control}
                  }
                }
              }
            }
            {tag_add bot_tank}
          }
          {"delay"
            {time 0.2}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _ai}
                  }
                }
                {include
                  {prop
                    {prop car}
                  }
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {tag
                    {tag bot_car}
                  }
                  {state
                    {state user_control}
                  }
                }
              }
            }
            {tag_add bot_car}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _ai}
                  }
                }
                {include
                  {prop
                    {prop vehicle}
                  }
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {tag
                    {tag bot_tank}
                  }
                  {tag
                    {tag bot_car}
                  }
                  {tag
                    {tag bot_veh}
                  }
                  {tag
                    {tag engine_count_1}
                  }
                  {tag
                    {tag engine_count_2}
                  }
                  {state
                    {state user_control}
                  }
                }
              }
            }
            {tag_add _bot_veh}
          }
          {"delay"
            {time 0.5}
          }
          {"ables"
            {selector
              {ignore_captured_by_user 0}
              {tag _ai}
              {zone "global"}
              {type human}
              {state operatable}
            }
            {remove personage}
          }
          {"delay"
            {time 0.5}
          }
          {"ables"
            {selector
              {ignore_captured_by_user 0}
              {tag _bot_veh}
              {zone "global"}
              {type vehicle}
              {state operatable}
            }
            {add emit_on_attack}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _ai}
                  }
                }
                {include
                  {prop
                    {prop human}
                  }
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {tag
                    {tag _bot}
                  }
                }
              }
            }
            {tag_add bot}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _bot_veh}
            }
            {tag_add bot_veh}
            {tag_remove _bot_veh}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {source advanced}
              {group
                {select
                  {tag
                    {tag bot_veh}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                  {state
                    {state linked}
                  }
                }
                {exclude
                  {tag
                    {tag bot_tow}
                  }
                  {state
                    {state user_control}
                  }
                }
              }
            }
            {tag_add bot_tow}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _ai}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {tag
                    {tag _bot}
                  }
                  {state
                    {state user_control}
                  }
                }
              }
            }
            {tag_add _bot}
            {tag_remove _ai}
          }
          {"delay"
            {time 1}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {ignore_captured_by_user 0}
                  {tag smk_}
                  {zone "global"}
                  {state operatable}
                }
                {count
                  {op "<<"}
                  {value 55}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag bot}
                      }
                    }
                    {include
                      {with_item
                        {type amount}
                        {item "nbk39" "grenade"}
                        {min 1}
                      }
                    }
                    {exclude
                      {tag
                        {tag smk_}
                      }
                      {state
                        {state dead}
                      }
                    }
                  }
                  {group
                    {select
                      {tag
                        {tag bot}
                      }
                    }
                    {include
                      {with_item
                        {type amount}
                        {item "rdg1_smoke" "grenade"}
                        {min 1}
                      }
                    }
                    {exclude
                      {tag
                        {tag smk_}
                      }
                      {state
                        {state dead}
                      }
                    }
                  }
                  {group
                    {select
                      {tag
                        {tag bot}
                      }
                    }
                    {include
                      {with_item
                        {type amount}
                        {item "m24_smoke" "grenade"}
                        {min 1}
                      }
                    }
                    {exclude
                      {tag
                        {tag smk_}
                      }
                      {state
                        {state dead}
                      }
                    }
                  }
                  {group
                    {select
                      {tag
                        {tag bot}
                      }
                    }
                    {include
                      {with_item
                        {type amount}
                        {item "m43_smoke"}
                        {min 1}
                      }
                    }
                    {exclude
                      {tag
                        {tag smk_}
                      }
                      {state
                        {state dead}
                      }
                    }
                  }
                }
                {tag_add smk_}
              }
            }
            {"default"}
          }
          {"delay"
            {time 5}
          }
          {"trigger"
            {name "bots_units"}
          }
        }
      }
      {"ai/user_a_detect"
        {condition
          {terms
            {"1.cmp_i"
              {var "ai_on$"}
              {op ">"}
              {value 0}
            }
            {"2.entities"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag player}
                    }
                  }
                  {include
                    {team
                      {team a}
                    }
                  }
                }
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"set_i"
            {var "user_team$"}
            {op "+"}
            {value 1}
          }
        }
      }
      {"ai/init"
        {condition
        }
        {actions
          {"delay"
            {time 1}
          }
          {"set_i"
            {var "error$"}
            {op "="}
            {value 0}
          }
          {"set_i"
            {var "mp$"}
            {op "="}
            {value 0}
          }
          {"set_i"
            {var "user_team$"}
            {op "="}
            {value 0}
          }
          {"set_i"
            {var "ignore_same_user$"}
            {op "="}
            {value 0}
          }
          {"delay"
            {time 4}
          }
          {"switch"
            {"case"
              {condition
                {type cmp_i}
                {var "players:composition@"}
                {op "=="}
                {value 2}
              }
              {"delay"
                {time 0.1}
              }
              {"set_i"
                {var "ai_on$"}
                {op "="}
                {value 1}
              }
              {"set_i"
                {var "mp$"}
                {op "="}
                {value 1}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "players:composition@"}
                {op "=="}
                {value 5}
              }
              {"delay"
                {time 0.1}
              }
              {"set_i"
                {var "ai_on$"}
                {op "="}
                {value 3}
              }
              {"set_i"
                {var "mp$"}
                {op "="}
                {value 2}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "players:composition@"}
                {op "=="}
                {value 6}
              }
              {"delay"
                {time 0.1}
              }
              {"set_i"
                {var "ai_on$"}
                {op "="}
                {value 2}
              }
              {"set_i"
                {var "mp$"}
                {op "="}
                {value 1}
              }
              {"set_i"
                {var "ignore_same_user$"}
                {op "="}
                {value 1}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"set_i"
                {var "ai_on$"}
                {op "="}
                {value 0}
              }
              {"set_i"
                {var "error$"}
                {op "="}
                {value 1}
              }
              {"timer"
                {time 15}
                {title "mission/multi/ev_error01"}
              }
            }
          }
        }
      }
      {"ai/chance_ai_pursue"
        {condition
          {type 1}
          {terms
            {"1.near"
              {units
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot}
                    }
                  }
                  {include
                    {prop
                      {prop human}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag repairing}
                    }
                    {tag
                      {tag _lua_mi}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
              {near_to
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag noted_by_ai}
                    }
                  }
                  {include
                    {zone
                      {zone "global"}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance 80}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"default"
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag bot}
                      }
                    }
                    {include
                      {zone
                        {zone "global"}
                      }
                      {prop
                        {prop human}
                      }
                      {state
                        {state operatable}
                      }
                      {team
                        {team b}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {tag
                        {tag _lua_mi}
                      }
                      {tag
                        {tag _lua_ignore}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                  {sort
                    {type entity}
                    {entity
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag noted_by_ai}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                          {team
                            {team a}
                          }
                        }
                        {exclude
                          {state
                            {state inactive}
                          }
                        }
                      }
                    }
                  }
                  {amount 5
                  }
                }
                {tag_add temp4}
              }
              {"delay"
                {time 0.5}
              }
              {"while"
                {condition
                  {type near}
                  {units
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag temp4}
                        }
                      }
                      {include
                        {prop
                          {prop human}
                        }
                        {state
                          {state operatable}
                        }
                      }
                      {exclude
                        {state
                          {state inactive}
                        }
                        {state
                          {state linked}
                        }
                      }
                    }
                  }
                  {near_to
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag noted_by_ai}
                        }
                      }
                      {include
                        {state
                          {state operatable}
                        }
                        {team
                          {team a}
                        }
                      }
                      {exclude
                        {state
                          {state inactive}
                        }
                      }
                    }
                  }
                  {distance 60}
                }
                {"delay"
                  {time 0.1}
                }
                {"entity_state"
                  {selector
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag temp4}
                        }
                      }
                      {include
                        {prop
                          {prop human}
                        }
                        {state
                          {state operatable}
                        }
                      }
                      {exclude
                        {state
                          {state inactive}
                        }
                        {state
                          {state linked}
                        }
                      }
                    }
                    {sort
                      {type entity}
                      {entity
                        {source advanced}
                        {ignore_captured_by_user 0}
                        {group
                          {select
                            {tag
                              {tag noted_by_ai}
                            }
                          }
                          {include
                            {state
                              {state operatable}
                            }
                            {team
                              {team a}
                            }
                          }
                          {exclude
                            {state
                              {state inactive}
                            }
                          }
                        }
                      }
                    }
                    {amount 1
                    }
                  }
                  {tag_add pursuer}
                  {tag_remove temp4}
                }
                {"delay"
                  {time 0.1}
                }
              }
              {"delay"
                {time 0.3}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag pursuer}
                  {state operatable}
                }
                {tag_add _lua_mi}
              }
              {"delay"
                {time 0.3}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag noted_by_ai}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                      {team
                        {team a}
                      }
                    }
                  }
                  {sort
                    {type entity}
                    {entity
                      {ignore_captured_by_user 0}
                      {tag pursuer}
                    }
                  }
                }
                {tag_add pursue_target}
                {tag_remove noted_by_ai}
              }
            }
          }
          {"delay"
            {time 0.5}
          }
          {"squad_create"
            {selector
              {ignore_captured_by_user 0}
              {tag pursuer}
              {zone "global"}
              {state operatable}
            }
            {name pursuer}
          }
          {"delay"
            {time 0.1}
          }
          {"actor_state"
            {selector
              {ignore_captured_by_user 0}
              {tag pursuer}
              {zone "global"}
              {state operatable}
            }
            {drop orders}
            {move_mode free}
            {weapon_prepare on}
            {ai_move
              {mode enable}
            }
            {ai
              {advance_ratio "0.5"}
            }
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {ignore_captured_by_user 0}
                  {tag pursue_target}
                  {type vehicle}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"action"
                {selector
                  {ignore_captured_by_user 0}
                  {tag pursuer}
                  {zone "global"}
                  {state operatable}
                }
                {action attack}
                {target
                  {ignore_captured_by_user 0}
                  {tag pursue_target}
                  {zone "global"}
                }
              }
              {"delay"
                {time 4}
              }
              {"action"
                {selector
                  {ignore_captured_by_user 0}
                  {tag pursuer}
                  {zone "global"}
                  {state operatable}
                }
                {action attack}
                {target
                  {ignore_captured_by_user 0}
                  {tag pursue_target}
                  {zone "global"}
                }
              }
              {"delay"
                {time 4}
              }
            }
            {"default"
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.5}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag pursuer}
                      {zone "global"}
                      {state operatable}
                    }
                    {action advance}
                    {target
                      {ignore_captured_by_user 0}
                      {tag pursue_target}
                      {zone "global"}
                    }
                  }
                  {"delay"
                    {time 4}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag pursuer}
                      {zone "global"}
                      {state operatable}
                    }
                    {action move}
                    {target
                      {ignore_captured_by_user 0}
                      {tag pursue_target}
                      {zone "global"}
                    }
                  }
                  {"delay"
                    {time 6}
                  }
                }
              }
            }
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {ignore_captured_by_user 0}
                  {tag pursuer}
                  {zone "global"}
                  {type human}
                  {state operatable}
                }
                {count
                  {op "<<"}
                  {value 2}
                }
              }
              {"delay"
                {time 0.1}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type see_enemy}
                    {selector
                      {ignore_captured_by_user 0}
                      {tag pursuer}
                      {state operatable}
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag pursuer}
                      {state operatable}
                    }
                    {action attack}
                    {target
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag pursue_target}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 8}
                  }
                }
                {"default"
                  {"delay"
                    {time 5}
                  }
                }
              }
            }
          }
          {"delay"
            {time 0.1}
          }
          {"actor_state"
            {selector
              {ignore_captured_by_user 0}
              {tag pursuer}
              {zone "global"}
              {state operatable}
            }
            {drop orders}
            {fire_mode open}
            {move_mode free}
            {ai
              {advance_ratio 1}
            }
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type rand}
                {value 0.5}
              }
              {"delay"
                {time 25}
              }
            }
            {"default"
              {"delay"
                {time 45}
              }
            }
          }
          {"delay"
            {time 0.1}
          }
          {"squad_dismiss"
            {squad pursuer}
          }
          {"delay"
            {time 0.1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag pursue_target}
            }
            {tag_remove pursue_target}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag pursuer}
            }
            {tag_add _mi_temp3}
            {tag_remove pursuer}
          }
          {"delay"
            {time 80}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _mi_temp3}
            }
            {tag_remove _lua_mi}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _mi_temp3}
            }
            {tag_remove _mi_temp3}
          }
          {"delay"
            {time 0.5}
          }
          {"trigger"
            {name "ai/chance_ai_pursue"}
          }
        }
      }
      {"lua/clean"
        {condition
          {type 1}
          {terms
            {"1.entities"
              {selector
                {ignore_captured_by_user 0}
                {tag _lua_alert}
                {zone "global"}
                {state "not operatable"}
              }
            }
            {"2.entities"
              {selector
                {ignore_captured_by_user 0}
                {tag _lua_ignore}
                {zone "global"}
                {state "not operatable"}
              }
            }
            {"3.entities"
              {selector
                {ignore_captured_by_user 0}
                {tag smk_}
                {zone "global"}
                {state "not operatable"}
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _bot}
              {zone "global"}
              {state "not operatable"}
            }
            {tag_remove _bot}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _lua_ignore}
                  }
                }
                {exclude
                  {tag
                    {tag _bot}
                  }
                }
              }
            }
            {tag_remove _lua_ignore}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _lua_alert}
                  }
                }
                {exclude
                  {tag
                    {tag _bot}
                  }
                }
              }
            }
            {tag_remove _lua_alert}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _lua_ignore}
                  }
                }
                {exclude
                  {zone
                    {zone "global"}
                  }
                }
              }
            }
            {tag_remove _lua_ignore}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _lua_alert}
                  }
                }
                {exclude
                  {zone
                    {zone "global"}
                  }
                }
              }
            }
            {tag_remove _lua_alert}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag smk_}
                  }
                }
                {exclude
                  {tag
                    {tag _bot}
                  }
                }
              }
            }
            {tag_remove smk_}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag noted_by_ai}
              {zone "global"}
              {state "not operatable"}
            }
            {tag_remove noted_by_ai}
          }
          {"delay"
            {time 0.5}
          }
          {"switch"
            {"case"
              {condition
                {type trigger}
                {name "ai/recrew_portables"}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {group
                    {select
                      {tag
                        {tag _lua_mi}
                      }
                    }
                    {include
                      {tag
                        {tag ecrew}
                      }
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                }
                {tag_add _clean}
                {tag_remove _lua_mi}
              }
              {"delay"
                {time 0.5}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag _clean}
                }
                {tag_remove ecrew}
              }
              {"delay"
                {time 0.5}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag _clean}
                }
                {tag_remove _clean}
              }
            }
          }
          {"delay"
            {time 1}
          }
          {"switch"
            {"case"
              {condition
                {type trigger}
                {name "ai/recrew_tank"}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {group
                    {select
                      {tag
                        {tag _lua_mi}
                      }
                    }
                    {include
                      {tag
                        {tag tcrew}
                      }
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                }
                {tag_add _clean}
                {tag_remove _lua_mi}
              }
              {"delay"
                {time 0.5}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag _clean}
                }
                {tag_remove tcrew}
              }
              {"delay"
                {time 0.5}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag _clean}
                }
                {tag_remove _clean}
              }
            }
          }
          {"delay"
            {time 25}
          }
          {"trigger"
            {name "lua/clean"}
          }
        }
      }
      {"lua/ignore"
        {condition
          {expression "(1 & 2) | (1 & 3)"}
          {terms
            {"1.cmp_i"
              {var "ai_on$"}
              {op ">"}
              {value 0}
            }
            {"2.near"
              {units
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _bot}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {zone
                      {zone "base_a"}
                    }
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag _lua_ignore}
                    }
                    {tag
                      {tag _lua_alert}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {near_to
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag flag}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance 31}
            }
            {"3.entities"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _bot}
                    }
                  }
                  {include
                    {zone
                      {zone "base_a"}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag _lua_ignore}
                    }
                    {tag
                      {tag _lua_alert}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _bot}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                  {team
                    {team b}
                  }
                }
                {exclude
                  {zone
                    {zone "base_a"}
                  }
                  {tag
                    {tag _lua_mi}
                  }
                  {tag
                    {tag _lua_ignore}
                  }
                  {tag
                    {tag _lua_alert}
                  }
                  {state
                    {state inactive}
                  }
                  {state
                    {state linked}
                  }
                  {state
                    {state user_control}
                  }
                }
              }
              {amount 1
              }
              {sort
                {type entity}
                {entity
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag flag}
                      }
                    }
                    {exclude
                      {zone
                        {zone "base_a"}
                      }
                      {state
                        {state inactive}
                      }
                    }
                  }
                }
              }
            }
            {tag_add _local1}
          }
          {"delay"
            {time 0.5}
          }
          {"switch"
            {"case"
              {condition
                {type near}
                {units
                  {ignore_captured_by_user 0}
                  {tag _local1}
                  {state operatable}
                }
                {near_to
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag flag}
                      }
                    }
                    {exclude
                      {zone
                        {zone "base_a"}
                      }
                      {state
                        {state inactive}
                      }
                    }
                  }
                }
                {distance 35}
              }
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag _local1}
                  {state operatable}
                }
                {tag_add _lua_ignore}
              }
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _local1}
                      }
                    }
                    {include
                      {prop
                        {prop human}
                      }
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                    }
                  }
                }
                {drop orders}
                {fire_mode open}
                {move_mode zone}
                {ai_move
                  {mode enable}
                }
                {movement
                  {speed assault}
                }
                {ai
                  {advance_ratio 2}
                  {retreat_ratio 5}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _local1}
                      }
                    }
                    {include
                      {prop
                        {prop vehicle}
                      }
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                      {state
                        {state user_control}
                      }
                    }
                  }
                }
                {drop orders}
                {fire_mode open}
                {move_mode zone}
                {move_radius 60}
                {ai_move
                  {mode enable}
                }
                {movement
                  {speed normal}
                  {forward on}
                  {backward on}
                }
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _bot}
                      }
                    }
                    {include
                      {zone
                        {zone "base_a"}
                      }
                      {state
                        {state operatable}
                      }
                      {team
                        {team b}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                      {tag
                        {tag _lua_ignore}
                      }
                      {tag
                        {tag _lua_alert}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                      {state
                        {state user_control}
                      }
                    }
                  }
                }
                {tag_add _local2}
              }
              {"delay"
                {time 0.2}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag _local2}
                  {state operatable}
                }
                {tag_add _lua_ignore}
              }
              {"delay"
                {time 0.2}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _local2}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                    }
                  }
                }
                {fire_mode open}
                {move_mode free}
                {ai_move
                  {mode enable}
                }
                {movement
                  {speed assault}
                }
              }
              {"delay"
                {time 0.5}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.25}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag _local2}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {state
                            {state user_control}
                          }
                        }
                      }
                    }
                    {action advance}
                    {waypoint "2"}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.25}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag _local2}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {state
                            {state user_control}
                          }
                        }
                      }
                    }
                    {action advance}
                    {waypoint "3"}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.25}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag _local2}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {state
                            {state user_control}
                          }
                        }
                      }
                    }
                    {action advance}
                    {waypoint "4"}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.25}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag _local2}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {state
                            {state user_control}
                          }
                        }
                      }
                    }
                    {action advance}
                    {waypoint "5"}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag _local2}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {state
                            {state user_control}
                          }
                        }
                      }
                    }
                    {action advance}
                    {waypoint "1"}
                  }
                }
              }
              {"delay"
                {time 5}
              }
              {"actor_to_cover"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _local2}
                      }
                    }
                    {include
                      {prop
                        {prop human}
                      }
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                    }
                  }
                }
                {drop orders}
              }
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _local2}
                      }
                    }
                    {include
                      {prop
                        {prop vehicle}
                      }
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                      {state
                        {state user_control}
                      }
                    }
                  }
                }
                {drop orders}
                {fire_mode open}
                {move_mode zone}
                {move_radius 60}
                {ai_move
                  {mode enable}
                }
                {movement
                  {speed slow}
                  {forward on}
                  {backward on}
                }
              }
              {"delay"
                {time 1}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _local2}
                      }
                    }
                    {include
                      {prop
                        {prop human}
                      }
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                    }
                  }
                }
                {fire_mode open}
                {move_mode zone}
                {ai_move
                  {mode enable}
                }
                {movement
                  {speed assault}
                }
                {ai
                  {advance_ratio 2}
                  {retreat_ratio 5}
                }
              }
            }
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _local1}
            }
            {tag_remove _local1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _local2}
            }
            {tag_remove _local2}
          }
          {"delay"
            {time 10}
          }
          {"trigger"
            {name "lua/ignore"}
          }
        }
      }
      {"lua/a/ignore"
        {condition
          {expression "(1 & 2) | (1 & 3)"}
          {terms
            {"1.cmp_i"
              {var "ai_on$"}
              {op ">"}
              {value 1}
            }
            {"2.near"
              {units
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _bot}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {zone
                      {zone "base_a"}
                    }
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag _lua_ignore}
                    }
                    {tag
                      {tag _lua_alert}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {near_to
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag flag}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance 31}
            }
            {"3.entities"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _bot}
                    }
                  }
                  {include
                    {zone
                      {zone "base_a"}
                    }
                    {prop
                      {prop vehicle}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag _lua_ignore}
                    }
                    {tag
                      {tag _lua_alert}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _bot}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                  {team
                    {team a}
                  }
                }
                {exclude
                  {zone
                    {zone "base_a"}
                  }
                  {tag
                    {tag _lua_mi}
                  }
                  {tag
                    {tag _lua_ignore}
                  }
                  {tag
                    {tag _lua_alert}
                  }
                  {state
                    {state inactive}
                  }
                  {state
                    {state linked}
                  }
                  {state
                    {state user_control}
                  }
                }
              }
              {amount 1
              }
              {sort
                {type entity}
                {entity
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag flag}
                      }
                    }
                    {exclude
                      {zone
                        {zone "base_a"}
                      }
                      {state
                        {state inactive}
                      }
                    }
                  }
                }
              }
            }
            {tag_add _local3}
          }
          {"delay"
            {time 0.5}
          }
          {"switch"
            {"case"
              {condition
                {type near}
                {units
                  {ignore_captured_by_user 0}
                  {tag _local3}
                  {state operatable}
                }
                {near_to
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag flag}
                      }
                    }
                    {exclude
                      {zone
                        {zone "base_a"}
                      }
                      {state
                        {state inactive}
                      }
                    }
                  }
                }
                {distance 35}
              }
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag _local3}
                  {state operatable}
                }
                {tag_add _lua_ignore}
              }
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {group
                    {select
                      {tag
                        {tag _local3}
                      }
                    }
                    {include
                      {prop
                        {prop human}
                      }
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                    }
                  }
                }
                {drop orders}
                {fire_mode open}
                {move_mode zone}
                {ai_move
                  {mode enable}
                }
                {movement
                  {speed assault}
                }
                {ai
                  {advance_ratio 2}
                  {retreat_ratio 5}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {group
                    {select
                      {tag
                        {tag _local3}
                      }
                    }
                    {include
                      {prop
                        {prop vehicle}
                      }
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                      {state
                        {state user_control}
                      }
                    }
                  }
                }
                {drop orders}
                {fire_mode open}
                {move_mode zone}
                {move_radius 60}
                {ai_move
                  {mode enable}
                }
                {movement
                  {speed normal}
                  {forward on}
                  {backward on}
                }
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _bot}
                      }
                    }
                    {include
                      {zone
                        {zone "base_a"}
                      }
                      {prop
                        {prop vehicle}
                      }
                      {state
                        {state operatable}
                      }
                      {team
                        {team a}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                      {tag
                        {tag _lua_ignore}
                      }
                      {tag
                        {tag _lua_alert}
                      }
                      {state
                        {state user_control}
                      }
                    }
                  }
                }
                {tag_add _local4}
              }
              {"delay"
                {time 0.2}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag _local4}
                  {state operatable}
                }
                {tag_add _lua_ignore}
              }
              {"delay"
                {time 0.2}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _local4}
                      }
                    }
                    {include
                      {prop
                        {prop vehicle}
                      }
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                      {state
                        {state user_control}
                      }
                    }
                  }
                }
                {drop orders}
                {fire_mode open}
                {move_mode free}
                {ai_move
                  {mode enable}
                }
                {movement
                  {speed normal}
                }
              }
              {"delay"
                {time 0.5}
              }
              {"switch"
                {"case"
                  {condition
                    {type see_enemy}
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _local4}
                      {state operatable}
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag _local4}
                          }
                        }
                        {include
                          {prop
                            {prop vehicle}
                          }
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {state
                            {state user_control}
                          }
                        }
                      }
                    }
                    {action rotate}
                    {target
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag _bot}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                          {team
                            {team b}
                          }
                        }
                        {exclude
                          {state
                            {state user_control}
                          }
                        }
                      }
                    }
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag _local4}
                          }
                        }
                        {include
                          {prop
                            {prop vehicle}
                          }
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {state
                            {state user_control}
                          }
                        }
                      }
                    }
                    {action advance}
                    {target
                      {ignore_captured_by_user 0}
                      {amount 1
                      }
                      {tag spawn_b}
                    }
                    {waypoint "0"}
                  }
                  {"delay"
                    {time 6}
                  }
                  {"actor_state"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag _local4}
                          }
                        }
                        {include
                          {prop
                            {prop vehicle}
                          }
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {state
                            {state user_control}
                          }
                        }
                      }
                    }
                    {drop orders}
                    {fire_mode open}
                    {move_mode zone}
                    {move_radius 60}
                    {ai_move
                      {mode enable}
                    }
                    {movement
                      {speed slow}
                      {forward on}
                      {backward on}
                    }
                  }
                }
              }
            }
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _local3}
            }
            {tag_remove _local3}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _local4}
            }
            {tag_remove _local4}
          }
          {"delay"
            {time 10}
          }
          {"trigger"
            {name "lua/a/ignore"}
          }
        }
      }
      {"lua/a/bot_base"
        {condition
          {terms
            {"1.cmp_i"
              {var "ai_on$"}
              {op ">"}
              {value 1}
            }
            {"2.entities"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "base_a"}
                    }
                  }
                  {include
                    {tag
                      {tag bot}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag _lua_ignore}
                    }
                    {tag
                      {tag _lua_alert}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
            }
          }
        }
        {actions
          {"delay"
            {time 2}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag bot}
                  }
                }
                {include
                  {zone
                    {zone "base_a"}
                  }
                  {state
                    {state operatable}
                  }
                  {team
                    {team a}
                  }
                }
                {exclude
                  {tag
                    {tag _lua_mi}
                  }
                  {tag
                    {tag _lua_ignore}
                  }
                  {tag
                    {tag _lua_alert}
                  }
                  {state
                    {state inactive}
                  }
                  {state
                    {state linked}
                  }
                }
              }
            }
            {tag_add _local5}
          }
          {"delay"
            {time 0.3}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _local5}
              {type human}
              {state operatable}
            }
            {tag_add _lua_ignore}
          }
          {"actor_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _local5}
              {type human}
              {state operatable}
            }
            {drop orders}
            {fire_mode open}
            {move_mode free}
            {weapon_prepare on}
            {ai_move
              {mode enable}
            }
            {movement
              {speed assault}
            }
            {ai
              {advance_ratio 2}
              {retreat_ratio 5}
            }
          }
          {"delay"
            {time 0.1}
          }
          {"squad_create"
            {selector
              {ignore_captured_by_user 0}
              {tag _local5}
              {type human}
              {state operatable}
            }
            {name _local5}
          }
          {"delay"
            {time 0.4}
          }
          {"squad_dismiss"
            {squad _local5}
          }
          {"delay"
            {time 0.5}
          }
          {"waypoint"
            {who
              {type actor}
              {actors
                {ignore_captured_by_user 0}
                {tag _local5}
                {type human}
                {state operatable}
              }
            }
            {action
              {type start}
              {waypoint "0"}
              {approach force}
            }
          }
          {"delay"
            {time 15}
          }
          {## "actor_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _local5}
              {type human}
              {state operatable}
            }
            {fire_mode open}
            {move_mode zone}
            {move_radius 30}
            {ai
              {advance_ratio 2}
              {retreat_ratio 5}
            }
          }
          {## "delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _local5}
            }
            {tag_remove _local5}
          }
          {"delay"
            {time 0.5}
          }
          {"trigger"
            {name "lua/a/bot_base"}
          }
        }
      }
      {"lua/ignore_incheck"
        {condition
          {expression "(1 & 2) | (2 & 3)"}
          {terms
            {"1.entities"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _lua_ignore}
                    }
                  }
                  {include
                    {zone
                      {zone "global"}
                    }
                    {state
                      {state operatable}
                    }
                  }
                  {exclude
                    {zone
                      {zone "base_a"}
                    }
                  }
                }
              }
              {count
                {op ">"}
                {value 8}
              }
            }
            {"2.cmp_i"
              {var "ai_on$"}
              {op ">"}
              {value 0}
            }
            {"3.entities"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _lua_ignore}
                    }
                  }
                  {include
                    {zone
                      {zone "global"}
                    }
                    {tag
                      {tag _lua_mi}
                    }
                    {state
                      {state operatable}
                    }
                  }
                }
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _lua_ignore}
                      }
                    }
                    {include
                      {tag
                        {tag _lua_mi}
                      }
                      {team
                        {team b}
                      }
                    }
                  }
                }
              }
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _lua_ignore}
                      }
                    }
                    {include
                      {tag
                        {tag _lua_mi}
                      }
                      {team
                        {team b}
                      }
                    }
                  }
                }
                {tag_remove _lua_ignore}
              }
              {"delay"
                {time 10}
              }
              {"trigger"
                {name "lua/ignore_incheck"}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _lua_ignore}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {zone
                        {zone "base_a"}
                      }
                    }
                  }
                  {sort
                    {type entity}
                    {entity
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag flag}
                          }
                        }
                        {exclude
                          {state
                            {state inactive}
                          }
                        }
                      }
                    }
                    {mode farthest}
                  }
                  {amount 1
                  }
                }
                {tag_add _tidy1}
              }
              {"delay"
                {time 1}
              }
              {"switch"
                {"case"
                  {condition
                    {type see_enemy}
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _tidy1}
                      {state operatable}
                    }
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _tidy1}
                    }
                    {tag_remove _lua_ignore}
                  }
                  {"delay"
                    {time 1}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _tidy1}
                    }
                    {tag_remove _tidy1}
                  }
                }
              }
              {"delay"
                {time 15}
              }
              {"trigger"
                {name "lua/ignore_incheck"}
              }
            }
          }
        }
      }
      {"ai/recrew_tank"
        {condition
          {type 1}
          {terms
            {"1.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot}
                    }
                  }
                  {include
                    {prop
                      {prop human}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag repairing}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot_tank}
                    }
                    {tag
                      {tag player_armor}
                    }
                  }
                  {include
                    {zone
                      {zone "global"}
                    }
                    {prop
                      {prop vehicle}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag destroyed}
                    }
                    {tag
                      {tag body_break}
                    }
                    {tag
                      {tag ammo_cooked}
                    }
                    {state
                      {state inhabited}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 50}
              }
              {tag
                {"tag pair"}
                {"for selector" tcrew}
                {"for enemy" etank_enter}
              }
            }
            {"2.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot}
                    }
                  }
                  {include
                    {prop
                      {prop human}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag repairing}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot_tank}
                    }
                    {tag
                      {tag player_armor}
                    }
                  }
                  {include
                    {zone
                      {zone "global"}
                    }
                    {prop
                      {prop vehicle}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag destroyed}
                    }
                    {tag
                      {tag body_break}
                    }
                    {tag
                      {tag ammo_cooked}
                    }
                    {state
                      {state inhabited}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 50}
              }
              {tag
                {"tag pair"}
                {"for selector" tcrew}
                {"for enemy" etank_enter}
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type see_enemy}
                {selector
                  {ignore_captured_by_user 0}
                  {tag tcrew}
                  {zone "global"}
                  {state operatable}
                }
              }
              {"delay"
                {time 1}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag tcrew}
                }
                {tag_remove tcrew}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag etank_enter}
                }
                {tag_remove etank_enter}
              }
              {"delay"
                {time 30}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag tcrew}
                          }
                        }
                        {include
                          {team
                            {team b}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag bot}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {team
                            {team b}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {tag
                            {tag tcrew}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {sort
                        {type entity}
                        {entity
                          {ignore_captured_by_user 0}
                          {tag tcrew}
                        }
                      }
                      {amount 1
                      }
                    }
                    {tag_add temp3}
                  }
                }
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag tcrew}
                          }
                        }
                        {include
                          {team
                            {team a}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag bot}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {team
                            {team a}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {tag
                            {tag tcrew}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {sort
                        {type entity}
                        {entity
                          {ignore_captured_by_user 0}
                          {tag tcrew}
                        }
                      }
                      {amount 1
                      }
                    }
                    {tag_add temp3}
                  }
                }
                {"default"}
              }
              {"delay"
                {time 0.5}
              }
              {"while"
                {condition
                  {type near}
                  {units
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag temp3}
                        }
                      }
                      {include
                        {prop
                          {prop human}
                        }
                        {state
                          {state operatable}
                        }
                      }
                      {exclude
                        {tag
                          {tag tcrew}
                        }
                        {state
                          {state inactive}
                        }
                        {state
                          {state linked}
                        }
                      }
                    }
                  }
                  {near_to
                    {ignore_captured_by_user 0}
                    {tag etank_enter}
                  }
                  {distance 90}
                }
                {"delay"
                  {time 0.1}
                }
                {"entity_state"
                  {selector
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag temp3}
                        }
                      }
                      {include
                        {prop
                          {prop human}
                        }
                        {state
                          {state operatable}
                        }
                      }
                      {exclude
                        {tag
                          {tag tcrew}
                        }
                        {state
                          {state inactive}
                        }
                        {state
                          {state linked}
                        }
                      }
                    }
                    {sort
                      {type entity}
                      {entity
                        {ignore_captured_by_user 0}
                        {tag etank_enter}
                      }
                    }
                    {amount 1
                    }
                  }
                  {tag_add tcrew}
                  {tag_remove temp3}
                }
                {"delay"
                  {time 0.1}
                }
              }
              {"delay"
                {time 0.3}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag tcrew}
                  {state operatable}
                }
                {tag_add _lua_mi}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag tcrew}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                }
                {drop orders}
                {fire_mode open}
                {move_mode free}
                {movement
                  {speed assault}
                }
              }
              {"delay"
                {time 0.3}
              }
              {"action"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag tcrew}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                }
                {drop orders}
                {action move}
                {target
                  {ignore_captured_by_user 0}
                  {tag etank_enter}
                }
              }
              {"delay"
                {time 6}
              }
              {"switch"
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag etank_enter}
                          }
                        }
                        {include
                          {prop
                            {prop vehicle}
                          }
                        }
                        {exclude
                          {tag
                            {tag destroyed}
                          }
                          {tag
                            {tag body_break}
                          }
                          {tag
                            {tag ammo_cooked}
                          }
                          {state
                            {state inhabited}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"board"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag tcrew}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {tag
                            {tag repairing}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                    }
                    {vehicle
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag etank_enter}
                          }
                        }
                        {include
                          {prop
                            {prop vehicle}
                          }
                        }
                        {exclude
                          {tag
                            {tag destroyed}
                          }
                          {tag
                            {tag ammo_cooked}
                          }
                          {tag
                            {tag body_break}
                          }
                        }
                      }
                    }
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag tcrew}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {tag
                            {tag repairing}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                    }
                    {drop orders}
                    {fire_mode open}
                    {move_mode free}
                    {ai_move
                      {mode enable}
                    }
                  }
                }
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag tcrew}
                  {state operatable}
                }
                {tag_add _mi_temp6}
              }
              {"delay"
                {time 20}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {group
                    {select
                      {tag
                        {tag tcrew}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                }
                {tag_remove tcrew}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag temp3}
                }
                {tag_remove temp3}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag etank_enter}
                }
                {tag_remove etank_enter}
              }
              {"delay"
                {time 30}
              }
            }
          }
          {"delay"
            {time 30}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _mi_temp6}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {tag
                    {tag repairing}
                  }
                  {state
                    {state inactive}
                  }
                  {state
                    {state linked}
                  }
                }
              }
            }
            {tag_remove _lua_mi}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _mi_temp6}
            }
            {tag_remove _mi_temp6}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "ai/recrew_tank"}
          }
        }
      }
      {"lua/in_transit_act"
        {condition
          {type 1}
          {terms
            {"1.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _bot}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_alert}
                    }
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag _lua_ignore}
                    }
                    {tag
                      {tag repairing}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 90}
              }
              {tag
                {"tag pair"}
                {"for selector" _act}
              }
            }
            {"2.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _bot}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_alert}
                    }
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag _lua_ignore}
                    }
                    {tag
                      {tag repairing}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 90}
              }
              {tag
                {"tag pair"}
                {"for selector" _act}
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type see_enemy}
                {selector
                  {ignore_captured_by_user 0}
                  {tag _act}
                  {state operatable}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag _act}
                          }
                        }
                        {include
                          {tag
                            {tag bot_veh}
                          }
                          {prop
                            {prop vehicle}
                          }
                        }
                        {exclude
                          {state
                            {state user_control}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag _act}
                      {state operatable}
                    }
                    {drop orders}
                    {fire_mode open}
                    {ai_move
                      {mode enable}
                    }
                    {cannon fire}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _act}
                      {state operatable}
                    }
                    {tag_add _lua_alert}
                    {tag_remove _lua_ignore}
                  }
                  {"delay"
                    {time 10}
                  }
                }
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag _act}
                          }
                        }
                        {include
                          {tag
                            {tag bot}
                          }
                          {prop
                            {prop human}
                          }
                        }
                        {exclude
                          {state
                            {state dead}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag _act}
                      {state operatable}
                    }
                    {drop orders}
                    {fire_mode open}
                    {move_mode hold}
                    {ai_move
                      {mode enable}
                    }
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _act}
                      {state operatable}
                    }
                    {tag_add _lua_alert}
                    {tag_remove _lua_ignore}
                  }
                  {"delay"
                    {time 1}
                  }
                  {"actor_state"
                    {selector
                      {tag _act}
                      {state operatable}
                    }
                    {fire_mode open}
                    {move_mode free}
                    {ai_move
                      {mode enable}
                    }
                  }
                  {"delay"
                    {time 22}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag _act}
                      {type vehicle}
                      {state operatable}
                    }
                    {drop orders}
                    {fire_mode open}
                    {ai_move
                      {mode enable}
                    }
                    {movement
                      {forward off}
                      {backward off}
                    }
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _act}
                      {state operatable}
                    }
                    {tag_add _lua_alert}
                    {tag_remove _lua_ignore}
                  }
                  {"delay"
                    {time 2}
                  }
                  {"actor_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _act}
                      {state operatable}
                    }
                    {fire_mode open}
                    {move_mode free}
                    {ai_move
                      {mode enable}
                    }
                    {movement
                      {speed normal}
                      {forward on}
                      {backward on}
                    }
                  }
                  {"delay"
                    {time 22}
                  }
                }
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
            }
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _act}
            }
            {tag_remove _act}
          }
          {"delay"
            {time 5}
          }
          {"trigger"
            {name "lua/in_transit_act"}
          }
        }
      }
      {"lua/alert_clear"
        {condition
          {expression "(!1 & 2 & 4) | (3 & 4)"}
          {terms
            {"1.see_enemy"
              {selector
                {source advanced}
                {group
                  {select
                    {tag
                      {tag _lua_alert}
                    }
                  }
                  {include
                    {zone
                      {zone "global"}
                    }
                    {state
                      {state operatable}
                    }
                  }
                  {exclude
                    {state
                      {state user_control}
                    }
                  }
                }
              }
            }
            {"2.entities"
              {selector
                {source advanced}
                {group
                  {select
                    {tag
                      {tag _lua_alert}
                    }
                  }
                  {include
                    {zone
                      {zone "global"}
                    }
                    {state
                      {state operatable}
                    }
                  }
                  {exclude
                    {state
                      {state user_control}
                    }
                  }
                }
              }
            }
            {"3.entities"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _lua_alert}
                    }
                  }
                  {include
                    {zone
                      {zone "global"}
                    }
                    {tag
                      {tag _lua_mi}
                    }
                    {state
                      {state operatable}
                    }
                  }
                }
              }
            }
            {"4.cmp_i"
              {var "ai_on$"}
              {op ">"}
              {value 0}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"entity_state"
            {selector
              {source advanced}
              {group
                {select
                  {tag
                    {tag _bot_veh}
                  }
                }
                {include
                  {tag
                    {tag _lua_alert}
                  }
                  {state
                    {state operatable}
                  }
                  {team
                    {team b}
                  }
                }
                {exclude
                  {state
                    {state user_control}
                  }
                }
              }
            }
            {tag_add alert_temp2}
          }
          {"delay"
            {time 0.4}
          }
          {"switch"
            {"case"
              {condition
                {type see_enemy}
                {selector
                  {tag alert_temp2}
                  {zone "global"}
                  {type vehicle}
                  {state operatable}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"action"
                {selector
                  {source advanced}
                  {group
                    {select
                      {tag
                        {tag alert_temp2}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                      {team
                        {team b}
                      }
                    }
                  }
                }
                {action suppression_fire}
                {target
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {zone
                        {zone "global"}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                      {team
                        {team a}
                      }
                    }
                  }
                  {sort
                    {type entity}
                    {entity
                      {tag alert_temp2}
                    }
                  }
                }
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag alert_temp2}
                }
                {tag_remove _lua_alert}
              }
              {"delay"
                {time 0.1}
              }
              {"action"
                {selector
                  {source advanced}
                  {group
                    {select
                      {tag
                        {tag alert_temp2}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                      {team
                        {team b}
                      }
                    }
                  }
                }
                {action advance}
                {target
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag flag}
                      }
                    }
                    {exclude
                      {state
                        {state inactive}
                      }
                    }
                  }
                  {sort
                    {type entity}
                    {entity
                      {ignore_captured_by_user 0}
                      {tag alert_temp2}
                    }
                  }
                }
              }
            }
          }
          {"delay"
            {time 0.5}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _lua_alert}
                      }
                    }
                    {include
                      {tag
                        {tag _lua_mi}
                      }
                    }
                    {exclude
                      {tag
                        {tag alert_temp2}
                      }
                    }
                  }
                }
              }
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _lua_alert}
                      }
                    }
                    {include
                      {tag
                        {tag _lua_mi}
                      }
                    }
                  }
                }
                {tag_remove _lua_alert}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {group
                    {select
                      {tag
                        {tag _lua_alert}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag alert_temp2}
                      }
                    }
                  }
                  {amount 1
                  }
                }
                {tag_add alert_temp}
              }
              {"delay"
                {time 1}
              }
              {"switch"
                {"case"
                  {condition
                    {type see_enemy}
                    {selector
                      {ignore_captured_by_user 0}
                      {tag alert_temp}
                    }
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag alert_temp}
                    }
                    {tag_remove _lua_alert}
                  }
                  {"delay"
                    {time 1}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag alert_temp}
                    }
                    {tag_remove alert_temp}
                  }
                }
              }
            }
          }
          {"delay"
            {time 5}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag alert_temp2}
            }
            {tag_remove alert_temp2}
          }
          {"delay"
            {time 3}
          }
          {"trigger"
            {name "lua/alert_clear"}
          }
        }
      }
      {"environment_any"
        {condition
          {terms
            {"1.event"
              {id "gamestart"}
            }
            {"2.mission_option"
              {name "any_weather"}
            }
          }
        }
        {actions
          {"switch"
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/day_1"}
                {time 1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/day_2"}
                {time 1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/day_3"}
                {time 1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/day_cloudy_1"}
                {time 1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/day_rain_1"}
                {time 1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/day_rain_2"}
                {time 1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.2}
              }
              {"environment"
                {name "goh/multi/west/summer/night_1"}
                {time -1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.2}
              }
              {"environment"
                {name "goh/multi/west/summer/night_2"}
                {time -1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.2}
              }
              {"environment"
                {name "goh/multi/west/summer/night_rain_1"}
                {time -1}
                {apply}
              }
            }
            {"default"}
          }
        }
      }
      {"environment_day"
        {condition
          {terms
            {"1.event"
              {id "gamestart"}
            }
            {"2.mission_option"
              {name "day_weather"}
            }
          }
        }
        {actions
          {"switch"
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/day_1"}
                {time 1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/day_2"}
                {time 1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/day_3"}
                {time 1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/day_cloudy_1"}
                {time 1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/day_rain_1"}
                {time 1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/day_rain_2"}
                {time 1}
                {apply}
              }
            }
            {"default"}
          }
        }
      }
      {"environment_night"
        {condition
          {terms
            {"1.event"
              {id "gamestart"}
            }
            {"2.mission_option"
              {name "night_weather"}
            }
          }
        }
        {actions
          {"switch"
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/night_1"}
                {time -1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/night_2"}
                {time -1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/night_rain_1"}
                {time -1}
                {apply}
              }
            }
          }
        }
      }
      {"start"
        {condition
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"event"
            {event "gamestart"}
            {mode set}
            {delay 0}
          }
          {"delay"
            {time 0.1}
          }
          {"event"
            {event "ambient"}
            {mode set}
            {delay 0}
          }
        }
      }
      {"music_new/action_playlist/action_theme_3"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {start "/music/action_theme_3.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/action_playlist/action_theme_3"}
          }
        }
      }
      {"music_new/ambient_selection"
        {condition
          {expression "1 & (2|3)"}
          {terms
            {"1.event"
              {id "gamestart"}
            }
            {"2.event"
              {id "ambient"}
            }
            {"3.cmp_i"
              {var "ambient$"}
              {op ">="}
              {value 20}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"event"
            {event "action"}
            {mode reset}
            {delay 0}
          }
          {"event"
            {event "ambient"}
            {mode set}
            {delay 0}
          }
          {"delay"
            {time 0.1}
          }
          {"trigger"
            {name "music_new/music_fade"}
            {on}
          }
          {"delay"
            {time 0.1}
          }
          {"set_i"
            {var "action_selection$"}
            {op "="}
            {value 0}
          }
          {"set_i"
            {var "ambient$"}
            {op "="}
            {value 0}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/action_selection "}
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type cmp_i}
                {var "ambient_selection$"}
                {op "=="}
                {value 0}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.15}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 1}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.15}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 2}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 3}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.5}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 4}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 1}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 5}
                  }
                }
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "ambient_selection$"}
                {op "<<"}
                {value 5}
              }
              {"set_i"
                {var "ambient_selection$"}
                {op "+"}
                {value 1}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "ambient_selection$"}
                {op ">="}
                {value 5}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.2}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 1}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.2}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 2}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 3}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.5}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 4}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 1}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 5}
                  }
                }
              }
            }
          }
          {"switch"
            {"case"
              {condition
                {type cmp_i}
                {var "ambient_selection$"}
                {op "=="}
                {value 1}
              }
              {"trigger"
                {name "music_new/ambient_playlist/ambient_2"}
                {on}
              }
              {"delay"
                {time 105}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "ambient_selection$"}
                    {op "=="}
                    {value 1}
                  }
                  {"trigger"
                    {name "music_new/ambient_selection"}
                  }
                }
                {"default"}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "ambient_selection$"}
                {op "=="}
                {value 2}
              }
              {"trigger"
                {name "music_new/ambient_playlist/ambient_4"}
                {on}
              }
              {"delay"
                {time 165}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "ambient_selection$"}
                    {op "=="}
                    {value 2}
                  }
                  {"trigger"
                    {name "music_new/ambient_selection"}
                  }
                }
                {"default"}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "ambient_selection$"}
                {op "=="}
                {value 3}
              }
              {"trigger"
                {name "music_new/ambient_playlist/ambient_west_1"}
                {on}
              }
              {"delay"
                {time 155}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "ambient_selection$"}
                    {op "=="}
                    {value 3}
                  }
                  {"trigger"
                    {name "music_new/ambient_selection"}
                  }
                }
                {"default"}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "ambient_selection$"}
                {op "=="}
                {value 4}
              }
              {"trigger"
                {name "music_new/ambient_playlist/ambient_west_2"}
                {on}
              }
              {"delay"
                {time 115}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "ambient_selection$"}
                    {op "=="}
                    {value 4}
                  }
                  {"trigger"
                    {name "music_new/ambient_selection"}
                  }
                }
                {"default"}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "ambient_selection$"}
                {op "=="}
                {value 5}
              }
              {"trigger"
                {name "music_new/ambient_playlist/usa_ambient_lvl1"}
                {on}
              }
              {"delay"
                {time 95}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "ambient_selection$"}
                    {op "=="}
                    {value 5}
                  }
                  {"trigger"
                    {name "music_new/ambient_selection"}
                  }
                }
                {"default"}
              }
            }
            {"default"
              {"trigger"
                {name "music_new/ambient_selection"}
              }
            }
          }
        }
      }
      {"music_new/silent_timer"
        {condition
          {expression "1 & 2 & !3"}
          {terms
            {"1.event"
              {id "gamestart"}
            }
            {"2.event"
              {id "action"}
            }
            {"3.event"
              {id "ambient"}
            }
          }
        }
        {actions
          {"delay"
            {time 4}
          }
          {"set_i"
            {var "ambient$"}
            {op "+"}
            {value 4}
          }
          {"delay"
            {time 0.1}
          }
          {"trigger"
            {name "music_new/silent_timer"}
          }
        }
      }
      {"music_new/ambient_playlist/ambient_2"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {start "/music/ambient_2.wav"}
            {stop_all}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/ambient_playlist/ambient_2"}
          }
        }
      }
      {"music_new/ambient_playlist/ambient_4"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {start "/music/ambient_4.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/ambient_playlist/ambient_4"}
          }
        }
      }
      {"music_new/action_selection "
        {condition
          {expression "1 & (2|3)"}
          {terms
            {"1.event"
              {id "gamestart"}
            }
            {"2.event"
              {id "action"}
            }
            {"3.signal"
              {zone "global"}
              {signals "shot injure explosion"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"event"
            {event "ambient"}
            {mode reset}
            {delay 0}
          }
          {"event"
            {event "action"}
            {mode set}
            {delay 0}
          }
          {"delay"
            {time 0.1}
          }
          {"trigger"
            {name "music_new/music_fade"}
            {on}
          }
          {"delay"
            {time 0.1}
          }
          {"set_i"
            {var "ambient_selection$"}
            {op "="}
            {value 0}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/ambient_selection"}
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type cmp_i}
                {var "action_selection$"}
                {op "=="}
                {value 0}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.25}
                  }
                  {"set_i"
                    {var "action_selection$"}
                    {op "="}
                    {value 1}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"set_i"
                    {var "action_selection$"}
                    {op "="}
                    {value 2}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.5}
                  }
                  {"set_i"
                    {var "action_selection$"}
                    {op "="}
                    {value 3}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 1}
                  }
                  {"set_i"
                    {var "action_selection$"}
                    {op "="}
                    {value 4}
                  }
                }
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "action_selection$"}
                {op "<<"}
                {value 4}
              }
              {"set_i"
                {var "action_selection$"}
                {op "+"}
                {value 1}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "action_selection$"}
                {op ">="}
                {value 4}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"set_i"
                    {var "action_selection$"}
                    {op "="}
                    {value 1}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.25}
                  }
                  {"set_i"
                    {var "action_selection$"}
                    {op "="}
                    {value 2}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.5}
                  }
                  {"set_i"
                    {var "action_selection$"}
                    {op "="}
                    {value 3}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 1}
                  }
                  {"set_i"
                    {var "action_selection$"}
                    {op "="}
                    {value 4}
                  }
                }
              }
            }
          }
          {"switch"
            {"case"
              {condition
                {type cmp_i}
                {var "action_selection$"}
                {op "=="}
                {value 1}
              }
              {"trigger"
                {name "music_new/action_playlist/action_theme_3"}
                {on}
              }
              {"delay"
                {time 170}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "action_selection$"}
                    {op "=="}
                    {value 1}
                  }
                  {"trigger"
                    {name "music_new/action_selection "}
                  }
                }
                {"default"}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "action_selection$"}
                {op "=="}
                {value 2}
              }
              {"trigger"
                {name "music_new/action_playlist/ger_battle_west_lvl1"}
                {on}
              }
              {"delay"
                {time 180}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "action_selection$"}
                    {op "=="}
                    {value 2}
                  }
                  {"trigger"
                    {name "music_new/action_selection "}
                  }
                }
                {"default"}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "action_selection$"}
                {op "=="}
                {value 3}
              }
              {"trigger"
                {name "music_new/action_playlist/ger_battle_west_lvl2"}
                {on}
              }
              {"delay"
                {time 95}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "action_selection$"}
                    {op "=="}
                    {value 3}
                  }
                  {"trigger"
                    {name "music_new/action_selection "}
                  }
                }
                {"default"}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "action_selection$"}
                {op "=="}
                {value 4}
              }
              {"trigger"
                {name "music_new/action_playlist/usa_battle_lvl1"}
                {on}
              }
              {"delay"
                {time 300}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "action_selection$"}
                    {op "=="}
                    {value 4}
                  }
                  {"trigger"
                    {name "music_new/action_selection "}
                  }
                }
              }
            }
            {"default"
              {"trigger"
                {name "music_new/action_selection "}
              }
            }
          }
        }
      }
      {"music_new/music_fade"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {stop "/music/action_theme_3.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 0.01}
          }
          {"music"
            {stop "/music/ger_battle_west_lvl1.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 0.01}
          }
          {"music"
            {stop "/music/ger_battle_west_lvl2.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 0.01}
          }
          {"music"
            {stop "/music/usa_battle_lvl1.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 0.1}
          }
          {"music"
            {stop "/music/ambient_2.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 0.01}
          }
          {"music"
            {stop "/music/ambient_4.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 0.01}
          }
          {"music"
            {stop "/music/ambient_west_1.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 0.01}
          }
          {"music"
            {stop "/music/ambient_west_2.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 0.01}
          }
          {"music"
            {stop "/music/usa_ambient_lvl1.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 0.01}
          }
          {"trigger"
            {name "music_new/music_fade"}
          }
        }
      }
      {"music_new/silent_timer_reset"
        {condition
          {expression "1 & 2 & !3 & 4 & !5"}
          {terms
            {"1.event"
              {id "gamestart"}
            }
            {"2.event"
              {id "action"}
            }
            {"3.event"
              {id "ambient"}
            }
            {"4.signal"
              {zone "global"}
              {signals "shot injure explosion"}
            }
            {"5.cmp_i"
              {var "ambient$"}
              {op "=="}
              {value 0}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"set_i"
            {var "ambient$"}
            {op "="}
            {value 0}
          }
          {"delay"
            {time 4}
          }
          {"trigger"
            {name "music_new/silent_timer_reset"}
          }
        }
      }
      {"music_new/action_playlist/ger_battle_west_lvl1"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {start "/music/ger_battle_west_lvl1.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/action_playlist/ger_battle_west_lvl1"}
          }
        }
      }
      {"music_new/action_playlist/ger_battle_west_lvl2"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {start "/music/ger_battle_west_lvl2.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/action_playlist/ger_battle_west_lvl2"}
          }
        }
      }
      {"music_new/action_playlist/usa_battle_lvl1"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {start "/music/usa_battle_lvl1.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/action_playlist/usa_battle_lvl1"}
          }
        }
      }
      {"music_new/ambient_playlist/ambient_west_1"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {start "/music/ambient_west_1.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/ambient_playlist/ambient_west_1"}
          }
        }
      }
      {"music_new/ambient_playlist/ambient_west_2"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {start "/music/ambient_west_2.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/ambient_playlist/ambient_west_2"}
          }
        }
      }
      {"music_new/ambient_playlist/usa_ambient_lvl1"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {start "/music/usa_ambient_lvl1.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/ambient_playlist/usa_ambient_lvl1"}
          }
        }
      }
      {"drumsound"
        {condition
          {terms
            {"1.event"
              {id "gamestart"}
            }
          }
        }
        {actions
          {"sound"
            {name "interface/gui/matchmaking"}
          }
        }
      }
      {"notifications"
        {condition
          {terms
            {"1.event"
              {id "gamestart"}
            }
          }
        }
        {actions
          {"delay"
            {time 300}
          }
          {"sound"
            {name "gui/level_up"}
          }
          {"delay"
            {time 600}
          }
          {"sound"
            {name "gui/level_up"}
          }
          {"delay"
            {time 600}
          }
          {"sound"
            {name "gui/level_up"}
          }
        }
      }
    }
    {waypoints
      {"0"
        {position -2461.32 -2779.43 262.641}
        {transition "1"}
        {transition "4"}
        {transition "5"}
        {transition "2"}
        {transition "3"}
        {transition "6"}
        {transition "7"}
        {transition "8"}
        {transition "9"}
        {transition "10"}
        {transition "11"}
      }
      {"1"
        {position -2118.19 -2777.61 277.267}
        {commands
          {"delay"
            {time 1}
          }
          {"actor_to_cover"}
        }
      }
      {"10"
        {position -1923.47 -2392.17 288}
        {commands
          {"delay"
            {time 1}
          }
          {"actor_to_cover"}
        }
      }
      {"11"
        {position -1824.81 -2508.69 296}
        {commands
          {"delay"
            {time 1}
          }
          {"actor_to_cover"}
        }
      }
      {"2"
        {position -1741.31 -2935.01 292}
        {commands
          {"delay"
            {time 1}
          }
          {"actor_to_cover"}
        }
      }
      {"3"
        {position -1139.85 -2659.51 307}
        {commands
          {"delay"
            {time 1}
          }
          {"actor_to_cover"}
        }
      }
      {"4"
        {position -1478.49 -2388.63 297.207}
        {commands
          {"delay"
            {time 1}
          }
          {"actor_to_cover"}
        }
      }
      {"5"
        {position -2032.08 -2300.68 285}
        {commands
          {"delay"
            {time 1}
          }
          {"actor_to_cover"}
        }
      }
      {"6"
        {position -2919.44 -2276.88 257}
        {commands
          {"delay"
            {time 1}
          }
          {"actor_to_cover"}
        }
      }
      {"7"
        {position -851.564 -2999.92 312}
        {commands
          {"delay"
            {time 1}
          }
          {"actor_to_cover"}
        }
      }
      {"8"
        {position -1517.03 -3960.43 274}
        {commands
          {"delay"
            {time 1}
          }
          {"actor_to_cover"}
        }
      }
      {"9"
        {position -1994.5 -3132.78 283}
        {commands
          {"delay"
            {time 1}
          }
          {"actor_to_cover"}
        }
      }
    }
  }
  {Players
    {count 17}
    {diplomacy
      1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
    }
  }
  {Fog 0}
  {EntityManager {Enabled}
    {CountScale "x0.5"}
  }
}
