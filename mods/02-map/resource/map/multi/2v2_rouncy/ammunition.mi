{mission
  {Entity "ammo_point" 0x802f
    {Position -1267.96 -1385.65}
    {xform zl 94.53}
    {Extender "map_point"
      {name f1}
      {zone
        {radius 0}
        {zoneId "f1"}
      }
      {phase 0}
      {order 0}
      {show All}
      {visor MapPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 48}
    {Able "minimap"}
  }
  {Entity "ammo_point" 0x8011
    {Position 3046.24 3661.63}
    {xform zl -144.87}
    {Extender "map_point"
      {name f3}
      {zone
        {radius 0}
        {zoneId "f3"}
      }
      {phase 0}
      {order 0}
      {show All}
      {visor MapPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 17}
    {Able "minimap"}
  }
  {Entity "ammo_point" 0x8013
    {Position -414.64 -396.28}
    {xform zl 154.24}
    {Extender "map_point"
      {name f2}
      {zone
        {radius 0}
        {zoneId "f2"}
      }
      {phase 0}
      {order 0}
      {show All}
      {visor MapPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 18}
    {Able "minimap"}
  }
  {Entity "ammo_point" 0x8003
    {Position 2333.25 2890.44}
    {xform zl -107.29}
    {Extender "map_point"
      {name f5}
      {zone
        {radius 0}
        {zoneId "f5"}
      }
      {phase 0}
      {order 0}
      {show All}
      {visor MapPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 2}
    {Able "minimap"}
  }
  {Entity "ammo_point" 0x8004
    {Position 4218.73 4571.91}
    {xform zl 111.45}
    {Extender "map_point"
      {name f4}
      {zone
        {radius 0}
        {zoneId "f4"}
      }
      {phase 0}
      {order 0}
      {show All}
      {visor MapPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 3}
    {Able "minimap"}
  }
  {Entity "flag_point_base" 0xe002
    {Position -2203.28 -950.06}
    {xform zl 90}
    {Extender "map_point"
      {name base_flag_b}
      {zone
        {radius 0}
        {zoneId "base_a"}
      }
      {phase 0}
      {order 0}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Extender "fortification"
      {level
        {steps 0}
        {radius 0}
        {angle "90"}
        {elementAngle "180"}
        {buildTime 60}
        {entity "flagpoint_ammo"}
      }
      {level
        {steps 2}
        {radius 13}
        {angle "0"}
        {buildTime 60}
        {entity "sandbag_heap_curved"}
        {skip "0 1 2 7"}
        {manual
          {3
            -0.239 -0.97 0
            0.97 -0.239 0
            0 0 1
            121.347 1689.72 0
          }
          {4
            0.098 -0.995 0
            0.995 0.098 0
            0 0 0.999
            209.313 1683.42 0
          }
          {5
            0.746 -0.665 0
            0.665 0.746 0
            0 0 0.999
            -594.108 1053.09 0
          }
          {6
            0.997 0.072 0
            -0.072 0.997 0
            0 0 0.999
            -570.046 1122.75 0
          }
        }
      }
      {level
        {steps 6}
        {radius 25}
        {angle "45"}
        {azimuth "8"}
        {elementAngle "5"}
        {buildTime 60}
        {entity "sandbag_structured_straight"}
        {skip "0 1 2 9 10 11 12 13 14 21 22 23"}
        {manual
          {3
            0.976 -0.213 0
            0.213 0.976 0
            0 0 0.999
            -1030.29 1034.91 12.685
          }
          {4
            0.997 -0.075 0
            0.075 0.997 0
            0 0 0.999
            -1014.21 1102.79 8.611
          }
          {5
            0.948 -0.316 0
            0.316 0.948 0
            0 0 1
            -895.592 1223.78 2.342
          }
          {6
            0.983 -0.181 0
            0.181 0.983 0
            0 0 1
            -872.347 1289.55 1.564
          }
          {7
            0.975 -0.218 0
            0.218 0.975 0
            0 0 1
            -827.479 1438.33 1.533
          }
          {8
            0.996 -0.08 0
            0.08 0.996 0
            0 0 1
            -811.036 1506.13 0
          }
        }
      }
      {level
        {steps 1}
        {radius 8.5}
        {buildTime 120}
        {entity "watch_tower"}
        {skip "0"}
        {manual
          {1
            0.55 -0.834 0
            0.834 0.55 0
            0 0 1
            335.11 1776.33 0
          }
          {2
            0.496 -0.868 0
            0.868 0.496 0
            0 0 0.999
            -261.409 966.269 0
          }
          {3
            0.763 -0.645 0
            0.645 0.763 0
            0 0 1
            -1005.07 1346.45 9.88
          }
        }
      }
      {level
        {steps 5}
        {radius 9}
        {angle "45"}
        {azimuth "14"}
        {buildTime 60}
        {entity "sandbag_framed_straight"}
        {skip "0 1 2 3 4 5 6 7 8 9 10 11 12 18 19"}
        {manual
          {13
            0.292 -0.956 0
            0.956 0.292 0
            0 0 1
            -519.033 1366.63 0
          }
          {14
            0.515 -0.857 0
            0.857 0.515 0
            0 0 1
            -478.953 1384.47 -2
          }
          {15
            0.707 -0.707 0
            0.707 0.707 0
            0 0 1
            -444.38 1411.49 -2.796
          }
          {16
            0.857 -0.515 0
            0.515 0.857 0
            0 0 1
            -417.369 1446.06 0
          }
          {17
            0.956 -0.292 0
            0.292 0.956 0
            0 0 1
            -399.525 1486.14 -0.59
          }
        }
      }
    }
    {Player 0}
    {MID 4}
  }
  {Entity "flag_point_base" 0xa000
    {Position 1590.34 160.74}
    {xform zl -90}
    {Extender "map_point"
      {name base_flag_a}
      {zone
        {radius 0}
        {zoneId "base_b"}
      }
      {phase 0}
      {order 0}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Extender "fortification"
      {level
        {steps 0}
        {radius 0}
        {angle "90"}
        {elementAngle "180"}
        {buildTime 60}
        {entity "flagpoint_ammo"}
      }
      {level
        {steps 2}
        {radius 13}
        {angle "0"}
        {buildTime 60}
        {entity "sandbag_heap_curved"}
        {skip "0 1 2 3 4 7"}
        {manual
          {5
            -0.182 0.982 0
            -0.982 -0.182 0
            0 0 0.999
            1132.31 287.559 3.953
          }
          {6
            -0.979 -0.196 0
            0.196 -0.979 0
            0 0 0.999
            1099.48 241.3 3.802
          }
        }
      }
      {level
        {steps 6}
        {radius 25}
        {angle "45"}
        {azimuth "8"}
        {elementAngle "5"}
        {buildTime 60}
        {entity "sandbag_structured_straight"}
        {skip "0 1 2 5 6 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23"}
        {manual
          {3
            -0.023 0.999 0
            -0.999 -0.023 0
            0 0 0.999
            1923.39 611.054 37.185
          }
          {4
            -0.53 0.847 0
            -0.847 -0.53 0
            0 0 0.999
            1544.13 231.125 17.891
          }
          {7
            -0.825 0.562 0
            -0.562 -0.825 0
            0 0 1
            1263.93 442.1 7.028
          }
          {8
            -0.835 0.547 0
            -0.547 -0.835 0
            0 0 1
            1539.51 813.37 5.284
          }
        }
      }
      {level
        {steps 1}
        {radius 8.5}
        {buildTime 120}
        {entity "watch_tower"}
        {skip "3"}
        {manual
          {0
            -0.85 0.523 0
            -0.523 -0.85 0
            0 0 0.999
            1964.39 -194.383 22
          }
          {1
            -0.738 0.673 0
            -0.673 -0.738 0
            0 0 1
            825.567 -289.671 1.028
          }
          {2
            -0.254 0.965 0
            -0.965 -0.254 0
            0 0 0.999
            1231.67 -33.866 20
          }
        }
      }
      {level
        {steps 5}
        {radius 9}
        {angle "45"}
        {azimuth "14"}
        {buildTime 60}
        {entity "sandbag_framed_straight"}
        {skip "0 1 2 3 4 8 12 13 14 15 16 17 18 19"}
        {manual
          {5
            -0.789 0.613 0
            -0.613 -0.789 0
            0 0 0.999
            1873.61 357.347 19
          }
          {6
            -0.914 0.404 0
            -0.404 -0.914 0
            0 0 0.999
            1851.11 319.683 19
          }
          {7
            -0.985 0.171 0
            -0.171 -0.985 0
            0 0 1
            1838.39 277.694 20.324
          }
          {9
            -0.794 0.605 0
            -0.605 -0.794 0
            0 0 1
            1550.3 806.02 9.821
          }
          {10
            -0.806 0.59 0
            -0.59 -0.806 0
            0 0 0.999
            1275.15 434.159 10.199
          }
          {11
            0.039 0.998 0
            -0.998 0.039 0
            0 0 0.999
            1928.68 636.319 24.999
          }
        }
      }
    }
    {Player 0}
    {MID 5}
  }
  {Entity "map_point" 0xc007
    {Position -4600 4760}
    {xform zl -40}
    {Extender "map_point"
      {name b2}
      {team b}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 2}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 9}
  }
  {Entity "map_point" 0x8005
    {Position 4800 -4285}
    {xform zl 140}
    {Extender "map_point"
      {name a1}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 1}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 1}
  }
  {Entity "map_point" 0x8000
    {Position -4800 4285}
    {xform zl -40}
    {Extender "map_point"
      {name b1}
      {team b}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 1}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 6}
  }
  {Entity "map_point" 0x8001
    {Position 4600 -4760}
    {xform zl 140}
    {Extender "map_point"
      {name a2}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 2}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 7}
  }
  {Entity "ammo2" 0x8007
    {Extender "supply_zone"
      {enabled}
      {current 0}
    }
  }
  {Entity "ammo2" 0x8008
    {Extender "supply_zone"
      {enabled}
      {current 0}
    }
  }
  {Entity "ammo2" 0x8009
    {Extender "supply_zone"
      {enabled}
      {current 0}
    }
  }
  {Entity "ammo_point" 0xa001
    {Position -3856.14 -3878.1}
    {xform zl 55.88}
    {Extender "map_point"
      {name f8}
      {zone
        {radius 0}
        {zoneId "f8"}
      }
      {phase 0}
      {order 0}
      {show All}
      {visor MapPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 8}
    {Able "minimap"}
  }
  {Entity "ammo2" 0xa002
    {Extender "supply_zone"
      {enabled}
      {current 0}
    }
  }
  {Entity "ammo_point" 0xa003
    {Position -1829.5 -2224.71}
    {xform zl 167.7}
    {Extender "map_point"
      {name f7}
      {zone
        {radius 0}
        {zoneId "f7"}
      }
      {phase 0}
      {order 0}
      {show All}
      {visor MapPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 10}
    {Able "minimap"}
  }
  {Entity "ammo2" 0xa004
    {Extender "supply_zone"
      {enabled}
      {current 0}
    }
  }
  {Entity "ammo_point" 0xa005
    {Position -3007.14 -3540.17}
    {xform zl 66.83}
    {Extender "map_point"
      {name f10}
      {zone
        {radius 0}
        {zoneId "f10"}
      }
      {phase 0}
      {order 0}
      {show All}
      {visor MapPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 11}
    {Able "minimap"}
  }
  {Entity "ammo2" 0xa006
    {Extender "supply_zone"
      {enabled}
      {current 0}
    }
  }
  {Entity "ammo_point" 0xa007
    {Position 1088.24 1735.02}
    {xform zl 104.89}
    {Extender "map_point"
      {name f6}
      {zone
        {radius 0}
        {zoneId "f6"}
      }
      {phase 0}
      {order 0}
      {show All}
      {visor MapPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 12}
    {Able "minimap"}
  }
  {Entity "ammo2" 0xa008
    {Extender "supply_zone"
      {enabled}
      {current 0}
    }
  }
  {Entity "ammo_point" 0xa009
    {Position 456.22 393.26}
    {xform zl 58.48}
    {Extender "map_point"
      {name f9}
      {zone
        {radius 0}
        {zoneId "f9"}
      }
      {phase 0}
      {order 0}
      {show All}
      {visor MapPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 13}
    {Able "minimap"}
  }
  {Entity "ammo2" 0xa00a
    {Extender "supply_zone"
      {enabled}
      {current 0}
    }
  }
  {Entity "ammo2" 0x8006
    {Extender "supply_zone"
      {enabled}
      {current 0}
    }
  }
  {Entity "ammo2" 0x800a
    {Extender "supply_zone"
      {enabled}
      {current 0}
    }
  }
  {Entity "map_point" 0x800e
    {Position -3960.69 4902.38}
    {xform zl -40}
    {Extender "map_point"
      {name b3}
      {team b}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 3}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 14}
  }
  {Entity "map_point" 0x800f
    {Position -3551.56 5009.02}
    {xform zl -40}
    {Extender "map_point"
      {name b4}
      {team b}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 4}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 15}
  }
  {Entity "map_point" 0x8010
    {Position -3144.97 5003.81}
    {xform zl -40}
    {Extender "map_point"
      {name b5}
      {team b}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 5}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 16}
  }
  {Entity "map_point" 0x8012
    {Position -2787.67 5035.63}
    {xform zl -40}
    {Extender "map_point"
      {name b6}
      {team b}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 6}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 19}
  }
  {Entity "map_point" 0x8014
    {Position -4842.14 3947.14}
    {xform zl -40}
    {Extender "map_point"
      {name b7}
      {team b}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 7}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 20}
  }
  {Entity "map_point" 0x8015
    {Position -4872.29 3668.88}
    {xform zl -40}
    {Extender "map_point"
      {name b8}
      {team b}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 8}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 21}
  }
  {Entity "map_point" 0x8016
    {Position 4205.3 -4858.82}
    {xform zl 140}
    {Extender "map_point"
      {name a3}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 3}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 22}
  }
  {Entity "map_point" 0x8017
    {Position 3747.37 -4937.28}
    {xform zl 140}
    {Extender "map_point"
      {name a4}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 4}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 23}
  }
  {Entity "map_point" 0x8018
    {Position 3354.43 -4991.32}
    {xform zl 140}
    {Extender "map_point"
      {name a5}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 5}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 24}
  }
  {Entity "map_point" 0x8019
    {Position 2961.32 -5025.66}
    {xform zl 140}
    {Extender "map_point"
      {name a6}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 6}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 25}
  }
  {Entity "map_point" 0x801a
    {Position 4805.23 -3737.21}
    {xform zl 140}
    {Extender "map_point"
      {name a7}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 7}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 26}
  }
  {Entity "map_point" 0x801b
    {Position 4834.12 -3445.87}
    {xform zl 140}
    {Extender "map_point"
      {name a8}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 8}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 27}
  }
  {Link 0x8007 {0x802f "ammo"}}
  {Link 0x8008 {0x8011 "ammo"}}
  {Link 0x8009 {0x8013 "ammo"}}
  {Link 0x8006 {0x8003 "ammo"}}
  {Link 0x800a {0x8004 "ammo"}}
  {Link 0xa002 {0xa001 "ammo"}}
  {Link 0xa004 {0xa003 "ammo"}}
  {Link 0xa006 {0xa005 "ammo"}}
  {Link 0xa008 {0xa007 "ammo"}}
  {Link 0xa00a {0xa009 "ammo"}}
  {Tags "_no-recrew" 0x2058}
  {Tags "flag" 0x802f}
  {Tags "flag" 0x8011}
  {Tags "flag" 0x8013}
  {Tags "flag" 0x8003}
  {Tags "flag" 0x8004}
  {Tags "base_a" "flag" 0xe002}
  {Tags "base_b" "flag" 0xa000}
  {Tags "flag" 0xa001}
  {Tags "flag" 0xa003}
  {Tags "flag" 0xa005}
  {Tags "flag" 0xa007}
  {Tags "flag" 0xa009}
  {Environment "goh/multi/2v2_ziborovo/var3"}
  {Helpers
    {event "action"}
    {event "ambient"}
    {event "disabled"}
    {event "gamestart"}
    {event "init"}
    {zone "poly"
      {position -2061.97 -1015.64 51.6202}
      {Name "base_a"}
      {Point 428.825 295.754}
      {Point 439.562 -158.411}
      {Point 359.581 -327.203}
      {Point -450.344 -329.204}
      {Point -530.954 -281.688}
      {Point -618.254 423.372}
      {Point 371.584 377.382}
    }
    {zone "poly"
      {position 1556.01 123.888 18}
      {Name "base_b"}
      {Point 100.124 -733.158}
      {Point -538.136 -452.83}
      {Point -574.282 -119.967}
      {Point -106.41 504.834}
      {Point 566.195 484.472}
      {Point 552.509 316.649}
    }
    {zone "poly"
      {position -1149.55 -1316.53 0}
      {Name "f1"}
      {Point 408.712 99.8324}
      {Point 255.872 -426.792}
      {Point -481.746 -380.348}
      {Point -428.776 377.406}
      {Point 245.938 329.901}
    }
    {zone "poly"
      {position -2958.65 -3565.09 30.0629}
      {Name "f10"}
      {Point -411.806 -469.361}
      {Point -535.112 462.463}
      {Point 282.819 594.586}
      {Point 354.813 31.5692}
      {Point 309.285 -619.257}
    }
    {zone "poly"
      {position -463.362 -504.562 8}
      {Name "f2"}
      {Point 259.748 -424.402}
      {Point -522.967 -233.63}
      {Point -388.52 356.746}
      {Point 194.988 463.459}
      {Point 456.75 -162.173}
    }
    {zone "poly"
      {position 3007.44 3688.1 62}
      {Name "f3"}
      {Point 110.312 -546.729}
      {Point -644.533 -114.755}
      {Point -104.921 626.702}
      {Point 639.142 34.7819}
    }
    {zone "poly"
      {position 3927.6 4689.44 70}
      {Name "f4"}
      {Point 361.226 -750.191}
      {Point -324.642 -184.526}
      {Point -521.461 269.437}
      {Point -464.114 360.76}
      {Point 71.4318 452.749}
      {Point 877.559 -148.229}
    }
    {zone "poly"
      {position 2319.66 2988.13 23}
      {Name "f5"}
      {Point 95.5925 -682.08}
      {Point -550.071 -424.537}
      {Point -256.275 545.674}
      {Point 23.1388 501.877}
      {Point 687.615 59.0661}
    }
    {zone "poly"
      {position 1116.14 1810.75 0}
      {Name "f6"}
      {Point 254.247 -808.938}
      {Point -696.992 -322.936}
      {Point -526.616 595.651}
      {Point 77.598 601.939}
      {Point 891.763 -65.7164}
    }
    {zone "poly"
      {position -1775.69 -2328.23 0}
      {Name "f7"}
      {Point -412.124 -446.646}
      {Point -556.003 469.606}
      {Point 487.469 443.961}
      {Point 480.657 -466.921}
    }
    {zone "poly"
      {position -3829.74 -4152.92 84}
      {Name "f8"}
      {Point 350.979 -906.033}
      {Point -753.681 255.221}
      {Point -529.8 660.315}
      {Point 373.127 728.225}
      {Point 559.375 -737.728}
    }
    {zone "poly"
      {position 470.092 379.198 0}
      {Name "f9"}
      {Point 285.259 -301.341}
      {Point 27.3907 -501.384}
      {Point -357.234 -153.902}
      {Point -423.181 50.9424}
      {Point -210.24 445.46}
      {Point 105.593 376.314}
      {Point 572.412 83.9108}
    }
    {zone "poly"
      {position 17.6461 8.51453 0}
      {Name "global"}
      {Point -5852.06 -5848.5}
      {Point -5851.75 5849.2}
      {Point 5846.14 5849.67}
      {Point 5857.67 -5850.37}
    }
    {reinforcements
      {scoreTotal 0}
      {scoreCurrent 0}
    }
    {vars
      {"action_selection"}
      {"ambient_selection"}
      {"ambient"}
      {"error"}
      {"ai_on"}
      {"user_nation"}
      {"user_team"}
      {"mp"}
      {"ignore_same_user"}
    }
    {mission_options
      {"any_weather"}
      {"day_weather"}
      {"night_weather"}
    }
    {triggers
      {"parachute"
        {condition
          {terms
            {"1.near"
              {units
                {ignore_captured_by_user 0}
                {tag eject}
                {type human}
              }
              {near_to
                {ignore_captured_by_user 0}
                {tag base}
              }
              {distance 100}
            }
          }
        }
        {actions
          {"delay"
            {time 0.05}
          }
          {"linker"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag base}
                  }
                }
                {exclude
                  {tag
                    {tag _flight}
                  }
                }
              }
            }
            {entities
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag eject}
                  }
                }
                {include
                  {prop
                    {prop human}
                  }
                }
                {exclude
                  {state
                    {state linked}
                  }
                }
              }
            }
          }
          {"delay"
            {time 0.05}
          }
          {"effect"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag base}
                  }
                }
                {exclude
                  {tag
                    {tag _flight}
                  }
                }
              }
            }
            {effect start}
          }
          {"delay"
            {time 0.05}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag base}
                  }
                }
                {include
                  {tag
                    {tag _flight}
                  }
                }
              }
            }
            {tag_add base_null}
            {tag_remove base}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag eject}
                  }
                }
                {include
                  {state
                    {state linked}
                  }
                }
              }
            }
            {tag_add eject_null}
            {tag_remove eject}
          }
          {"delay"
            {time 0.2}
          }
          {"trigger"
            {name "parachute"}
          }
        }
      }
      {"players_units"
        {condition
          {expression "(1 & 3) | (2 & 3)"}
          {terms
            {"1.entities"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {prop
                      {prop human}
                    }
                    {state
                      {state user_control}
                    }
                  }
                  {exclude
                    {tag
                      {tag player}
                    }
                    {tag
                      {tag hidden}
                    }
                    {state
                      {state dead}
                    }
                  }
                }
              }
            }
            {"2.entities"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {prop
                      {prop vehicle}
                    }
                    {state
                      {state "inhabited user_control"}
                    }
                  }
                  {exclude
                    {tag
                      {tag hidden}
                    }
                    {tag
                      {tag player_armor}
                    }
                    {tag
                      {tag player_car}
                    }
                    {tag
                      {tag player_veh}
                    }
                  }
                }
              }
            }
            {"3.cmp_i"
              {var "ai_on$"}
              {op "=="}
              {value 1}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {zone
                    {zone "global"}
                  }
                }
                {include
                  {prop
                    {prop human}
                  }
                  {state
                    {state user_control}
                  }
                }
                {exclude
                  {tag
                    {tag hidden}
                  }
                  {tag
                    {tag player}
                  }
                  {state
                    {state dead}
                  }
                }
              }
            }
            {tag_add player}
          }
          {"delay"
            {time 0.2}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {zone
                    {zone "global"}
                  }
                }
                {include
                  {prop
                    {prop tank}
                  }
                  {state
                    {state "inhabited user_control"}
                  }
                }
                {exclude
                  {tag
                    {tag player_armor}
                  }
                }
              }
            }
            {tag_add player_armor}
          }
          {"delay"
            {time 0.2}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {zone
                    {zone "global"}
                  }
                }
                {include
                  {prop
                    {prop car}
                  }
                  {state
                    {state "inhabited user_control"}
                  }
                }
                {exclude
                  {tag
                    {tag player_car}
                  }
                }
              }
            }
            {tag_add player_car}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {zone
                    {zone "global"}
                  }
                }
                {include
                  {prop
                    {prop vehicle}
                  }
                  {state
                    {state "inhabited user_control"}
                  }
                }
                {exclude
                  {tag
                    {tag player_veh}
                  }
                  {tag
                    {tag player_armor}
                  }
                  {tag
                    {tag player_car}
                  }
                  {tag
                    {tag engine_count_1}
                  }
                  {tag
                    {tag engine_count_2}
                  }
                }
              }
            }
            {tag_add player_veh}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {zone
                    {zone "global"}
                  }
                }
                {include
                  {state
                    {state "operatable user_control"}
                  }
                }
                {exclude
                  {tag
                    {tag _user}
                  }
                }
              }
            }
            {tag_add _user}
          }
          {"delay"
            {time 10}
          }
          {"trigger"
            {name "players_units"}
          }
        }
      }
      {"ai/ai_untow"
        {condition
          {type 1}
          {terms
            {"1.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot_tow}
                    }
                  }
                  {include
                    {prop
                      {prop vehicle}
                    }
                    {state
                      {state operatable}
                    }
                    {state
                      {state linked}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 200}
              }
              {tag
                {"tag pair"}
                {"for selector" tow_act}
              }
            }
            {"2.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot_tow}
                    }
                  }
                  {include
                    {prop
                      {prop vehicle}
                    }
                    {state
                      {state operatable}
                    }
                    {state
                      {state linked}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 200}
              }
              {tag
                {"tag pair"}
                {"for selector" tow_act}
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"linker"
            {selector
              {type vehicle}
            }
            {action unlink}
            {entities
              {ignore_captured_by_user 0}
              {tag tow_act}
            }
          }
          {"delay"
            {time 0.2}
          }
          {"entity_state"
            {selector
              {source advanced}
              {group
                {select
                  {tag
                    {tag bot_car}
                  }
                  {tag
                    {tag bot_tank}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {tag
                    {tag bot_towing}
                  }
                  {state
                    {state user_control}
                  }
                }
              }
              {sort
                {type entity}
                {entity
                  {ignore_captured_by_user 0}
                  {tag tow_act}
                }
              }
              {amount 1
              }
            }
            {tag_add bot_towing}
          }
          {"delay"
            {time 0.2}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag bot_towing}
              {state operatable}
            }
            {tag_add _lua_mi}
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type near}
                {units
                  {ignore_captured_by_user 0}
                  {tag bot_towing}
                }
                {near_to
                  {ignore_captured_by_user 0}
                  {tag tow_act}
                }
                {distance 22}
              }
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag bot_towing}
                          }
                        }
                        {include
                          {prop
                            {prop car}
                          }
                          {state
                            {state inhabited}
                          }
                        }
                        {exclude
                          {state
                            {state moveable}
                          }
                          {state
                            {state user_control}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"emit"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag bot_towing}
                      {type vehicle}
                      {state inhabited}
                    }
                    {drop orders}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag bot_towing}
                          }
                        }
                        {include
                          {prop
                            {prop vehicle}
                          }
                          {state
                            {state "operatable moveable"}
                          }
                        }
                        {exclude
                          {state
                            {state user_control}
                          }
                        }
                      }
                    }
                    {drop orders}
                    {action move}
                    {target
                      {ignore_captured_by_user 0}
                      {tag flag}
                      {zone "global"}
                    }
                  }
                  {"delay"
                    {time 5}
                  }
                  {"if"
                    {condition
                      {type entities}
                      {selector
                        {source advanced}
                        {ignore_captured_by_user 0}
                        {group
                          {select
                            {tag
                              {tag bot_towing}
                            }
                          }
                          {include
                            {prop
                              {prop car}
                            }
                            {state
                              {state inhabited}
                            }
                          }
                          {exclude
                            {state
                              {state user_control}
                            }
                          }
                        }
                      }
                    }
                    {"delay"
                      {time 0.1}
                    }
                    {"emit"
                      {selector
                        {tag bot_towing}
                        {type vehicle}
                        {state operatable}
                      }
                      {drop orders}
                    }
                  }
                }
              }
            }
            {"default"}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag bot_tow}
                  }
                }
                {include
                  {tag
                    {tag tow_act}
                  }
                }
              }
            }
            {tag_remove bot_tow}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag tow_act}
            }
            {tag_remove tow_act}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag bot_towing}
            }
            {tag_remove _lua_mi}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag bot_towing}
            }
            {tag_remove bot_towing}
          }
          {"delay"
            {time 8}
          }
          {"trigger"
            {name "ai/ai_untow"}
          }
        }
      }
      {"ai/ai_unhold"
        {condition
          {type 1}
          {terms
            {"1.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _bot}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag repairing}
                    }
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag _lua_alert}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 60}
              }
              {detection located}
              {tag
                {"tag pair"}
                {"for selector" unhold_iq}
                {"for enemy" enemy_near_iq}
              }
            }
            {"2.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _bot}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag repairing}
                    }
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag _lua_alert}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 60}
              }
              {detection located}
              {tag
                {"tag pair"}
                {"for selector" unhold_iq}
                {"for enemy" enemy_near_iq}
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag unhold_iq}
              {state operatable}
            }
            {tag_add _lua_mi}
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag unhold_iq}
                      }
                    }
                    {include
                      {tag
                        {tag bot}
                      }
                    }
                  }
                }
              }
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.4}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {drop orders}
                    {fire_mode open}
                    {move_mode free}
                    {weapon_prepare on}
                    {movement
                      {speed assault}
                    }
                    {ai
                      {advance_ratio "0.1"}
                    }
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.4}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {drop orders}
                    {fire_mode open}
                    {move_mode free}
                    {weapon_prepare on}
                    {movement
                      {type crawl}
                    }
                    {ai
                      {advance_ratio "0.05"}
                    }
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {drop orders}
                    {fire_mode open}
                    {move_mode free}
                    {weapon_prepare on}
                    {movement
                      {speed sneak}
                    }
                    {ai
                      {advance_ratio "0.1"}
                    }
                  }
                }
              }
            }
            {"case"
              {condition
                {type entities}
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag unhold_iq}
                      }
                    }
                    {include
                      {prop
                        {prop vehicle}
                      }
                    }
                    {exclude
                      {tag
                        {tag bot_veh}
                      }
                    }
                  }
                }
              }
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {tag unhold_iq}
                  {type vehicle}
                  {state operatable}
                }
                {drop orders}
                {fire_mode open}
                {ai_move
                  {mode enable}
                }
                {movement
                  {forward off}
                  {backward off}
                }
              }
              {"delay"
                {time 1}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.5}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {fire_mode open}
                    {move_mode free}
                    {ai_move
                      {mode enable}
                    }
                    {movement
                      {speed slow}
                      {forward on}
                      {backward on}
                    }
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.5}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {fire_mode open}
                    {move_mode free}
                    {ai_move
                      {mode enable}
                    }
                    {movement
                      {speed fast}
                      {forward on}
                      {backward on}
                    }
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {fire_mode open}
                    {move_mode free}
                    {weapon_prepare on}
                    {ai_move
                      {mode enable}
                    }
                    {movement
                      {speed normal}
                      {forward on}
                      {backward on}
                    }
                  }
                }
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {group
                    {select
                      {tag
                        {tag unhold_iq}
                      }
                    }
                    {include
                      {tag
                        {tag bot_veh}
                      }
                      {state
                        {state operatable}
                      }
                    }
                  }
                }
                {drop orders}
                {fire_mode open}
                {move_mode free}
                {ai_move
                  {mode enable}
                }
                {cannon fire}
              }
              {"delay"
                {time 1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag unhold_iq}
                      }
                    }
                    {include
                      {tag
                        {tag bot_veh}
                      }
                    }
                  }
                }
                {tag_add _mi_temp2}
                {tag_remove unhold_iq}
              }
            }
          }
          {"delay"
            {time 0.1}
          }
          {"delay"
            {time 5}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {ignore_captured_by_user 0}
                  {tag unhold_iq}
                  {type vehicle}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action rotate}
                    {target
                      {ignore_captured_by_user 0}
                      {tag enemy_near_iq}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action move}
                    {target
                      {ignore_captured_by_user 0}
                      {tag enemy_near_iq}
                    }
                  }
                  {"delay"
                    {time 5}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action rotate}
                    {target
                      {ignore_captured_by_user 0}
                      {tag enemy_near_iq}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action advance}
                    {target
                      {ignore_captured_by_user 0}
                      {tag enemy_near_iq}
                    }
                  }
                  {"delay"
                    {time 8}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action advance}
                    {target
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {zone
                            {zone "global"}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {state
                            {state inactive}
                          }
                        }
                      }
                      {sort
                        {type entity}
                        {entity
                          {ignore_captured_by_user 0}
                          {tag enemy_near_iq}
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 6}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action rotate}
                    {target
                      {ignore_captured_by_user 0}
                      {tag enemy_near_iq}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action attack}
                    {target
                      {ignore_captured_by_user 0}
                      {tag enemy_near_iq}
                    }
                  }
                  {"delay"
                    {time 8}
                  }
                }
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action move}
                    {target
                      {ignore_captured_by_user 0}
                      {tag enemy_near_iq}
                    }
                  }
                  {"delay"
                    {time 4}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action advance}
                    {target
                      {ignore_captured_by_user 0}
                      {tag enemy_near_iq}
                    }
                  }
                  {"delay"
                    {time 5}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action advance}
                    {target
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {zone
                            {zone "global"}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {state
                            {state inactive}
                          }
                        }
                      }
                      {sort
                        {type entity}
                        {entity
                          {ignore_captured_by_user 0}
                          {tag enemy_near_iq}
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 6}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action attack}
                    {target
                      {ignore_captured_by_user 0}
                      {tag enemy_near_iq}
                    }
                  }
                  {"delay"
                    {time 8}
                  }
                }
              }
            }
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type see_enemy}
                {selector
                  {ignore_captured_by_user 0}
                  {tag unhold_iq}
                }
              }
              {"delay"
                {time 0.1}
              }
            }
            {"default"
              {"delay"
                {time 5}
              }
            }
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {ignore_captured_by_user 0}
                  {tag unhold_iq}
                  {type vehicle}
                  {state operatable}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {tag unhold_iq}
                  {state operatable}
                }
                {movement
                  {forward off}
                  {backward off}
                }
              }
              {"delay"
                {time 2}
              }
              {"actor_state"
                {selector
                  {tag unhold_iq}
                  {state operatable}
                }
                {fire_mode open}
                {move_mode free}
                {ai_move
                  {mode enable}
                }
                {movement
                  {speed slow}
                  {forward on}
                  {backward on}
                }
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.5}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_to_cover"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {mode random}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {fire_mode open}
                    {move_mode free}
                    {ai_move
                      {mode enable}
                    }
                    {ai
                      {advance_ratio 1}
                    }
                  }
                }
              }
            }
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag unhold_iq}
                      }
                    }
                    {include
                      {team
                        {team a}
                      }
                    }
                  }
                }
              }
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag bot}
                      }
                    }
                    {include
                      {prop
                        {prop human}
                      }
                      {state
                        {state operatable}
                      }
                      {team
                        {team a}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                  {amount 4
                  }
                  {sort
                    {type entity}
                    {entity
                      {ignore_captured_by_user 0}
                      {tag unhold_iq}
                    }
                  }
                }
                {drop orders}
                {move_mode free}
                {ai_move
                  {mode enable}
                }
                {ai
                  {advance_ratio 1}
                }
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag bot}
                      }
                    }
                    {include
                      {prop
                        {prop human}
                      }
                      {state
                        {state operatable}
                      }
                      {team
                        {team b}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                  {amount 4
                  }
                  {sort
                    {type entity}
                    {entity
                      {ignore_captured_by_user 0}
                      {tag unhold_iq}
                    }
                  }
                }
                {drop orders}
                {move_mode free}
                {ai_move
                  {mode enable}
                }
                {ai
                  {advance_ratio 1}
                }
              }
            }
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag unhold_iq}
            }
            {tag_add _mi_temp2}
            {tag_remove unhold_iq}
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type cmp_i}
                {var "players:composition@"}
                {op "=="}
                {value 8}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag enemy_near_iq}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                      {state
                        {state user_control}
                      }
                    }
                  }
                }
                {tag_add noted_by_ai}
              }
            }
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag enemy_near_iq}
            }
            {tag_remove enemy_near_iq}
          }
          {"delay"
            {time 20}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _mi_temp2}
            }
            {tag_remove _lua_mi}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _mi_temp2}
            }
            {tag_remove _mi_temp2}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "ai/ai_unhold"}
          }
        }
      }
      {"ai/tank_alt_fight"
        {condition
          {type 1}
          {terms
            {"1.see_actors"
              {selector
                {source advanced}
                {group
                  {select
                    {tag
                      {tag bot_tank}
                    }
                    {tag
                      {tag bot_car}
                    }
                  }
                  {include
                    {prop
                      {prop vehicle}
                    }
                    {state
                      {state "moveable inhabited"}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag engine_count_1}
                    }
                    {tag
                      {tag engine_count_2}
                    }
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 180}
              }
              {tag
                {"tag pair"}
                {"for selector" e_tank_alt_a}
                {"for enemy" p_tank_target}
              }
            }
            {"2.see_actors"
              {selector
                {source advanced}
                {group
                  {select
                    {tag
                      {tag bot_tank}
                    }
                    {tag
                      {tag bot_car}
                    }
                  }
                  {include
                    {prop
                      {prop vehicle}
                    }
                    {state
                      {state "moveable inhabited"}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag engine_count_1}
                    }
                    {tag
                      {tag engine_count_2}
                    }
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 180}
              }
              {tag
                {"tag pair"}
                {"for selector" e_tank_alt_b}
                {"for enemy" p_tank_target}
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"actor_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag e_tank_alt_a}
                  }
                  {tag
                    {tag e_tank_alt_b}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {state
                    {state user_control}
                  }
                }
              }
            }
            {drop orders}
            {fire_mode open}
            {ai_move
              {mode enable}
            }
            {movement
              {forward off}
              {backward off}
            }
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type cmp_i}
                {var "ai_on$"}
                {op "<<"}
                {value 1}
              }
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag e_tank_alt_a}
                }
                {tag_remove e_tank_alt_a}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag e_tank_alt_b}
                }
                {tag_remove e_tank_alt_b}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag p_tank_target}
                }
                {tag_remove p_tank_target}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {ignore_captured_by_user 0}
                      {tag e_tank_alt_a}
                      {zone "global"}
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag e_tank_alt_a}
                    }
                    {tag_add e_tank_alt}
                    {tag_remove e_tank_alt_a}
                  }
                  {"delay"
                    {time 0.4}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {group
                        {select
                          {tag
                            {tag bot}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {team
                            {team a}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {amount 5
                      }
                      {sort
                        {type entity}
                        {entity
                          {ignore_captured_by_user 0}
                          {tag e_tank_alt}
                        }
                      }
                    }
                    {tag_add temp2}
                  }
                  {"delay"
                    {time 0.1}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag e_tank_alt_b}
                    }
                    {tag_add e_tank_alt}
                    {tag_remove e_tank_alt_b}
                  }
                  {"delay"
                    {time 0.4}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag bot}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {team
                            {team b}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {amount 5
                      }
                      {sort
                        {type entity}
                        {entity
                          {ignore_captured_by_user 0}
                          {tag e_tank_alt}
                        }
                      }
                    }
                    {tag_add temp2}
                  }
                  {"delay"
                    {time 0.1}
                  }
                }
              }
              {"delay"
                {time 0.3}
              }
              {"while"
                {condition
                  {type near}
                  {units
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag temp2}
                        }
                      }
                      {include
                        {prop
                          {prop human}
                        }
                        {state
                          {state operatable}
                        }
                      }
                      {exclude
                        {tag
                          {tag e_tank_alt}
                        }
                      }
                    }
                  }
                  {near_to
                    {ignore_captured_by_user 0}
                    {tag e_tank_alt}
                  }
                  {distance 100}
                }
                {"delay"
                  {time 0.1}
                }
                {"entity_state"
                  {selector
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag temp2}
                        }
                      }
                      {include
                        {prop
                          {prop human}
                        }
                        {state
                          {state operatable}
                        }
                      }
                      {exclude
                        {tag
                          {tag e_tank_alt}
                        }
                      }
                    }
                    {sort
                      {type entity}
                      {entity
                        {ignore_captured_by_user 0}
                        {tag e_tank_alt}
                      }
                    }
                    {amount 1
                    }
                  }
                  {tag_add e_tank_alt}
                  {tag_remove temp2}
                }
                {"delay"
                  {time 0.1}
                }
              }
              {"delay"
                {time 0.3}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag e_tank_alt}
                  {state operatable}
                }
                {tag_add _lua_mi}
              }
              {"actor_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag e_tank_alt}
                  {type human}
                  {state operatable}
                }
                {drop orders}
                {fire_mode open}
                {move_mode free}
                {ai_move
                  {mode enable}
                }
                {ai
                  {advance_ratio "0.1"}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag e_tank_alt}
                  {type vehicle}
                  {state operatable}
                }
                {drop orders}
                {fire_mode open}
                {move_mode free}
                {ai_move
                  {mode enable}
                }
                {movement
                  {speed fast}
                  {forward on}
                  {backward on}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"squad_create"
                {selector
                  {ignore_captured_by_user 0}
                  {tag e_tank_alt}
                  {zone "global"}
                  {state operatable}
                }
                {name e_tank_squad}
              }
              {"delay"
                {time 0.3}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.5}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {tag e_tank_alt}
                      {zone "global"}
                      {type vehicle}
                      {state inhabited}
                    }
                    {drop orders}
                    {action rotate}
                    {target
                      {ignore_captured_by_user 0}
                      {tag p_tank_target}
                      {zone "global"}
                    }
                  }
                  {"delay"
                    {time 5}
                  }
                  {"actor_state"
                    {selector
                      {tag e_tank_alt}
                      {zone "global"}
                      {type vehicle}
                      {state inhabited}
                    }
                    {fire_mode open}
                    {ai_move
                      {mode enable}
                    }
                    {movement
                      {forward on}
                      {backward on}
                    }
                  }
                  {"delay"
                    {time 0.25}
                  }
                  {"action"
                    {selector
                      {tag e_tank_alt}
                      {zone "global"}
                      {type vehicle}
                      {state inhabited}
                    }
                    {action attack}
                    {target
                      {ignore_captured_by_user 0}
                      {tag p_tank_target}
                      {zone "global"}
                    }
                  }
                }
                {"default"
                  {"delay"
                    {time 0.25}
                  }
                  {"action"
                    {selector
                      {tag e_tank_alt}
                      {zone "global"}
                      {type vehicle}
                      {state inhabited}
                    }
                    {drop orders}
                    {action rotate}
                    {target
                      {ignore_captured_by_user 0}
                      {tag p_tank_target}
                      {zone "global"}
                    }
                  }
                  {"delay"
                    {time 5}
                  }
                  {"actor_state"
                    {selector
                      {tag e_tank_alt}
                      {zone "global"}
                      {type vehicle}
                      {state inhabited}
                    }
                    {fire_mode open}
                    {weapon_prepare on}
                    {ai_move
                      {mode enable}
                    }
                    {movement
                      {speed fast}
                      {forward on}
                      {backward off}
                    }
                  }
                  {"delay"
                    {time 0.25}
                  }
                  {"action"
                    {selector
                      {tag e_tank_alt}
                      {zone "global"}
                      {type vehicle}
                      {state inhabited}
                    }
                    {drop orders}
                    {action move}
                    {target
                      {ignore_captured_by_user 0}
                      {tag p_tank_target}
                      {zone "global"}
                    }
                  }
                  {"delay"
                    {time 8}
                  }
                  {"actor_state"
                    {selector
                      {tag e_tank_alt}
                      {zone "global"}
                      {type vehicle}
                      {state inhabited}
                    }
                    {fire_mode open}
                    {move_mode free}
                    {weapon_prepare on}
                    {ai_move
                      {mode enable}
                    }
                    {movement
                      {speed normal}
                      {forward on}
                      {backward on}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                  {"action"
                    {selector
                      {tag e_tank_alt}
                      {zone "global"}
                      {type vehicle}
                      {state inhabited}
                    }
                    {action attack}
                    {target
                      {ignore_captured_by_user 0}
                      {tag p_tank_target}
                      {zone "global"}
                    }
                  }
                }
              }
              {"delay"
                {time 1}
              }
              {"switch"
                {"case"
                  {condition
                    {type near}
                    {units
                      {tag e_tank_alt}
                      {type vehicle}
                      {state operatable}
                    }
                    {near_to
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag flag}
                          }
                        }
                        {exclude
                          {state
                            {state inactive}
                          }
                        }
                      }
                    }
                    {distance 100}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"effect"
                    {selector
                      {tag e_tank_alt}
                      {type vehicle}
                      {state operatable}
                    }
                    {effect smoke_screen}
                  }
                }
                {"default"}
              }
              {"delay"
                {time 30}
              }
              {"squad_dismiss"
                {squad e_tank_squad}
              }
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag e_tank_alt}
                  {zone "global"}
                  {type vehicle}
                }
                {movement
                  {speed normal}
                  {forward on}
                  {backward on}
                }
              }
              {"delay"
                {time 0.5}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "players:composition@"}
                    {op "=="}
                    {value 8}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag p_tank_target}
                          }
                        }
                        {include
                          {state
                            {state "operatable user_control"}
                          }
                        }
                      }
                    }
                    {tag_add noted_by_ai}
                  }
                }
              }
              {"delay"
                {time 1}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag e_tank_alt}
                }
                {tag_add _mi_temp5}
                {tag_remove e_tank_alt}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag p_tank_target}
                }
                {tag_remove p_tank_target}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag temp2}
                }
                {tag_remove temp2}
              }
              {"delay"
                {time 30}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag _mi_temp5}
                }
                {tag_remove _lua_mi}
              }
              {"delay"
                {time 1}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag _mi_temp5}
                }
                {tag_remove _mi_temp5}
              }
              {"delay"
                {time 0.1}
              }
              {"trigger"
                {name "ai/tank_alt_fight"}
              }
            }
          }
        }
      }
      {"ai/bail_portables"
        {condition
          {type 1}
          {terms
            {"1.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot_veh}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {state
                      {state linked}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {prop
                      {prop human}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 33}
              }
              {tag
                {"tag pair"}
                {"for selector" bail_veh}
                {"for enemy" bail_target}
              }
            }
            {"2.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot_veh}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {state
                      {state linked}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {prop
                      {prop human}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 33}
              }
              {tag
                {"tag pair"}
                {"for selector" bail_veh}
                {"for enemy" bail_target}
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"emit"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag bail_veh}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {state
                    {state user_control}
                  }
                }
              }
            }
            {drop orders}
            {emit
              {count 1}
            }
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag bail_target}
              {state operatable}
            }
            {tag_add noted_by_ai}
            {tag_remove bail_target}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag bail_veh}
            }
            {tag_remove bail_veh}
          }
          {"delay"
            {time 5}
          }
          {"trigger"
            {name "ai/bail_portables"}
          }
        }
      }
      {"ai/recrew_portables"
        {condition
          {type 1}
          {terms
            {"1.see_actors"
              {selector
                {source advanced}
                {group
                  {select
                    {tag
                      {tag bot}
                    }
                  }
                  {include
                    {prop
                      {prop human}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag repairing}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot_veh}
                    }
                    {tag
                      {tag player_veh}
                    }
                  }
                  {include
                    {prop
                      {prop vehicle}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag destroyed}
                    }
                    {tag
                      {tag "_no-recrew"}
                    }
                    {state
                      {state inhabited}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 48}
              }
              {tag
                {"tag pair"}
                {"for selector" ecrew_a}
                {"for enemy" ecannon_enter}
              }
            }
            {"2.see_actors"
              {selector
                {source advanced}
                {group
                  {select
                    {tag
                      {tag bot}
                    }
                  }
                  {include
                    {prop
                      {prop human}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag repairing}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot_veh}
                    }
                    {tag
                      {tag player_veh}
                    }
                  }
                  {include
                    {prop
                      {prop vehicle}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag destroyed}
                    }
                    {tag
                      {tag "_no-recrew"}
                    }
                    {state
                      {state inhabited}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 48}
              }
              {tag
                {"tag pair"}
                {"for selector" ecrew_b}
                {"for enemy" ecannon_enter}
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type see_actors}
                {selector
                  {tag ecrew_a}
                  {zone "global"}
                  {type human}
                  {state "not dead"}
                }
                {enemy
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {zone
                        {zone "global"}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                      {team
                        {team b}
                      }
                    }
                    {exclude
                      {state
                        {state inactive}
                      }
                    }
                  }
                }
                {distance
                  {mode near_than}
                  {meters 45}
                }
                {detection visible}
              }
              {"delay"
                {time 5}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ecrew_a}
                }
                {tag_remove ecrew_a}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ecrew_b}
                }
                {tag_remove ecrew_b}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ecannon_enter}
                }
                {tag_remove ecannon_enter}
              }
              {"delay"
                {time 20}
              }
            }
            {"case"
              {condition
                {type see_actors}
                {selector
                  {tag ecrew_b}
                  {zone "global"}
                  {type human}
                  {state "not dead"}
                }
                {enemy
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {zone
                        {zone "global"}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                      {team
                        {team a}
                      }
                    }
                    {exclude
                      {state
                        {state inactive}
                      }
                    }
                  }
                }
                {distance
                  {mode near_than}
                  {meters 45}
                }
                {detection visible}
              }
              {"delay"
                {time 5}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ecrew_a}
                }
                {tag_remove ecrew_a}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ecrew_b}
                }
                {tag_remove ecrew_b}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ecannon_enter}
                }
                {tag_remove ecannon_enter}
              }
              {"delay"
                {time 20}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ecrew_a}
                      {zone "global"}
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ecrew_a}
                    }
                    {tag_add ecrew}
                    {tag_remove ecrew_a}
                  }
                  {"delay"
                    {time 0.4}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag bot}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {team
                            {team a}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {tag
                            {tag ecrew}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {amount 2
                      }
                      {sort
                        {type entity}
                        {entity
                          {tag ecrew}
                        }
                      }
                    }
                    {tag_add temp1}
                  }
                  {"delay"
                    {time 0.1}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ecrew_b}
                    }
                    {tag_add ecrew}
                    {tag_remove ecrew_b}
                  }
                  {"delay"
                    {time 0.4}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag bot}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {team
                            {team b}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {tag
                            {tag ecrew}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {amount 2
                      }
                      {sort
                        {type entity}
                        {entity
                          {tag ecrew}
                        }
                      }
                    }
                    {tag_add temp1}
                  }
                  {"delay"
                    {time 0.1}
                  }
                }
              }
              {"delay"
                {time 0.2}
              }
              {"while"
                {condition
                  {type near}
                  {units
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag temp1}
                        }
                      }
                      {include
                        {prop
                          {prop human}
                        }
                        {state
                          {state operatable}
                        }
                      }
                      {exclude
                        {tag
                          {tag ecrew}
                        }
                        {state
                          {state inactive}
                        }
                        {state
                          {state linked}
                        }
                      }
                    }
                  }
                  {near_to
                    {ignore_captured_by_user 0}
                    {tag ecannon_enter}
                  }
                  {distance 110}
                }
                {"delay"
                  {time 0.1}
                }
                {"entity_state"
                  {selector
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag temp1}
                        }
                      }
                      {include
                        {prop
                          {prop human}
                        }
                        {state
                          {state operatable}
                        }
                      }
                      {exclude
                        {tag
                          {tag ecrew}
                        }
                        {state
                          {state inactive}
                        }
                        {state
                          {state linked}
                        }
                      }
                    }
                    {sort
                      {type entity}
                      {entity
                        {ignore_captured_by_user 0}
                        {tag ecannon_enter}
                      }
                    }
                    {amount 1
                    }
                  }
                  {tag_add ecrew}
                  {tag_remove temp1}
                }
                {"delay"
                  {time 0.1}
                }
              }
              {"delay"
                {time 0.3}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ecrew}
                  {state operatable}
                }
                {tag_add _lua_mi}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag ecrew}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                }
                {drop orders}
                {fire_mode open}
                {move_mode free}
                {movement
                  {speed assault}
                }
              }
              {"delay"
                {time 0.3}
              }
              {"action"
                {selector
                  {source advanced}
                  {group
                    {select
                      {tag
                        {tag ecrew}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                }
                {drop orders}
                {action move}
                {target
                  {ignore_captured_by_user 0}
                  {tag ecannon_enter}
                }
              }
              {"delay"
                {time 5}
              }
              {"switch"
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag ecannon_enter}
                          }
                        }
                        {include
                          {prop
                            {prop vehicle}
                          }
                        }
                        {exclude
                          {tag
                            {tag destroyed}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"board"
                    {selector
                      {source advanced}
                      {group
                        {select
                          {tag
                            {tag ecrew}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {tag
                            {tag repairing}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                    }
                    {vehicle
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag ecannon_enter}
                          }
                        }
                        {include
                          {prop
                            {prop vehicle}
                          }
                        }
                        {exclude
                          {tag
                            {tag destroyed}
                          }
                        }
                      }
                    }
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag ecrew}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {tag
                            {tag repairing}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                    }
                    {drop orders}
                    {fire_mode open}
                    {move_mode free}
                    {ai_move
                      {mode enable}
                    }
                  }
                }
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ecrew}
                  {state operatable}
                }
                {tag_add _mi_temp4}
              }
              {"delay"
                {time 20}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag ecrew}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                }
                {tag_remove ecrew}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ecannon_enter}
                }
                {tag_remove ecannon_enter}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag temp1}
                }
                {tag_remove temp1}
              }
              {"delay"
                {time 20}
              }
            }
          }
          {"delay"
            {time 30}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _mi_temp4}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {tag
                    {tag repairing}
                  }
                  {state
                    {state inactive}
                  }
                  {state
                    {state linked}
                  }
                }
              }
            }
            {tag_remove _lua_mi}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _mi_temp4}
            }
            {tag_remove _mi_temp4}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "ai/recrew_portables"}
          }
        }
      }
      {"ai/ai_flag_smoke"
        {condition
          {type 1}
          {terms
            {"1.see_actors"
              {selector
                {source advanced}
                {group
                  {select
                    {tag
                      {tag smk_}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag repairing}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _user}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 95}
              }
              {tag
                {"tag pair"}
                {"for selector" ai_smoke}
                {"for enemy" smk_target}
              }
            }
            {"2.see_actors"
              {selector
                {source advanced}
                {group
                  {select
                    {tag
                      {tag smk_}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag repairing}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _user}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 95}
              }
              {tag
                {"tag pair"}
                {"for selector" ai_smoke}
                {"for enemy" smk_target}
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type near}
                {units
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag smk_target}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                    }
                  }
                }
                {near_to
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag flag}
                      }
                    }
                    {exclude
                      {state
                        {state inactive}
                      }
                    }
                  }
                }
                {distance 150}
              }
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag ai_smoke}
                          }
                        }
                        {include
                          {with_item
                            {type amount}
                            {item "nbk39" "grenade"}
                            {min 1}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {group
                        {select
                          {tag
                            {tag smk_}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {with_item
                            {type amount}
                            {item "nbk39" "grenade"}
                            {min 1}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {tag
                            {tag ai_smoke}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {sort
                        {type entity}
                        {entity
                          {tag ai_smoke}
                        }
                      }
                      {amount 2
                      }
                    }
                    {tag_add ai_smoke}
                  }
                  {"delay"
                    {time 0.3}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {state operatable}
                    }
                    {tag_add _mi_temp1}
                  }
                  {"delay"
                    {time 0.2}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _mi_temp1}
                    }
                    {tag_add _lua_mi}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"inventory"
                    {selector
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {action take}
                    {item "nbk39" "grenade"}
                  }
                  {"delay"
                    {time 0.5}
                  }
                  {"action"
                    {selector
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {drop "orders sensor senseless"}
                    {action attack_ground}
                    {target
                      {ignore_captured_by_user 0}
                      {tag null}
                    }
                  }
                  {"delay"
                    {time 4}
                  }
                  {"action"
                    {selector
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {drop orders}
                    {action advance}
                    {target
                      {ignore_captured_by_user 0}
                      {tag smk_target}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                }
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag ai_smoke}
                          }
                        }
                        {include
                          {with_item
                            {type amount}
                            {item "rdg1_smoke" "grenade"}
                            {min 1}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {group
                        {select
                          {tag
                            {tag smk_}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {with_item
                            {type amount}
                            {item "rdg1_smoke" "grenade"}
                            {min 1}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {tag
                            {tag ai_smoke}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {sort
                        {type entity}
                        {entity
                          {tag ai_smoke}
                        }
                      }
                      {amount 2
                      }
                    }
                    {tag_add ai_smoke}
                  }
                  {"delay"
                    {time 0.3}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {state operatable}
                    }
                    {tag_add _mi_temp1}
                  }
                  {"delay"
                    {time 0.2}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _mi_temp1}
                    }
                    {tag_add _lua_mi}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"inventory"
                    {selector
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {action take}
                    {item "rdg1_smoke" "grenade"}
                  }
                  {"delay"
                    {time 0.5}
                  }
                  {"action"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {drop "orders sensor senseless"}
                    {action attack_ground}
                    {target
                      {ignore_captured_by_user 0}
                      {tag null}
                    }
                  }
                  {"delay"
                    {time 4}
                  }
                  {"action"
                    {selector
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {drop orders}
                    {action advance}
                    {target
                      {ignore_captured_by_user 0}
                      {tag smk_target}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                }
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag ai_smoke}
                          }
                        }
                        {include
                          {with_item
                            {type amount}
                            {item "m24_smoke" "grenade"}
                            {min 1}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {group
                        {select
                          {tag
                            {tag smk_}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {with_item
                            {type amount}
                            {item "m24_smoke" "grenade"}
                            {min 1}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {tag
                            {tag ai_smoke}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {sort
                        {type entity}
                        {entity
                          {tag ai_smoke}
                        }
                      }
                      {amount 2
                      }
                    }
                    {tag_add ai_smoke}
                  }
                  {"delay"
                    {time 0.3}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {state operatable}
                    }
                    {tag_add _mi_temp1}
                  }
                  {"delay"
                    {time 0.2}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _mi_temp1}
                    }
                    {tag_add _lua_mi}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"inventory"
                    {selector
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {action take}
                    {item "m24_smoke" "grenade"}
                  }
                  {"delay"
                    {time 0.5}
                  }
                  {"action"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {drop "orders sensor senseless"}
                    {action attack_ground}
                    {target
                      {ignore_captured_by_user 0}
                      {tag null}
                    }
                  }
                  {"delay"
                    {time 4}
                  }
                  {"action"
                    {selector
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {drop orders}
                    {action advance}
                    {target
                      {ignore_captured_by_user 0}
                      {tag smk_target}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                }
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag ai_smoke}
                          }
                        }
                        {include
                          {with_item
                            {type amount}
                            {item "m43_smoke" "grenade"}
                            {min 1}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {group
                        {select
                          {tag
                            {tag smk_}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {with_item
                            {type amount}
                            {item "m43_smoke" "grenade"}
                            {min 1}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {tag
                            {tag ai_smoke}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {sort
                        {type entity}
                        {entity
                          {tag ai_smoke}
                        }
                      }
                      {amount 2
                      }
                    }
                    {tag_add ai_smoke}
                  }
                  {"delay"
                    {time 0.3}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {state operatable}
                    }
                    {tag_add _mi_temp1}
                  }
                  {"delay"
                    {time 0.2}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _mi_temp1}
                    }
                    {tag_add _lua_mi}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"inventory"
                    {selector
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {action take}
                    {item "m43_smoke" "grenade"}
                  }
                  {"delay"
                    {time 0.5}
                  }
                  {"action"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {drop "orders sensor senseless"}
                    {action attack_ground}
                    {target
                      {ignore_captured_by_user 0}
                      {tag null}
                    }
                  }
                  {"delay"
                    {time 4}
                  }
                  {"action"
                    {selector
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {drop orders}
                    {action advance}
                    {target
                      {ignore_captured_by_user 0}
                      {tag smk_target}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                    }
                    {tag_remove ai_smoke}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag smk_target}
                    }
                    {tag_remove smk_target}
                  }
                }
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag smk_target}
                }
                {tag_remove smk_target}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ai_smoke}
                }
                {tag_remove ai_smoke}
              }
            }
          }
          {"delay"
            {time 2}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {ignore_captured_by_user 0}
                  {tag ai_smoke}
                  {state operatable}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type see_enemy}
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {state operatable}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                  {"actor_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {state operatable}
                    }
                    {drop orders}
                    {fire_mode open}
                    {move_mode free}
                    {ai_move
                      {mode enable}
                    }
                    {ai
                      {advance_ratio "0.1"}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                  {"actor_to_cover"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {state operatable}
                    }
                  }
                }
                {"default"
                  {"delay"
                    {time 8}
                  }
                  {"actor_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {state operatable}
                    }
                    {drop orders}
                    {fire_mode open}
                    {move_mode free}
                    {ai_move
                      {mode enable}
                    }
                    {ai
                      {advance_ratio "0.5"}
                    }
                  }
                }
              }
              {"delay"
                {time 1}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag smk_target}
                }
                {tag_remove smk_target}
              }
              {"delay"
                {time 50}
              }
            }
            {"default"}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag ai_smoke}
            }
            {tag_remove ai_smoke}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _mi_temp1}
            }
            {tag_remove _lua_mi}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _mi_temp1}
            }
            {tag_remove _mi_temp1}
          }
          {"delay"
            {time 80}
          }
          {"trigger"
            {name "ai/ai_flag_smoke"}
          }
        }
      }
      {"bots_units"
        {condition
          {terms
            {"1.entities"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                  }
                  {exclude
                    {tag
                      {tag _bot}
                    }
                    {tag
                      {tag hidden}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
            }
            {"2.cmp_i"
              {var "ai_on$"}
              {op ">"}
              {value 0}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {zone
                    {zone "global"}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {tag
                    {tag _bot}
                  }
                  {tag
                    {tag _ai}
                  }
                  {tag
                    {tag hidden}
                  }
                  {state
                    {state user_control}
                  }
                }
              }
            }
            {tag_add _ai}
          }
          {"delay"
            {time 0.4}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _ai}
                  }
                }
                {include
                  {prop
                    {prop tank}
                  }
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {tag
                    {tag bot_tank}
                  }
                  {state
                    {state user_control}
                  }
                }
              }
            }
            {tag_add bot_tank}
          }
          {"delay"
            {time 0.2}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _ai}
                  }
                }
                {include
                  {prop
                    {prop car}
                  }
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {tag
                    {tag bot_car}
                  }
                  {state
                    {state user_control}
                  }
                }
              }
            }
            {tag_add bot_car}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _ai}
                  }
                }
                {include
                  {prop
                    {prop vehicle}
                  }
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {tag
                    {tag bot_tank}
                  }
                  {tag
                    {tag bot_car}
                  }
                  {tag
                    {tag bot_veh}
                  }
                  {tag
                    {tag engine_count_1}
                  }
                  {tag
                    {tag engine_count_2}
                  }
                  {state
                    {state user_control}
                  }
                }
              }
            }
            {tag_add _bot_veh}
          }
          {"delay"
            {time 0.5}
          }
          {"ables"
            {selector
              {ignore_captured_by_user 0}
              {tag _ai}
              {zone "global"}
              {type human}
              {state operatable}
            }
            {remove personage}
          }
          {"delay"
            {time 0.5}
          }
          {"ables"
            {selector
              {ignore_captured_by_user 0}
              {tag _bot_veh}
              {zone "global"}
              {type vehicle}
              {state operatable}
            }
            {add emit_on_attack}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _ai}
                  }
                }
                {include
                  {prop
                    {prop human}
                  }
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {tag
                    {tag _bot}
                  }
                }
              }
            }
            {tag_add bot}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _bot_veh}
            }
            {tag_add bot_veh}
            {tag_remove _bot_veh}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {source advanced}
              {group
                {select
                  {tag
                    {tag bot_veh}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                  {state
                    {state linked}
                  }
                }
                {exclude
                  {tag
                    {tag bot_tow}
                  }
                  {state
                    {state user_control}
                  }
                }
              }
            }
            {tag_add bot_tow}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _ai}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {tag
                    {tag _bot}
                  }
                  {state
                    {state user_control}
                  }
                }
              }
            }
            {tag_add _bot}
            {tag_remove _ai}
          }
          {"delay"
            {time 1}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {ignore_captured_by_user 0}
                  {tag smk_}
                  {zone "global"}
                  {state operatable}
                }
                {count
                  {op "<<"}
                  {value 55}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag bot}
                      }
                    }
                    {include
                      {with_item
                        {type amount}
                        {item "nbk39" "grenade"}
                        {min 1}
                      }
                    }
                    {exclude
                      {tag
                        {tag smk_}
                      }
                      {state
                        {state dead}
                      }
                    }
                  }
                  {group
                    {select
                      {tag
                        {tag bot}
                      }
                    }
                    {include
                      {with_item
                        {type amount}
                        {item "rdg1_smoke" "grenade"}
                        {min 1}
                      }
                    }
                    {exclude
                      {tag
                        {tag smk_}
                      }
                      {state
                        {state dead}
                      }
                    }
                  }
                  {group
                    {select
                      {tag
                        {tag bot}
                      }
                    }
                    {include
                      {with_item
                        {type amount}
                        {item "m24_smoke" "grenade"}
                        {min 1}
                      }
                    }
                    {exclude
                      {tag
                        {tag smk_}
                      }
                      {state
                        {state dead}
                      }
                    }
                  }
                  {group
                    {select
                      {tag
                        {tag bot}
                      }
                    }
                    {include
                      {with_item
                        {type amount}
                        {item "m43_smoke"}
                        {min 1}
                      }
                    }
                    {exclude
                      {tag
                        {tag smk_}
                      }
                      {state
                        {state dead}
                      }
                    }
                  }
                }
                {tag_add smk_}
              }
            }
            {"default"}
          }
          {"delay"
            {time 5}
          }
          {"trigger"
            {name "bots_units"}
          }
        }
      }
      {"ai/user_a_detect"
        {condition
          {terms
            {"1.cmp_i"
              {var "ai_on$"}
              {op ">"}
              {value 0}
            }
            {"2.entities"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag player}
                    }
                  }
                  {include
                    {team
                      {team a}
                    }
                  }
                }
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"set_i"
            {var "user_team$"}
            {op "+"}
            {value 1}
          }
        }
      }
      {"ai/user_b_detect"
        {condition
          {terms
            {"1.cmp_i"
              {var "ai_on$"}
              {op ">"}
              {value 0}
            }
            {"2.entities"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag player}
                    }
                  }
                  {include
                    {team
                      {team b}
                    }
                  }
                }
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"set_i"
            {var "user_team$"}
            {op "+"}
            {value 2}
          }
        }
      }
      {"ai/init"
        {condition
        }
        {actions
          {"delay"
            {time 1}
          }
          {"set_i"
            {var "error$"}
            {op "="}
            {value 0}
          }
          {"set_i"
            {var "mp$"}
            {op "="}
            {value 0}
          }
          {"set_i"
            {var "user_team$"}
            {op "="}
            {value 0}
          }
          {"set_i"
            {var "ignore_same_user$"}
            {op "="}
            {value 0}
          }
          {"delay"
            {time 4}
          }
          {"switch"
            {"case"
              {condition
                {type cmp_i}
                {var "players:composition@"}
                {op "=="}
                {value 2}
              }
              {"delay"
                {time 0.1}
              }
              {"set_i"
                {var "ai_on$"}
                {op "="}
                {value 1}
              }
              {"set_i"
                {var "mp$"}
                {op "="}
                {value 2}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "players:composition@"}
                {op "=="}
                {value 3}
              }
              {"delay"
                {time 0.1}
              }
              {"set_i"
                {var "ai_on$"}
                {op "="}
                {value 1}
              }
              {"set_i"
                {var "mp$"}
                {op "="}
                {value 3}
              }
              {"set_i"
                {var "ignore_same_user$"}
                {op "="}
                {value 1}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "players:composition@"}
                {op "=="}
                {value 5}
              }
              {"delay"
                {time 0.1}
              }
              {"set_i"
                {var "ai_on$"}
                {op "="}
                {value 2}
              }
              {"set_i"
                {var "mp$"}
                {op "="}
                {value 5}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "players:composition@"}
                {op "=="}
                {value 6}
              }
              {"delay"
                {time 0.1}
              }
              {"set_i"
                {var "ai_on$"}
                {op "="}
                {value 1}
              }
              {"set_i"
                {var "mp$"}
                {op "="}
                {value 6}
              }
              {"set_i"
                {var "ignore_same_user$"}
                {op "="}
                {value 1}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "players:composition@"}
                {op "=="}
                {value 8}
              }
              {"delay"
                {time 0.1}
              }
              {"set_i"
                {var "ai_on$"}
                {op "="}
                {value 1}
              }
              {"set_i"
                {var "mp$"}
                {op "="}
                {value 8}
              }
              {"set_i"
                {var "ignore_same_user$"}
                {op "="}
                {value 1}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
            }
          }
        }
      }
      {"ai/chance_ai_pursue"
        {condition
          {type 1}
          {terms
            {"1.near"
              {units
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot}
                    }
                  }
                  {include
                    {prop
                      {prop human}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag repairing}
                    }
                    {tag
                      {tag _lua_mi}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
              {near_to
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag noted_by_ai}
                    }
                  }
                  {include
                    {zone
                      {zone "global"}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance 80}
            }
            {"2.near"
              {units
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot}
                    }
                  }
                  {include
                    {prop
                      {prop human}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag repairing}
                    }
                    {tag
                      {tag _lua_mi}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
              {near_to
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag noted_by_ai}
                    }
                  }
                  {include
                    {zone
                      {zone "global"}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance 80}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type near}
                {units
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag bot}
                      }
                    }
                    {include
                      {prop
                        {prop human}
                      }
                      {state
                        {state operatable}
                      }
                      {team
                        {team a}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {tag
                        {tag _lua_mi}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                }
                {near_to
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag noted_by_ai}
                      }
                    }
                    {include
                      {zone
                        {zone "global"}
                      }
                      {state
                        {state operatable}
                      }
                      {team
                        {team b}
                      }
                    }
                    {exclude
                      {state
                        {state inactive}
                      }
                    }
                  }
                }
                {distance 80}
              }
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag bot}
                      }
                    }
                    {include
                      {zone
                        {zone "global"}
                      }
                      {prop
                        {prop human}
                      }
                      {state
                        {state operatable}
                      }
                      {team
                        {team a}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {tag
                        {tag _lua_mi}
                      }
                      {tag
                        {tag _lua_ignore}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                  {sort
                    {type entity}
                    {entity
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag noted_by_ai}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                          {team
                            {team b}
                          }
                        }
                        {exclude
                          {state
                            {state inactive}
                          }
                        }
                      }
                    }
                  }
                  {amount 5
                  }
                }
                {tag_add temp4}
              }
              {"delay"
                {time 0.5}
              }
              {"while"
                {condition
                  {type near}
                  {units
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag temp4}
                        }
                      }
                      {include
                        {prop
                          {prop human}
                        }
                        {state
                          {state operatable}
                        }
                      }
                      {exclude
                        {state
                          {state inactive}
                        }
                        {state
                          {state linked}
                        }
                      }
                    }
                  }
                  {near_to
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag noted_by_ai}
                        }
                      }
                      {include
                        {state
                          {state operatable}
                        }
                        {team
                          {team b}
                        }
                      }
                      {exclude
                        {state
                          {state inactive}
                        }
                      }
                    }
                  }
                  {distance 60}
                }
                {"delay"
                  {time 0.1}
                }
                {"entity_state"
                  {selector
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag temp4}
                        }
                      }
                      {include
                        {prop
                          {prop human}
                        }
                        {state
                          {state operatable}
                        }
                      }
                      {exclude
                        {state
                          {state inactive}
                        }
                        {state
                          {state linked}
                        }
                      }
                    }
                    {sort
                      {type entity}
                      {entity
                        {source advanced}
                        {ignore_captured_by_user 0}
                        {group
                          {select
                            {tag
                              {tag noted_by_ai}
                            }
                          }
                          {include
                            {state
                              {state operatable}
                            }
                            {team
                              {team b}
                            }
                          }
                          {exclude
                            {state
                              {state inactive}
                            }
                          }
                        }
                      }
                    }
                    {amount 1
                    }
                  }
                  {tag_add pursuer}
                  {tag_remove temp4}
                }
                {"delay"
                  {time 0.1}
                }
              }
              {"delay"
                {time 0.3}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag pursuer}
                  {state operatable}
                }
                {tag_add _lua_mi}
              }
              {"delay"
                {time 0.3}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag noted_by_ai}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                      {team
                        {team b}
                      }
                    }
                  }
                  {sort
                    {type entity}
                    {entity
                      {ignore_captured_by_user 0}
                      {tag pursuer}
                    }
                  }
                }
                {tag_add pursue_target}
                {tag_remove noted_by_ai}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag bot}
                      }
                    }
                    {include
                      {zone
                        {zone "global"}
                      }
                      {prop
                        {prop human}
                      }
                      {state
                        {state operatable}
                      }
                      {team
                        {team b}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {tag
                        {tag _lua_mi}
                      }
                      {tag
                        {tag _lua_ignore}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                  {sort
                    {type entity}
                    {entity
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag noted_by_ai}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                          {team
                            {team a}
                          }
                        }
                        {exclude
                          {state
                            {state inactive}
                          }
                        }
                      }
                    }
                  }
                  {amount 5
                  }
                }
                {tag_add temp4}
              }
              {"delay"
                {time 0.5}
              }
              {"while"
                {condition
                  {type near}
                  {units
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag temp4}
                        }
                      }
                      {include
                        {prop
                          {prop human}
                        }
                        {state
                          {state operatable}
                        }
                      }
                      {exclude
                        {state
                          {state inactive}
                        }
                        {state
                          {state linked}
                        }
                      }
                    }
                  }
                  {near_to
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag noted_by_ai}
                        }
                      }
                      {include
                        {state
                          {state operatable}
                        }
                        {team
                          {team a}
                        }
                      }
                      {exclude
                        {state
                          {state inactive}
                        }
                      }
                    }
                  }
                  {distance 60}
                }
                {"delay"
                  {time 0.1}
                }
                {"entity_state"
                  {selector
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag temp4}
                        }
                      }
                      {include
                        {prop
                          {prop human}
                        }
                        {state
                          {state operatable}
                        }
                      }
                      {exclude
                        {state
                          {state inactive}
                        }
                        {state
                          {state linked}
                        }
                      }
                    }
                    {sort
                      {type entity}
                      {entity
                        {source advanced}
                        {ignore_captured_by_user 0}
                        {group
                          {select
                            {tag
                              {tag noted_by_ai}
                            }
                          }
                          {include
                            {state
                              {state operatable}
                            }
                            {team
                              {team a}
                            }
                          }
                          {exclude
                            {state
                              {state inactive}
                            }
                          }
                        }
                      }
                    }
                    {amount 1
                    }
                  }
                  {tag_add pursuer}
                  {tag_remove temp4}
                }
                {"delay"
                  {time 0.1}
                }
              }
              {"delay"
                {time 0.3}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag pursuer}
                  {state operatable}
                }
                {tag_add _lua_mi}
              }
              {"delay"
                {time 0.3}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag noted_by_ai}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                      {team
                        {team a}
                      }
                    }
                  }
                  {sort
                    {type entity}
                    {entity
                      {ignore_captured_by_user 0}
                      {tag pursuer}
                    }
                  }
                }
                {tag_add pursue_target}
                {tag_remove noted_by_ai}
              }
            }
          }
          {"delay"
            {time 0.5}
          }
          {"squad_create"
            {selector
              {ignore_captured_by_user 0}
              {tag pursuer}
              {zone "global"}
              {state operatable}
            }
            {name pursuer}
          }
          {"delay"
            {time 0.1}
          }
          {"actor_state"
            {selector
              {ignore_captured_by_user 0}
              {tag pursuer}
              {zone "global"}
              {state operatable}
            }
            {drop orders}
            {move_mode free}
            {weapon_prepare on}
            {ai_move
              {mode enable}
            }
            {ai
              {advance_ratio "0.5"}
            }
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {ignore_captured_by_user 0}
                  {tag pursue_target}
                  {type vehicle}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"action"
                {selector
                  {ignore_captured_by_user 0}
                  {tag pursuer}
                  {zone "global"}
                  {state operatable}
                }
                {action attack}
                {target
                  {ignore_captured_by_user 0}
                  {tag pursue_target}
                  {zone "global"}
                }
              }
              {"delay"
                {time 4}
              }
              {"action"
                {selector
                  {ignore_captured_by_user 0}
                  {tag pursuer}
                  {zone "global"}
                  {state operatable}
                }
                {action attack}
                {target
                  {ignore_captured_by_user 0}
                  {tag pursue_target}
                  {zone "global"}
                }
              }
              {"delay"
                {time 4}
              }
            }
            {"default"
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.5}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag pursuer}
                      {zone "global"}
                      {state operatable}
                    }
                    {action advance}
                    {target
                      {ignore_captured_by_user 0}
                      {tag pursue_target}
                      {zone "global"}
                    }
                  }
                  {"delay"
                    {time 4}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag pursuer}
                      {zone "global"}
                      {state operatable}
                    }
                    {action move}
                    {target
                      {ignore_captured_by_user 0}
                      {tag pursue_target}
                      {zone "global"}
                    }
                  }
                  {"delay"
                    {time 6}
                  }
                }
              }
            }
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {ignore_captured_by_user 0}
                  {tag pursuer}
                  {zone "global"}
                  {type human}
                  {state operatable}
                }
                {count
                  {op "<<"}
                  {value 2}
                }
              }
              {"delay"
                {time 0.1}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type see_enemy}
                    {selector
                      {ignore_captured_by_user 0}
                      {tag pursuer}
                      {state operatable}
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag pursuer}
                      {state operatable}
                    }
                    {action attack}
                    {target
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag pursue_target}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 8}
                  }
                }
                {"default"
                  {"delay"
                    {time 5}
                  }
                }
              }
            }
          }
          {"delay"
            {time 0.1}
          }
          {"actor_state"
            {selector
              {ignore_captured_by_user 0}
              {tag pursuer}
              {zone "global"}
              {state operatable}
            }
            {drop orders}
            {fire_mode open}
            {move_mode free}
            {ai
              {advance_ratio 1}
            }
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type rand}
                {value 0.5}
              }
              {"delay"
                {time 25}
              }
            }
            {"default"
              {"delay"
                {time 45}
              }
            }
          }
          {"delay"
            {time 0.1}
          }
          {"squad_dismiss"
            {squad pursuer}
          }
          {"delay"
            {time 0.1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag pursue_target}
            }
            {tag_remove pursue_target}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag pursuer}
            }
            {tag_add _mi_temp3}
            {tag_remove pursuer}
          }
          {"delay"
            {time 80}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _mi_temp3}
            }
            {tag_remove _lua_mi}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _mi_temp3}
            }
            {tag_remove _mi_temp3}
          }
          {"delay"
            {time 0.5}
          }
          {"trigger"
            {name "ai/chance_ai_pursue"}
          }
        }
      }
      {"lua/clean"
        {condition
          {type 1}
          {terms
            {"1.entities"
              {selector
                {ignore_captured_by_user 0}
                {tag _lua_alert}
                {zone "global"}
                {state "not operatable"}
              }
            }
            {"2.entities"
              {selector
                {ignore_captured_by_user 0}
                {tag _lua_ignore}
                {zone "global"}
                {state "not operatable"}
              }
            }
            {"3.entities"
              {selector
                {ignore_captured_by_user 0}
                {tag smk_}
                {zone "global"}
                {state "not operatable"}
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _bot}
              {zone "global"}
              {state "not operatable"}
            }
            {tag_remove _bot}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _lua_ignore}
                  }
                }
                {exclude
                  {tag
                    {tag _bot}
                  }
                }
              }
            }
            {tag_remove _lua_ignore}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _lua_alert}
                  }
                }
                {exclude
                  {tag
                    {tag _bot}
                  }
                }
              }
            }
            {tag_remove _lua_alert}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _lua_ignore}
                  }
                }
                {exclude
                  {zone
                    {zone "global"}
                  }
                }
              }
            }
            {tag_remove _lua_ignore}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _lua_alert}
                  }
                }
                {exclude
                  {zone
                    {zone "global"}
                  }
                }
              }
            }
            {tag_remove _lua_alert}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag smk_}
                  }
                }
                {exclude
                  {tag
                    {tag _bot}
                  }
                }
              }
            }
            {tag_remove smk_}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag noted_by_ai}
              {zone "global"}
              {state "not operatable"}
            }
            {tag_remove noted_by_ai}
          }
          {"delay"
            {time 0.5}
          }
          {"switch"
            {"case"
              {condition
                {type trigger}
                {name "ai/recrew_portables"}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {group
                    {select
                      {tag
                        {tag _lua_mi}
                      }
                    }
                    {include
                      {tag
                        {tag ecrew}
                      }
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                }
                {tag_add _clean}
                {tag_remove _lua_mi}
              }
              {"delay"
                {time 0.5}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag _clean}
                }
                {tag_remove ecrew}
              }
              {"delay"
                {time 0.5}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag _clean}
                }
                {tag_remove _clean}
              }
            }
          }
          {"delay"
            {time 1}
          }
          {"switch"
            {"case"
              {condition
                {type trigger}
                {name "ai/recrew_tank"}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {group
                    {select
                      {tag
                        {tag _lua_mi}
                      }
                    }
                    {include
                      {tag
                        {tag tcrew}
                      }
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                }
                {tag_add _clean}
                {tag_remove _lua_mi}
              }
              {"delay"
                {time 0.5}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag _clean}
                }
                {tag_remove tcrew}
              }
              {"delay"
                {time 0.5}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag _clean}
                }
                {tag_remove _clean}
              }
            }
          }
          {"delay"
            {time 25}
          }
          {"trigger"
            {name "lua/clean"}
          }
        }
      }
      {"lua/ignore_seek"
        {condition
          {terms
            {"1.cmp_i"
              {var "ai_on$"}
              {op ">"}
              {value 0}
            }
            {"2.near"
              {units
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _bot}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag _lua_ignore}
                    }
                    {tag
                      {tag _lua_alert}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {near_to
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag flag}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance 61}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _bot}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {tag
                    {tag _lua_mi}
                  }
                  {tag
                    {tag _lua_ignore}
                  }
                  {tag
                    {tag _lua_alert}
                  }
                  {state
                    {state inactive}
                  }
                  {state
                    {state user_control}
                  }
                }
              }
              {amount 1
              }
              {sort
                {type entity}
                {entity
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag flag}
                      }
                    }
                  }
                  {sort
                    {type shuffle}
                  }
                }
              }
            }
            {tag_add _local1}
          }
          {"delay"
            {time 0.5}
          }
          {"switch"
            {"case"
              {condition
                {type near}
                {units
                  {ignore_captured_by_user 0}
                  {tag _local1}
                  {state operatable}
                }
                {near_to
                  {ignore_captured_by_user 0}
                  {tag flag}
                }
                {distance 60}
              }
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag _local1}
                  {state operatable}
                }
                {tag_add _lua_ignore}
              }
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {group
                    {select
                      {tag
                        {tag _local1}
                      }
                    }
                    {include
                      {prop
                        {prop human}
                      }
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                    }
                  }
                }
                {drop orders}
                {fire_mode open}
                {move_mode zone}
                {ai_move
                  {mode enable}
                }
                {movement
                  {speed assault}
                }
                {ai
                  {advance_ratio 2}
                  {retreat_ratio 5}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {group
                    {select
                      {tag
                        {tag _local1}
                      }
                    }
                    {include
                      {prop
                        {prop vehicle}
                      }
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                      {state
                        {state user_control}
                      }
                    }
                  }
                }
                {drop orders}
                {fire_mode open}
                {move_mode zone}
                {move_radius 30}
                {ai_move
                  {mode enable}
                }
                {movement
                  {speed normal}
                  {forward on}
                  {backward on}
                }
              }
            }
            {"default"}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _local1}
            }
            {tag_remove _local1}
          }
          {"delay"
            {time 15}
          }
          {"trigger"
            {name "lua/ignore_seek"}
          }
        }
      }
      {"lua/ignore_incheck"
        {condition
          {expression "(1 & 2) | (2 & 3)"}
          {terms
            {"1.entities"
              {selector
                {ignore_captured_by_user 0}
                {tag _lua_ignore}
                {zone "global"}
                {state operatable}
              }
              {count
                {op ">"}
                {value 30}
              }
            }
            {"2.cmp_i"
              {var "ai_on$"}
              {op ">"}
              {value 0}
            }
            {"3.entities"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _lua_ignore}
                    }
                  }
                  {include
                    {zone
                      {zone "global"}
                    }
                    {tag
                      {tag _lua_mi}
                    }
                    {state
                      {state operatable}
                    }
                  }
                }
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _lua_ignore}
                      }
                    }
                    {include
                      {tag
                        {tag _lua_mi}
                      }
                    }
                  }
                }
              }
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _lua_ignore}
                      }
                    }
                    {include
                      {tag
                        {tag _lua_mi}
                      }
                    }
                  }
                }
                {tag_remove _lua_ignore}
              }
              {"delay"
                {time 10}
              }
              {"trigger"
                {name "lua/ignore_incheck"}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _lua_ignore}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {state
                        {state inactive}
                      }
                    }
                  }
                  {sort
                    {type entity}
                    {entity
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag flag}
                          }
                        }
                        {exclude
                          {state
                            {state inactive}
                          }
                        }
                      }
                    }
                    {mode farthest}
                  }
                  {amount 1
                  }
                }
                {tag_add _tidy1}
              }
              {"delay"
                {time 1}
              }
              {"switch"
                {"case"
                  {condition
                    {type see_enemy}
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _tidy1}
                      {state operatable}
                    }
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _tidy1}
                    }
                    {tag_remove _lua_ignore}
                  }
                  {"delay"
                    {time 1}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _tidy1}
                    }
                    {tag_remove _tidy1}
                  }
                }
              }
              {"delay"
                {time 25}
              }
              {"trigger"
                {name "lua/ignore_incheck"}
              }
            }
          }
        }
      }
      {"ai/recrew_tank"
        {condition
          {type 1}
          {terms
            {"1.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot}
                    }
                  }
                  {include
                    {prop
                      {prop human}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag repairing}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot_tank}
                    }
                    {tag
                      {tag player_armor}
                    }
                  }
                  {include
                    {zone
                      {zone "global"}
                    }
                    {prop
                      {prop vehicle}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag destroyed}
                    }
                    {tag
                      {tag body_break}
                    }
                    {tag
                      {tag ammo_cooked}
                    }
                    {state
                      {state inhabited}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 50}
              }
              {tag
                {"tag pair"}
                {"for selector" tcrew}
                {"for enemy" etank_enter}
              }
            }
            {"2.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot}
                    }
                  }
                  {include
                    {prop
                      {prop human}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag repairing}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot_tank}
                    }
                    {tag
                      {tag player_armor}
                    }
                  }
                  {include
                    {zone
                      {zone "global"}
                    }
                    {prop
                      {prop vehicle}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag destroyed}
                    }
                    {tag
                      {tag body_break}
                    }
                    {tag
                      {tag ammo_cooked}
                    }
                    {state
                      {state inhabited}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 50}
              }
              {tag
                {"tag pair"}
                {"for selector" tcrew}
                {"for enemy" etank_enter}
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type see_enemy}
                {selector
                  {ignore_captured_by_user 0}
                  {tag tcrew}
                  {zone "global"}
                  {state operatable}
                }
              }
              {"delay"
                {time 1}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag tcrew}
                }
                {tag_remove tcrew}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag etank_enter}
                }
                {tag_remove etank_enter}
              }
              {"delay"
                {time 30}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag tcrew}
                          }
                        }
                        {include
                          {team
                            {team b}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag bot}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {team
                            {team b}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {tag
                            {tag tcrew}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {sort
                        {type entity}
                        {entity
                          {ignore_captured_by_user 0}
                          {tag tcrew}
                        }
                      }
                      {amount 1
                      }
                    }
                    {tag_add temp3}
                  }
                }
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag tcrew}
                          }
                        }
                        {include
                          {team
                            {team a}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag bot}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {team
                            {team a}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {tag
                            {tag tcrew}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {sort
                        {type entity}
                        {entity
                          {ignore_captured_by_user 0}
                          {tag tcrew}
                        }
                      }
                      {amount 1
                      }
                    }
                    {tag_add temp3}
                  }
                }
                {"default"}
              }
              {"delay"
                {time 0.5}
              }
              {"while"
                {condition
                  {type near}
                  {units
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag temp3}
                        }
                      }
                      {include
                        {prop
                          {prop human}
                        }
                        {state
                          {state operatable}
                        }
                      }
                      {exclude
                        {tag
                          {tag tcrew}
                        }
                        {state
                          {state inactive}
                        }
                        {state
                          {state linked}
                        }
                      }
                    }
                  }
                  {near_to
                    {ignore_captured_by_user 0}
                    {tag etank_enter}
                  }
                  {distance 90}
                }
                {"delay"
                  {time 0.1}
                }
                {"entity_state"
                  {selector
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag temp3}
                        }
                      }
                      {include
                        {prop
                          {prop human}
                        }
                        {state
                          {state operatable}
                        }
                      }
                      {exclude
                        {tag
                          {tag tcrew}
                        }
                        {state
                          {state inactive}
                        }
                        {state
                          {state linked}
                        }
                      }
                    }
                    {sort
                      {type entity}
                      {entity
                        {ignore_captured_by_user 0}
                        {tag etank_enter}
                      }
                    }
                    {amount 1
                    }
                  }
                  {tag_add tcrew}
                  {tag_remove temp3}
                }
                {"delay"
                  {time 0.1}
                }
              }
              {"delay"
                {time 0.3}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag tcrew}
                  {state operatable}
                }
                {tag_add _lua_mi}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag tcrew}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                }
                {drop orders}
                {fire_mode open}
                {move_mode free}
                {movement
                  {speed assault}
                }
              }
              {"delay"
                {time 0.3}
              }
              {"action"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag tcrew}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                }
                {drop orders}
                {action move}
                {target
                  {ignore_captured_by_user 0}
                  {tag etank_enter}
                }
              }
              {"delay"
                {time 6}
              }
              {"switch"
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag etank_enter}
                          }
                        }
                        {include
                          {prop
                            {prop vehicle}
                          }
                        }
                        {exclude
                          {tag
                            {tag destroyed}
                          }
                          {tag
                            {tag body_break}
                          }
                          {tag
                            {tag ammo_cooked}
                          }
                          {state
                            {state inhabited}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"board"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag tcrew}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {tag
                            {tag repairing}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                    }
                    {vehicle
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag etank_enter}
                          }
                        }
                        {include
                          {prop
                            {prop vehicle}
                          }
                        }
                        {exclude
                          {tag
                            {tag destroyed}
                          }
                          {tag
                            {tag ammo_cooked}
                          }
                          {tag
                            {tag body_break}
                          }
                        }
                      }
                    }
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag tcrew}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {tag
                            {tag repairing}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                    }
                    {drop orders}
                    {fire_mode open}
                    {move_mode free}
                    {ai_move
                      {mode enable}
                    }
                  }
                }
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag tcrew}
                  {state operatable}
                }
                {tag_add _mi_temp6}
              }
              {"delay"
                {time 20}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {group
                    {select
                      {tag
                        {tag tcrew}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                }
                {tag_remove tcrew}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag temp3}
                }
                {tag_remove temp3}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag etank_enter}
                }
                {tag_remove etank_enter}
              }
              {"delay"
                {time 30}
              }
            }
          }
          {"delay"
            {time 30}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _mi_temp6}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {tag
                    {tag repairing}
                  }
                  {state
                    {state inactive}
                  }
                  {state
                    {state linked}
                  }
                }
              }
            }
            {tag_remove _lua_mi}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _mi_temp6}
            }
            {tag_remove _mi_temp6}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "ai/recrew_tank"}
          }
        }
      }
      {"lua/in_transit_act"
        {condition
          {type 1}
          {terms
            {"1.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _bot}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_alert}
                    }
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag _lua_ignore}
                    }
                    {tag
                      {tag repairing}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 90}
              }
              {tag
                {"tag pair"}
                {"for selector" _act}
              }
            }
            {"2.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _bot}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_alert}
                    }
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag _lua_ignore}
                    }
                    {tag
                      {tag repairing}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 90}
              }
              {tag
                {"tag pair"}
                {"for selector" _act}
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type see_enemy}
                {selector
                  {ignore_captured_by_user 0}
                  {tag _act}
                  {state operatable}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag _act}
                          }
                        }
                        {include
                          {tag
                            {tag bot_veh}
                          }
                          {prop
                            {prop vehicle}
                          }
                        }
                        {exclude
                          {state
                            {state user_control}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag _act}
                      {state operatable}
                    }
                    {drop orders}
                    {fire_mode open}
                    {ai_move
                      {mode enable}
                    }
                    {cannon fire}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _act}
                      {state operatable}
                    }
                    {tag_add _lua_alert}
                    {tag_remove _lua_ignore}
                  }
                  {"delay"
                    {time 10}
                  }
                }
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag _act}
                          }
                        }
                        {include
                          {tag
                            {tag bot}
                          }
                          {prop
                            {prop human}
                          }
                        }
                        {exclude
                          {state
                            {state dead}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag _act}
                      {state operatable}
                    }
                    {drop orders}
                    {fire_mode open}
                    {move_mode hold}
                    {ai_move
                      {mode enable}
                    }
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _act}
                      {state operatable}
                    }
                    {tag_add _lua_alert}
                    {tag_remove _lua_ignore}
                  }
                  {"delay"
                    {time 1}
                  }
                  {"actor_state"
                    {selector
                      {tag _act}
                      {state operatable}
                    }
                    {fire_mode open}
                    {move_mode free}
                    {ai_move
                      {mode enable}
                    }
                  }
                  {"delay"
                    {time 22}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag _act}
                      {type vehicle}
                      {state operatable}
                    }
                    {drop orders}
                    {fire_mode open}
                    {ai_move
                      {mode enable}
                    }
                    {movement
                      {forward off}
                      {backward off}
                    }
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _act}
                      {state operatable}
                    }
                    {tag_add _lua_alert}
                    {tag_remove _lua_ignore}
                  }
                  {"delay"
                    {time 2}
                  }
                  {"actor_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _act}
                      {state operatable}
                    }
                    {fire_mode open}
                    {move_mode free}
                    {ai_move
                      {mode enable}
                    }
                    {movement
                      {speed normal}
                      {forward on}
                      {backward on}
                    }
                  }
                  {"delay"
                    {time 22}
                  }
                }
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
            }
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _act}
            }
            {tag_remove _act}
          }
          {"delay"
            {time 5}
          }
          {"trigger"
            {name "lua/in_transit_act"}
          }
        }
      }
      {"lua/alert_clear"
        {condition
          {expression "(!1 & 2 & 4) | (3 & 4)"}
          {terms
            {"1.see_enemy"
              {selector
                {source advanced}
                {group
                  {select
                    {tag
                      {tag _lua_alert}
                    }
                  }
                  {include
                    {zone
                      {zone "global"}
                    }
                    {state
                      {state operatable}
                    }
                  }
                  {exclude
                    {state
                      {state user_control}
                    }
                  }
                }
              }
            }
            {"2.entities"
              {selector
                {source advanced}
                {group
                  {select
                    {tag
                      {tag _lua_alert}
                    }
                  }
                  {include
                    {zone
                      {zone "global"}
                    }
                    {state
                      {state operatable}
                    }
                  }
                  {exclude
                    {state
                      {state user_control}
                    }
                  }
                }
              }
            }
            {"3.entities"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _lua_alert}
                    }
                  }
                  {include
                    {zone
                      {zone "global"}
                    }
                    {tag
                      {tag _lua_mi}
                    }
                    {state
                      {state operatable}
                    }
                  }
                }
              }
            }
            {"4.cmp_i"
              {var "ai_on$"}
              {op ">"}
              {value 0}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _lua_alert}
                      }
                    }
                    {include
                      {tag
                        {tag _lua_mi}
                      }
                    }
                  }
                }
              }
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _lua_alert}
                      }
                    }
                    {include
                      {tag
                        {tag _lua_mi}
                      }
                    }
                  }
                }
                {tag_remove _lua_alert}
              }
              {"delay"
                {time 8}
              }
              {"trigger"
                {name "lua/alert_clear"}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {amount 1
                  }
                  {tag _lua_alert}
                  {state operatable}
                }
                {tag_add alert_temp}
              }
              {"delay"
                {time 1}
              }
              {"switch"
                {"case"
                  {condition
                    {type see_enemy}
                    {selector
                      {ignore_captured_by_user 0}
                      {tag alert_temp}
                    }
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag alert_temp}
                    }
                    {tag_remove _lua_alert}
                  }
                  {"delay"
                    {time 1}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag alert_temp}
                    }
                    {tag_remove alert_temp}
                  }
                }
              }
              {"delay"
                {time 8}
              }
              {"trigger"
                {name "lua/alert_clear"}
              }
            }
          }
        }
      }
      {"environment_any"
        {condition
          {terms
            {"1.event"
              {id "gamestart"}
            }
            {"2.mission_option"
              {name "any_weather"}
            }
          }
        }
        {actions
          {"switch"
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/day_1"}
                {time 1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/day_2"}
                {time 1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/day_3"}
                {time 1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/day_cloudy_1"}
                {time 1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/day_rain_1"}
                {time 1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/day_rain_2"}
                {time 1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.2}
              }
              {"environment"
                {name "goh/multi/west/summer/night_1"}
                {time -1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.2}
              }
              {"environment"
                {name "goh/multi/west/summer/night_2"}
                {time -1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.2}
              }
              {"environment"
                {name "goh/multi/west/summer/night_rain_1"}
                {time -1}
                {apply}
              }
            }
            {"default"}
          }
        }
      }
      {"environment_day"
        {condition
          {terms
            {"1.event"
              {id "gamestart"}
            }
            {"2.mission_option"
              {name "day_weather"}
            }
          }
        }
        {actions
          {"switch"
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/day_1"}
                {time 1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/day_2"}
                {time 1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/day_3"}
                {time 1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/day_cloudy_1"}
                {time 1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/day_rain_1"}
                {time 1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/day_rain_2"}
                {time 1}
                {apply}
              }
            }
            {"default"}
          }
        }
      }
      {"environment_night"
        {condition
          {terms
            {"1.event"
              {id "gamestart"}
            }
            {"2.mission_option"
              {name "night_weather"}
            }
          }
        }
        {actions
          {"switch"
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/night_1"}
                {time -1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/night_2"}
                {time -1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/west/summer/night_rain_1"}
                {time -1}
                {apply}
              }
            }
          }
        }
      }
      {"start"
        {condition
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"event"
            {event "gamestart"}
            {mode set}
            {delay 0}
          }
          {"delay"
            {time 0.1}
          }
          {"event"
            {event "ambient"}
            {mode set}
            {delay 0}
          }
        }
      }
      {"music_new/action_playlist/action_theme_3"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {start "/music/action_theme_3.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/action_playlist/action_theme_3"}
          }
        }
      }
      {"music_new/ambient_selection"
        {condition
          {expression "1 & (2|3)"}
          {terms
            {"1.event"
              {id "gamestart"}
            }
            {"2.event"
              {id "ambient"}
            }
            {"3.cmp_i"
              {var "ambient$"}
              {op ">="}
              {value 20}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"event"
            {event "action"}
            {mode reset}
            {delay 0}
          }
          {"event"
            {event "ambient"}
            {mode set}
            {delay 0}
          }
          {"delay"
            {time 0.1}
          }
          {"trigger"
            {name "music_new/music_fade"}
            {on}
          }
          {"delay"
            {time 0.1}
          }
          {"set_i"
            {var "action_selection$"}
            {op "="}
            {value 0}
          }
          {"set_i"
            {var "ambient$"}
            {op "="}
            {value 0}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/action_selection "}
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type cmp_i}
                {var "ambient_selection$"}
                {op "=="}
                {value 0}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.15}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 1}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.15}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 2}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 3}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.5}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 4}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 1}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 5}
                  }
                }
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "ambient_selection$"}
                {op "<<"}
                {value 5}
              }
              {"set_i"
                {var "ambient_selection$"}
                {op "+"}
                {value 1}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "ambient_selection$"}
                {op ">="}
                {value 5}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.2}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 1}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.2}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 2}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 3}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.5}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 4}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 1}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 5}
                  }
                }
              }
            }
          }
          {"switch"
            {"case"
              {condition
                {type cmp_i}
                {var "ambient_selection$"}
                {op "=="}
                {value 1}
              }
              {"trigger"
                {name "music_new/ambient_playlist/ambient_2"}
                {on}
              }
              {"delay"
                {time 105}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "ambient_selection$"}
                    {op "=="}
                    {value 1}
                  }
                  {"trigger"
                    {name "music_new/ambient_selection"}
                  }
                }
                {"default"}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "ambient_selection$"}
                {op "=="}
                {value 2}
              }
              {"trigger"
                {name "music_new/ambient_playlist/ambient_4"}
                {on}
              }
              {"delay"
                {time 165}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "ambient_selection$"}
                    {op "=="}
                    {value 2}
                  }
                  {"trigger"
                    {name "music_new/ambient_selection"}
                  }
                }
                {"default"}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "ambient_selection$"}
                {op "=="}
                {value 3}
              }
              {"trigger"
                {name "music_new/ambient_playlist/ambient_west_1"}
                {on}
              }
              {"delay"
                {time 155}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "ambient_selection$"}
                    {op "=="}
                    {value 3}
                  }
                  {"trigger"
                    {name "music_new/ambient_selection"}
                  }
                }
                {"default"}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "ambient_selection$"}
                {op "=="}
                {value 4}
              }
              {"trigger"
                {name "music_new/ambient_playlist/ambient_west_2"}
                {on}
              }
              {"delay"
                {time 115}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "ambient_selection$"}
                    {op "=="}
                    {value 4}
                  }
                  {"trigger"
                    {name "music_new/ambient_selection"}
                  }
                }
                {"default"}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "ambient_selection$"}
                {op "=="}
                {value 5}
              }
              {"trigger"
                {name "music_new/ambient_playlist/usa_ambient_lvl1"}
                {on}
              }
              {"delay"
                {time 95}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "ambient_selection$"}
                    {op "=="}
                    {value 5}
                  }
                  {"trigger"
                    {name "music_new/ambient_selection"}
                  }
                }
                {"default"}
              }
            }
            {"default"
              {"trigger"
                {name "music_new/ambient_selection"}
              }
            }
          }
        }
      }
      {"music_new/silent_timer"
        {condition
          {expression "1 & 2 & !3"}
          {terms
            {"1.event"
              {id "gamestart"}
            }
            {"2.event"
              {id "action"}
            }
            {"3.event"
              {id "ambient"}
            }
          }
        }
        {actions
          {"delay"
            {time 4}
          }
          {"set_i"
            {var "ambient$"}
            {op "+"}
            {value 4}
          }
          {"delay"
            {time 0.1}
          }
          {"trigger"
            {name "music_new/silent_timer"}
          }
        }
      }
      {"music_new/ambient_playlist/ambient_2"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {start "/music/ambient_2.wav"}
            {stop_all}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/ambient_playlist/ambient_2"}
          }
        }
      }
      {"music_new/ambient_playlist/ambient_4"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {start "/music/ambient_4.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/ambient_playlist/ambient_4"}
          }
        }
      }
      {"music_new/action_selection "
        {condition
          {expression "1 & (2|3)"}
          {terms
            {"1.event"
              {id "gamestart"}
            }
            {"2.event"
              {id "action"}
            }
            {"3.signal"
              {zone "global"}
              {signals "shot injure explosion"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"event"
            {event "ambient"}
            {mode reset}
            {delay 0}
          }
          {"event"
            {event "action"}
            {mode set}
            {delay 0}
          }
          {"delay"
            {time 0.1}
          }
          {"trigger"
            {name "music_new/music_fade"}
            {on}
          }
          {"delay"
            {time 0.1}
          }
          {"set_i"
            {var "ambient_selection$"}
            {op "="}
            {value 0}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/ambient_selection"}
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type cmp_i}
                {var "action_selection$"}
                {op "=="}
                {value 0}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.25}
                  }
                  {"set_i"
                    {var "action_selection$"}
                    {op "="}
                    {value 1}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"set_i"
                    {var "action_selection$"}
                    {op "="}
                    {value 2}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.5}
                  }
                  {"set_i"
                    {var "action_selection$"}
                    {op "="}
                    {value 3}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 1}
                  }
                  {"set_i"
                    {var "action_selection$"}
                    {op "="}
                    {value 4}
                  }
                }
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "action_selection$"}
                {op "<<"}
                {value 4}
              }
              {"set_i"
                {var "action_selection$"}
                {op "+"}
                {value 1}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "action_selection$"}
                {op ">="}
                {value 4}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"set_i"
                    {var "action_selection$"}
                    {op "="}
                    {value 1}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.25}
                  }
                  {"set_i"
                    {var "action_selection$"}
                    {op "="}
                    {value 2}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.5}
                  }
                  {"set_i"
                    {var "action_selection$"}
                    {op "="}
                    {value 3}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 1}
                  }
                  {"set_i"
                    {var "action_selection$"}
                    {op "="}
                    {value 4}
                  }
                }
              }
            }
          }
          {"switch"
            {"case"
              {condition
                {type cmp_i}
                {var "action_selection$"}
                {op "=="}
                {value 1}
              }
              {"trigger"
                {name "music_new/action_playlist/action_theme_3"}
                {on}
              }
              {"delay"
                {time 170}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "action_selection$"}
                    {op "=="}
                    {value 1}
                  }
                  {"trigger"
                    {name "music_new/action_selection "}
                  }
                }
                {"default"}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "action_selection$"}
                {op "=="}
                {value 2}
              }
              {"trigger"
                {name "music_new/action_playlist/ger_battle_west_lvl1"}
                {on}
              }
              {"delay"
                {time 180}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "action_selection$"}
                    {op "=="}
                    {value 2}
                  }
                  {"trigger"
                    {name "music_new/action_selection "}
                  }
                }
                {"default"}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "action_selection$"}
                {op "=="}
                {value 3}
              }
              {"trigger"
                {name "music_new/action_playlist/ger_battle_west_lvl2"}
                {on}
              }
              {"delay"
                {time 95}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "action_selection$"}
                    {op "=="}
                    {value 3}
                  }
                  {"trigger"
                    {name "music_new/action_selection "}
                  }
                }
                {"default"}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "action_selection$"}
                {op "=="}
                {value 4}
              }
              {"trigger"
                {name "music_new/action_playlist/usa_battle_lvl1"}
                {on}
              }
              {"delay"
                {time 300}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "action_selection$"}
                    {op "=="}
                    {value 4}
                  }
                  {"trigger"
                    {name "music_new/action_selection "}
                  }
                }
              }
            }
            {"default"
              {"trigger"
                {name "music_new/action_selection "}
              }
            }
          }
        }
      }
      {"music_new/music_fade"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {stop "/music/action_theme_3.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 0.01}
          }
          {"music"
            {stop "/music/ger_battle_west_lvl1.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 0.01}
          }
          {"music"
            {stop "/music/ger_battle_west_lvl2.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 0.01}
          }
          {"music"
            {stop "/music/usa_battle_lvl1.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 0.1}
          }
          {"music"
            {stop "/music/ambient_2.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 0.01}
          }
          {"music"
            {stop "/music/ambient_4.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 0.01}
          }
          {"music"
            {stop "/music/ambient_west_1.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 0.01}
          }
          {"music"
            {stop "/music/ambient_west_2.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 0.01}
          }
          {"music"
            {stop "/music/usa_ambient_lvl1.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 0.01}
          }
          {"trigger"
            {name "music_new/music_fade"}
          }
        }
      }
      {"music_new/silent_timer_reset"
        {condition
          {expression "1 & 2 & !3 & 4 & !5"}
          {terms
            {"1.event"
              {id "gamestart"}
            }
            {"2.event"
              {id "action"}
            }
            {"3.event"
              {id "ambient"}
            }
            {"4.signal"
              {zone "global"}
              {signals "shot injure explosion"}
            }
            {"5.cmp_i"
              {var "ambient$"}
              {op "=="}
              {value 0}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"set_i"
            {var "ambient$"}
            {op "="}
            {value 0}
          }
          {"delay"
            {time 4}
          }
          {"trigger"
            {name "music_new/silent_timer_reset"}
          }
        }
      }
      {"music_new/action_playlist/ger_battle_west_lvl1"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {start "/music/ger_battle_west_lvl1.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/action_playlist/ger_battle_west_lvl1"}
          }
        }
      }
      {"music_new/action_playlist/ger_battle_west_lvl2"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {start "/music/ger_battle_west_lvl2.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/action_playlist/ger_battle_west_lvl2"}
          }
        }
      }
      {"music_new/action_playlist/usa_battle_lvl1"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {start "/music/usa_battle_lvl1.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/action_playlist/usa_battle_lvl1"}
          }
        }
      }
      {"music_new/ambient_playlist/ambient_west_1"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {start "/music/ambient_west_1.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/ambient_playlist/ambient_west_1"}
          }
        }
      }
      {"music_new/ambient_playlist/ambient_west_2"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {start "/music/ambient_west_2.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/ambient_playlist/ambient_west_2"}
          }
        }
      }
      {"music_new/ambient_playlist/usa_ambient_lvl1"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {start "/music/usa_ambient_lvl1.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/ambient_playlist/usa_ambient_lvl1"}
          }
        }
      }
      {"drumsound"
        {condition
          {terms
            {"1.event"
              {id "gamestart"}
            }
          }
        }
        {actions
          {"sound"
            {name "interface/gui/matchmaking"}
          }
        }
      }
      {"notifications"
        {condition
          {terms
            {"1.event"
              {id "gamestart"}
            }
          }
        }
        {actions
          {"delay"
            {time 300}
          }
          {"sound"
            {name "gui/level_up"}
          }
          {"delay"
            {time 600}
          }
          {"sound"
            {name "gui/level_up"}
          }
          {"delay"
            {time 600}
          }
          {"sound"
            {name "gui/level_up"}
          }
        }
      }
    }
  }
  {Players
    {count 17}
    {diplomacy
      1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
    }
  }
  {Fog 0}
  {EntityManager {Enabled}
    {CountScale "x0.5"}
  }
}
