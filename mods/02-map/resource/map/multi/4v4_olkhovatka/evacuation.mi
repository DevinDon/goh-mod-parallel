{mission
  {Entity "evacuation_point" 0x802f
    {Position -1428.29 -2153.82}
    {xform zl 46.15}
    {Extender "map_point"
      {name base_flag_a}
      {zone
        {radius 0}
        {zoneId "base_a"}
      }
      {phase 0}
      {order 1}
      {show All}
      {visor MapPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Extender "fortification"
      {level
        {steps 0}
        {radius 0}
        {angle "45"}
        {elementAngle "270"}
        {buildTime 60}
        {entity "flagpoint_ammo"}
      }
      {level
        {steps 4}
        {radius 10}
        {angle "45"}
        {azimuth "14"}
        {buildTime 120}
        {entity "sandbag_framed_straight"}
        {manual
          {0
            0.615 0.788 0
            -0.788 0.615 0
            0 0 1
            -1259.68 -1952.99 26
          }
          {1
            0.406 0.913 0
            -0.913 0.406 0
            0 0 0.999
            -1301.48 -1927.88 26
          }
          {2
            0.132 0.991 0
            -0.991 0.132 0
            0 0 1
            -1499.28 -1920.89 26
          }
          {3
            -0.11 0.993 0
            -0.993 -0.11 0
            0 0 0.999
            -1548.02 -1920.35 26
          }
          {4
            -0.347 0.937 0
            -0.937 -0.347 0
            0 0 1
            -1595.45 -1931.62 26
          }
          {5
            -0.564 0.825 0
            -0.825 -0.564 0
            0 0 0.999
            -1638.74 -1954.02 26
          }
          {6
            0.935 0.352 0
            -0.352 0.935 0
            0 0 1
            -1525.57 -2348.35 27
          }
          {7
            0.822 0.568 0
            -0.568 0.822 0
            0 0 1
            -1548.18 -2305.12 27
          }
          {8
            0.66 0.75 0
            -0.75 0.66 0
            0 0 0.999
            -1580.56 -2268.72 26
          }
          {9
            0.459 0.888 0
            -0.888 0.459 0
            0 0 1
            -1620.8 -2241.2 26
          }
          {10
            0.883 -0.468 0
            0.468 0.883 0
            0 0 0.999
            -1204.18 -2361.3 27
          }
          {11
            0.97 -0.241 0
            0.241 0.97 0
            0 0 1
            -1186.75 -2315.78 27
          }
          {12
            0.999 0 0
            0 0.999 0
            0 0 1
            -1180.84 -2267.37 27
          }
          {13
            0.97 0.242 0
            -0.242 0.97 0
            0 0 1
            -1186.81 -2219.01 27
          }
          {14
            0.913 0.406 0
            -0.406 0.913 0
            0 0 1
            -1200.12 -2029.24 27
          }
          {15
            0.788 0.615 0
            -0.615 0.788 0
            0 0 1
            -1225.22 -1987.46 27
          }
        }
      }
      {level
        {steps 3}
        {radius 21}
        {angle "0"}
        {azimuth "10"}
        {buildTime 120}
        {entity "sandbag_heap_curved"}
        {manual
          {0
            0.899 0.437 0
            -0.437 0.899 0
            0 0 1
            -605.402 -2006.32 18
          }
          {1
            0.567 0.823 0
            -0.823 0.567 0
            0 0 1
            -648.067 -1951.53 21
          }
          {2
            0.468 0.883 0
            -0.883 0.468 0
            0 0 0.999
            -2828.42 -2237.87 26
          }
          {3
            -0.118 0.992 0
            -0.992 -0.118 0
            0 0 0.999
            -2896.41 -2221.85 25
          }
          {4
            -0.497 0.867 0
            -0.867 -0.497 0
            0 0 1
            -2964.62 -2236.84 25
          }
          {5
            0.447 0.894 0
            -0.894 0.447 0
            0 0 0.999
            -1852.12 -1452.79 21
          }
          {6
            -0.017 0.999 0
            -0.999 -0.017 0
            0 0 1
            -1915.24 -1436.3 20
          }
          {7
            -0.584 0.811 0
            -0.811 -0.584 0
            0 0 1
            -1981.21 -1452.71 19
          }
          {8
            0.99 -0.139 0
            0.139 0.99 0
            0 0 1
            -757.759 -3293.02 21
          }
          {9
            0.963 0.265 0
            -0.265 0.963 0
            0 0 0.999
            -759.207 -3222.79 22
          }
          {10
            0.659 0.751 0
            -0.751 0.659 0
            0 0 0.999
            -794.264 -3161.32 23
          }
          {11
            0.994 -0.1 0
            0.1 0.994 0
            0 0 1
            -596.918 -2081.44 16.8
          }
        }
      }
      {level
        {steps 2}
        {radius 45}
        {angle "0"}
        {azimuth "45"}
        {elementAngle "0"}
        {buildTime 120}
        {entity "watch_tower"}
        {skip "1 2 3 4"}
        {manual
          {0
            0.305 0.952 0
            -0.952 0.305 0
            0 0 1
            -2979.08 -2405.24 36.265
          }
          {5
            0.792 0.609 0
            -0.609 0.792 0
            0 0 1
            -931.237 -3152.99 24
          }
          {6
            0.811 0.584 0
            -0.584 0.811 0
            0 0 1
            -758.304 -2158.85 22
          }
          {7
            0.27 0.962 0
            -0.962 0.27 0
            0 0 1
            -1860.81 -1545.97 23.545
          }
        }
      }
      {level
        {steps 2}
        {radius 40}
        {angle "0"}
        {azimuth "45"}
        {elementAngle "0"}
        {buildTime 120}
        {entity "inf_crate_ger"}
        {skip "1 2 3 4"}
        {manual
          {0
            -0.55 0.834 0
            -0.834 -0.55 0
            0 0 1
            -2890.81 -2375.1 25.957
          }
          {5
            -0.396 0.918 0
            -0.918 -0.396 0
            0 0 1
            -906.301 -3266.83 23.994
          }
          {6
            0.586 0.809 0
            -0.809 0.586 0
            0 0 1
            -751.312 -2060.59 23
          }
          {7
            0.805 -0.593 0
            0.593 0.805 0
            0 0 1
            -1918.43 -1597.63 24
          }
        }
      }
    }
    {Player 0}
    {MID 48}
  }
  {Entity "map_point" 0x8005
    {Position 7499.78 -7517.02}
    {xform zl 158.96}
    {Extender "map_point"
      {name b4}
      {team b}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 4}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 4}
  }
  {Entity "map_point" 0x8007
    {Position -7418.72 7423.3}
    {xform zl -55.94}
    {Extender "map_point"
      {name b3}
      {team b}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 3}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 6}
  }
  {Entity "map_point" 0x8008
    {Position -2711.25 7477.91}
    {xform zl -101.03}
    {Extender "map_point"
      {name b7}
      {team b}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 7}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 7}
  }
  {Entity "map_point" 0x8003
    {Position 7486.04 -2820.28}
    {xform zl 176.94}
    {Extender "map_point"
      {name b5}
      {team b}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 5}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 1}
  }
  {Entity "map_point" 0x8004
    {Position 4866.45 7470.82}
    {xform zl -137.28}
    {Extender "map_point"
      {name b2}
      {team b}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 2}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 2}
  }
  {Entity "map_point" 0x8006
    {Position 6919.49 4728.65}
    {xform zl -141.61}
    {Extender "map_point"
      {name b1}
      {team b}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 1}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 3}
  }
  {Entity "map_point" 0x8009
    {Position 1393.78 7538.38}
    {xform zl -99.14}
    {Extender "map_point"
      {name b6}
      {team b}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 6}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 5}
  }
  {Entity "map_point" 0x800a
    {Position -3848.15 -5330.69}
    {xform zl 54.94}
    {Extender "map_point"
      {name a1}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 1}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 8}
  }
  {Entity "map_point" 0x800b
    {Position -3037.18 -5933.4}
    {xform zl 54.94}
    {Extender "map_point"
      {name a2}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 2}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 10}
  }
  {Entity "map_point" 0x800c
    {Position -3440.53 -5645}
    {xform zl 54.94}
    {Extender "map_point"
      {name a3}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 3}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 11}
  }
  {Entity "map_point" 0x800d
    {Position -4257.56 -5009.83}
    {xform zl 54.94}
    {Extender "map_point"
      {name a4}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 4}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 12}
  }
  {Entity "ammo_point" 0x8012
    {Position -3365.31 763.43}
    {xform zl 89.14}
    {Placer
      {State "ammo" {Unlinked}}
    }
    {Extender "map_point"
      {name f1}
      {zone
        {radius 0}
        {zoneId "f1"}
      }
      {phase 0}
      {order 1}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 14}
  }
  {Entity "ammo_point" 0x8014
    {Position 1561.05 358.41}
    {xform zl 89.14}
    {Placer
      {State "ammo" {Unlinked}}
    }
    {Extender "map_point"
      {name f4}
      {zone
        {radius 0}
        {zoneId "f4"}
      }
      {phase 0}
      {order 4}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 15}
  }
  {Entity "ammo_point" 0x8016
    {Position 101.05 1770.37}
    {xform zl 100.45}
    {Placer
      {State "ammo" {Unlinked}}
    }
    {Extender "map_point"
      {name f3}
      {zone
        {radius 0}
        {zoneId "f3"}
      }
      {phase 0}
      {order 3}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 16}
  }
  {Entity "ammo_point" 0x800e
    {Position -1787.8 1673.18}
    {xform zl 89.14}
    {Placer
      {State "ammo" {Unlinked}}
    }
    {Extender "map_point"
      {name f2}
      {zone
        {radius 0}
        {zoneId "f2"}
      }
      {phase 0}
      {order 2}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 13}
  }
  {Entity "ammo_point" 0x8010
    {Position 2581.12 -909.42}
    {xform zl 89.14}
    {Placer
      {State "ammo" {Unlinked}}
    }
    {Extender "map_point"
      {name f5}
      {zone
        {radius 0}
        {zoneId "f5"}
      }
      {phase 0}
      {order 5}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 17}
  }
  {Entity "map_point" 0x8013
    {Position 7469.6 965.96}
    {xform zl -157.83}
    {Extender "map_point"
      {name b8}
      {team b}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 8}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 9}
  }
  {Entity "ammo_point" 0xc000
    {Position 2554.23 -2585.62}
    {xform zl 89.14}
    {Placer
      {State "ammo" {Unlinked}}
    }
    {Extender "map_point"
      {name f6}
      {zone
        {radius 0}
        {zoneId "f6"}
      }
      {phase 0}
      {order 6}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 18}
  }
  {Entity "ammo_point" 0xc004
    {Position 2151.87 -4587.64}
    {xform zl 89.14}
    {Placer
      {State "ammo" {Unlinked}}
    }
    {Extender "map_point"
      {name f7}
      {zone
        {radius 0}
        {zoneId "f7"}
      }
      {phase 0}
      {order 7}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 20}
  }
  {Entity "map_point" 0x8002
    {Position -2935.52 -6300.11}
    {xform zl 54.94}
    {Extender "map_point"
      {name a5}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 5}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 19}
  }
  {Entity "map_point" 0x800f
    {Position -3373.07 -5898.4}
    {xform zl 54.94}
    {Extender "map_point"
      {name a6}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 6}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 21}
  }
  {Entity "map_point" 0x8011
    {Position -3798.54 -5636.59}
    {xform zl 54.94}
    {Extender "map_point"
      {name a7}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 7}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 22}
  }
  {Entity "map_point" 0x8015
    {Position -4221.24 -5324.47}
    {xform zl 54.94}
    {Extender "map_point"
      {name a8}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 8}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 23}
  }
  {Entity "map_point" 0x8017
    {Position -2661.42 -6283.81}
    {xform zl 54.94}
    {Extender "map_point"
      {name a9}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 9}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 24}
  }
  {Entity "map_point" 0x8018
    {Position -2611.71 -6542.81}
    {xform zl 54.94}
    {Extender "map_point"
      {name a10}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 10}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 25}
  }
  {Entity "map_point" 0x8019
    {Position -4521.95 -5069.21}
    {xform zl 54.94}
    {Extender "map_point"
      {name a11}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 11}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 26}
  }
  {Entity "map_point" 0x801a
    {Position -4516.27 -4794.21}
    {xform zl 54.94}
    {Extender "map_point"
      {name a12}
      {team a}
      {zone
        {radius 0}
        {zoneId ""}
      }
      {phase 0}
      {order 12}
      {visor SpawnPoint}
      {allow
        {enableCapture}
        {enableRelease}
      }
    }
    {Player 0}
    {MID 27}
  }
  {Tags "bare" 0x60df}
  {Tags "bare" 0x60e6}
  {Tags "bare" 0x60e7}
  {Tags "bare" 0x60e8}
  {Tags "bare" 0x60ea}
  {Tags "bare" 0x60eb}
  {Tags "bare" 0x40bf}
  {Tags "bare" 0x40c0}
  {Tags "bare" 0x60d8}
  {Tags "bare" 0x407e}
  {Tags "bare" 0x40b3}
  {Tags "bare" 0x6116}
  {Tags "bare" 0x6117}
  {Tags "bare" 0x60d3}
  {Tags "aut" 0x4395}
  {Tags "bare" 0x407a}
  {Tags "bare" 0x407f}
  {Tags "bare" 0x4087}
  {Tags "bare" 0x4122}
  {Tags "aut" 0x412c}
  {Tags "aut" 0x412d}
  {Tags "bare" 0x414e}
  {Tags "bare" 0x4151}
  {Tags "bare" 0x4125}
  {Tags "bare" 0x4145}
  {Tags "bare" 0x4148}
  {Tags "bare" 0x414b}
  {Tags "aut" 0x413b}
  {Tags "aut" 0x413c}
  {Tags "aut" 0x412e}
  {Tags "aut" 0x412f}
  {Tags "bare" 0x60e9}
  {Tags "bare" 0x60ec}
  {Tags "bare" 0x60f0}
  {Tags "bare" 0x6127}
  {Tags "bare" 0x6124}
  {Tags "bare" 0x6125}
  {Tags "bare" 0x611d}
  {Tags "bare" 0x611f}
  {Tags "bare" 0x4090}
  {Tags "bare" 0x6120}
  {Tags "bare" 0x6121}
  {Tags "bare" 0x611e}
  {Tags "bare" 0x611c}
  {Tags "bare" 0x4052}
  {Tags "aut" 0x4266}
  {Tags "bare" 0x61a9}
  {Tags "aut" 0x1041}
  {Tags "bare" 0x30df}
  {Tags "bare" 0x30f6}
  {Tags "bare" 0x615f}
  {Tags "bare" 0x30ed}
  {Tags "bare" 0x6237}
  {Tags "bare" 0x30f1}
  {Tags "bare" 0x30f3}
  {Tags "bare" 0x30f5}
  {Tags "bare" 0x120e}
  {Tags "bare" 0x120c}
  {Tags "bare" 0x120f}
  {Tags "bare" 0x1210}
  {Tags "bare" 0x1211}
  {Tags "bare" 0x1212}
  {Tags "bare" 0x1213}
  {Tags "bare" 0x1214}
  {Tags "aut" 0x1042}
  {Tags "aut" 0x43cb}
  {Tags "aut" 0x43cc}
  {Tags "aut" 0x43d9}
  {Tags "aut" 0x43da}
  {Tags "aut" 0x43db}
  {Tags "aut" 0x6286}
  {Tags "aut" 0x62b0}
  {Tags "aut" 0x62b1}
  {Tags "aut" 0x62b2}
  {Tags "aut" 0x62b3}
  {Tags "aut" 0x62b4}
  {Tags "aut" 0x62b7}
  {Tags "aut" 0x62b8}
  {Tags "flag" 0x802f}
  {Tags "spawn_b" 0x8005}
  {Tags "spawn_b" 0x8007}
  {Tags "spawn_b" 0x8008}
  {Tags "spawn_b" 0x8003}
  {Tags "spawn_b" 0x8004}
  {Tags "spawn_b" 0x8006}
  {Tags "spawn_b" 0x8009}
  {Tags "flag" 0x8012}
  {Tags "flag" 0x8014}
  {Tags "flag" 0x8016}
  {Tags "flag" 0x800e}
  {Tags "flag" 0x8010}
  {Tags "spawn_b" 0x8013}
  {Tags "flag" 0xc000}
  {Tags "flag" 0xc004}
  {Environment "goh/multi/4v4_olkhovatka/var1"}
  {Helpers
    {event "action"}
    {event "ambient"}
    {event "disabled"}
    {event "gamestart"}
    {event "init"}
    {zone "poly"
      {position -1073.26 -1752.06 26}
      {Name "base_a"}
      {Point 566.165 -2341.55}
      {Point 240.644 -2415.22}
      {Point -2219.89 -376.536}
      {Point -2209.4 -72.1506}
      {Point -73.6756 1314.23}
      {Point 393.204 1445.32}
      {Point 876.188 1247.86}
      {Point 1203.68 843.921}
      {Point 1223.09 354.13}
    }
    {zone "poly"
      {position -3390.73 739.802 -17}
      {Name "f1"}
      {Point -572.623 -1236.23}
      {Point -1376.7 539.062}
      {Point 507.002 921.592}
      {Point 1442.32 -224.419}
    }
    {zone "poly"
      {position -1813.79 1555.68 -54}
      {Name "f2"}
      {Point -963.157 204.126}
      {Point 625.31 947.162}
      {Point 890.952 32.8711}
      {Point 359.191 -494.118}
      {Point -194.011 -461.881}
      {Point -718.286 -228.161}
    }
    {zone "poly"
      {position -117.56 1834.03 -100}
      {Name "f3"}
      {Point -742.358 -244.638}
      {Point -1018.88 628.992}
      {Point 111.282 1091.28}
      {Point 1356.93 -165.165}
      {Point 293.027 -1310.46}
    }
    {zone "poly"
      {position 1466.57 413.04 -108}
      {Name "f4"}
      {Point -1249.2 74.6154}
      {Point -184.704 1229.19}
      {Point 1052.22 51.7192}
      {Point 381.675 -1355.52}
    }
    {zone "poly"
      {position 2470.26 -934.47 -67.042}
      {Name "f5"}
      {Point 379.522 -947.291}
      {Point -630.511 -718.703}
      {Point -444.01 111.011}
      {Point -162.734 935.195}
      {Point 857.732 619.79}
    }
    {zone "poly"
      {position 2625.82 -2667.05 -27.4955}
      {Name "f6"}
      {Point 192.297 -994.296}
      {Point -1044.29 -79.4397}
      {Point -740.468 972.924}
      {Point 904.19 519.417}
      {Point 688.271 -418.605}
    }
    {zone "poly"
      {position 1943.04 -4441.45 -23}
      {Name "f7"}
      {Point -662.152 -17.5972}
      {Point -605.804 834.578}
      {Point -372.96 1616.4}
      {Point 1079.85 434.934}
      {Point 1067.25 -1398.96}
      {Point -506.181 -1469.36}
    }
    {zone "poly"
      {position 6.10596 1.31287 -26}
      {Name "global"}
      {Point -8701.01 -8697.07}
      {Point -8711.54 8687.88}
      {Point 8730.91 8700.99}
      {Point 8681.64 -8691.8}
    }
    {reinforcements
      {scoreTotal 0}
      {scoreCurrent 0}
    }
    {vars
      {"action_selection"}
      {"ambient_selection"}
      {"ambient"}
      {"error"}
      {"ai_on"}
      {"user_nation"}
      {"user_team"}
      {"mp"}
      {"ignore_same_user"}
    }
    {mission_options
      {"any_weather"}
      {"day_weather"}
      {"night_weather"}
    }
    {triggers
      {"parachute"
        {condition
          {terms
            {"1.near"
              {units
                {ignore_captured_by_user 0}
                {tag eject}
                {type human}
              }
              {near_to
                {ignore_captured_by_user 0}
                {tag base}
              }
              {distance 100}
            }
          }
        }
        {actions
          {"delay"
            {time 0.05}
          }
          {"linker"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag base}
                  }
                }
                {exclude
                  {tag
                    {tag _flight}
                  }
                }
              }
            }
            {entities
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag eject}
                  }
                }
                {include
                  {prop
                    {prop human}
                  }
                }
                {exclude
                  {state
                    {state linked}
                  }
                }
              }
            }
          }
          {"delay"
            {time 0.05}
          }
          {"effect"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag base}
                  }
                }
                {exclude
                  {tag
                    {tag _flight}
                  }
                }
              }
            }
            {effect start}
          }
          {"delay"
            {time 0.05}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag base}
                  }
                }
                {include
                  {tag
                    {tag _flight}
                  }
                }
              }
            }
            {tag_add base_null}
            {tag_remove base}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag eject}
                  }
                }
                {include
                  {state
                    {state linked}
                  }
                }
              }
            }
            {tag_add eject_null}
            {tag_remove eject}
          }
          {"delay"
            {time 0.2}
          }
          {"trigger"
            {name "parachute"}
          }
        }
      }
      {"players_units"
        {condition
          {expression "(1 & 3) | (2 & 3)"}
          {terms
            {"1.entities"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {prop
                      {prop human}
                    }
                    {state
                      {state user_control}
                    }
                  }
                  {exclude
                    {tag
                      {tag player}
                    }
                    {tag
                      {tag hidden}
                    }
                    {state
                      {state dead}
                    }
                  }
                }
              }
            }
            {"2.entities"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {prop
                      {prop vehicle}
                    }
                    {state
                      {state "inhabited user_control"}
                    }
                  }
                  {exclude
                    {tag
                      {tag hidden}
                    }
                    {tag
                      {tag player_armor}
                    }
                    {tag
                      {tag player_car}
                    }
                    {tag
                      {tag player_veh}
                    }
                  }
                }
              }
            }
            {"3.cmp_i"
              {var "mp$"}
              {op "=="}
              {value 1}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {zone
                    {zone "global"}
                  }
                }
                {include
                  {prop
                    {prop human}
                  }
                  {state
                    {state user_control}
                  }
                }
                {exclude
                  {tag
                    {tag hidden}
                  }
                  {tag
                    {tag player}
                  }
                  {state
                    {state dead}
                  }
                }
              }
            }
            {tag_add player}
          }
          {"delay"
            {time 0.2}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {zone
                    {zone "global"}
                  }
                }
                {include
                  {prop
                    {prop tank}
                  }
                  {state
                    {state "inhabited user_control"}
                  }
                }
                {exclude
                  {tag
                    {tag player_armor}
                  }
                }
              }
            }
            {tag_add player_armor}
          }
          {"delay"
            {time 0.2}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {zone
                    {zone "global"}
                  }
                }
                {include
                  {prop
                    {prop car}
                  }
                  {state
                    {state "inhabited user_control"}
                  }
                }
                {exclude
                  {tag
                    {tag player_car}
                  }
                }
              }
            }
            {tag_add player_car}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {zone
                    {zone "global"}
                  }
                }
                {include
                  {prop
                    {prop vehicle}
                  }
                  {state
                    {state "inhabited user_control"}
                  }
                }
                {exclude
                  {tag
                    {tag player_veh}
                  }
                  {tag
                    {tag player_armor}
                  }
                  {tag
                    {tag player_car}
                  }
                  {tag
                    {tag engine_count_1}
                  }
                  {tag
                    {tag engine_count_2}
                  }
                }
              }
            }
            {tag_add player_veh}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {zone
                    {zone "global"}
                  }
                }
                {include
                  {state
                    {state "operatable user_control"}
                  }
                }
                {exclude
                  {tag
                    {tag _user}
                  }
                }
              }
            }
            {tag_add _user}
          }
          {"delay"
            {time 10}
          }
          {"trigger"
            {name "players_units"}
          }
        }
      }
      {"ai/ai_untow"
        {condition
          {type 1}
          {terms
            {"1.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot_tow}
                    }
                  }
                  {include
                    {prop
                      {prop vehicle}
                    }
                    {state
                      {state operatable}
                    }
                    {state
                      {state linked}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 200}
              }
              {tag
                {"tag pair"}
                {"for selector" tow_act}
              }
            }
            {"2.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot_tow}
                    }
                  }
                  {include
                    {prop
                      {prop vehicle}
                    }
                    {state
                      {state operatable}
                    }
                    {state
                      {state linked}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 200}
              }
              {tag
                {"tag pair"}
                {"for selector" tow_act}
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"linker"
            {selector
              {type vehicle}
            }
            {action unlink}
            {entities
              {ignore_captured_by_user 0}
              {tag tow_act}
            }
          }
          {"delay"
            {time 0.2}
          }
          {"entity_state"
            {selector
              {source advanced}
              {group
                {select
                  {tag
                    {tag bot_car}
                  }
                  {tag
                    {tag bot_tank}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {tag
                    {tag bot_towing}
                  }
                  {state
                    {state user_control}
                  }
                }
              }
              {sort
                {type entity}
                {entity
                  {ignore_captured_by_user 0}
                  {tag tow_act}
                }
              }
              {amount 1
              }
            }
            {tag_add bot_towing}
          }
          {"delay"
            {time 0.2}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag bot_towing}
              {state operatable}
            }
            {tag_add _lua_mi}
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type near}
                {units
                  {ignore_captured_by_user 0}
                  {tag bot_towing}
                }
                {near_to
                  {ignore_captured_by_user 0}
                  {tag tow_act}
                }
                {distance 22}
              }
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag bot_towing}
                          }
                        }
                        {include
                          {prop
                            {prop car}
                          }
                          {state
                            {state inhabited}
                          }
                        }
                        {exclude
                          {state
                            {state moveable}
                          }
                          {state
                            {state user_control}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"emit"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag bot_towing}
                      {type vehicle}
                      {state inhabited}
                    }
                    {drop orders}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag bot_towing}
                          }
                        }
                        {include
                          {prop
                            {prop vehicle}
                          }
                          {state
                            {state "operatable moveable"}
                          }
                        }
                        {exclude
                          {state
                            {state user_control}
                          }
                        }
                      }
                    }
                    {drop orders}
                    {action move}
                    {target
                      {ignore_captured_by_user 0}
                      {tag flag}
                      {zone "global"}
                    }
                  }
                  {"delay"
                    {time 5}
                  }
                  {"if"
                    {condition
                      {type entities}
                      {selector
                        {source advanced}
                        {ignore_captured_by_user 0}
                        {group
                          {select
                            {tag
                              {tag bot_towing}
                            }
                          }
                          {include
                            {prop
                              {prop car}
                            }
                            {state
                              {state inhabited}
                            }
                          }
                          {exclude
                            {state
                              {state user_control}
                            }
                          }
                        }
                      }
                    }
                    {"delay"
                      {time 0.1}
                    }
                    {"emit"
                      {selector
                        {tag bot_towing}
                        {type vehicle}
                        {state operatable}
                      }
                      {drop orders}
                    }
                  }
                }
              }
            }
            {"default"}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag bot_tow}
                  }
                }
                {include
                  {tag
                    {tag tow_act}
                  }
                }
              }
            }
            {tag_remove bot_tow}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag tow_act}
            }
            {tag_remove tow_act}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag bot_towing}
            }
            {tag_remove _lua_mi}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag bot_towing}
            }
            {tag_remove bot_towing}
          }
          {"delay"
            {time 8}
          }
          {"trigger"
            {name "ai/ai_untow"}
          }
        }
      }
      {"ai/ai_unhold"
        {condition
          {type 1}
          {terms
            {"1.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _bot}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag repairing}
                    }
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag _lua_alert}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 60}
              }
              {detection located}
              {tag
                {"tag pair"}
                {"for selector" unhold_iq}
                {"for enemy" enemy_near_iq}
              }
            }
            {"2.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _bot}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag repairing}
                    }
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag _lua_alert}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 60}
              }
              {detection located}
              {tag
                {"tag pair"}
                {"for selector" unhold_iq}
                {"for enemy" enemy_near_iq}
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag unhold_iq}
              {state operatable}
            }
            {tag_add _lua_mi}
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag unhold_iq}
                      }
                    }
                    {include
                      {tag
                        {tag bot}
                      }
                    }
                  }
                }
              }
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.4}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {drop orders}
                    {fire_mode open}
                    {move_mode free}
                    {weapon_prepare on}
                    {movement
                      {speed assault}
                    }
                    {ai
                      {advance_ratio "0.1"}
                    }
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.4}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {drop orders}
                    {fire_mode open}
                    {move_mode free}
                    {weapon_prepare on}
                    {movement
                      {type crawl}
                    }
                    {ai
                      {advance_ratio "0.05"}
                    }
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {drop orders}
                    {fire_mode open}
                    {move_mode free}
                    {weapon_prepare on}
                    {movement
                      {speed sneak}
                    }
                    {ai
                      {advance_ratio "0.1"}
                    }
                  }
                }
              }
            }
            {"case"
              {condition
                {type entities}
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag unhold_iq}
                      }
                    }
                    {include
                      {prop
                        {prop vehicle}
                      }
                    }
                    {exclude
                      {tag
                        {tag bot_veh}
                      }
                    }
                  }
                }
              }
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {tag unhold_iq}
                  {type vehicle}
                  {state operatable}
                }
                {drop orders}
                {fire_mode open}
                {ai_move
                  {mode enable}
                }
                {movement
                  {forward off}
                  {backward off}
                }
              }
              {"delay"
                {time 1}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.5}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {fire_mode open}
                    {move_mode free}
                    {ai_move
                      {mode enable}
                    }
                    {movement
                      {speed slow}
                      {forward on}
                      {backward on}
                    }
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.5}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {fire_mode open}
                    {move_mode free}
                    {ai_move
                      {mode enable}
                    }
                    {movement
                      {speed fast}
                      {forward on}
                      {backward on}
                    }
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {fire_mode open}
                    {move_mode free}
                    {weapon_prepare on}
                    {ai_move
                      {mode enable}
                    }
                    {movement
                      {speed normal}
                      {forward on}
                      {backward on}
                    }
                  }
                }
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {group
                    {select
                      {tag
                        {tag unhold_iq}
                      }
                    }
                    {include
                      {tag
                        {tag bot_veh}
                      }
                      {state
                        {state operatable}
                      }
                    }
                  }
                }
                {drop orders}
                {fire_mode open}
                {move_mode free}
                {ai_move
                  {mode enable}
                }
                {cannon fire}
              }
              {"delay"
                {time 1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag unhold_iq}
                      }
                    }
                    {include
                      {tag
                        {tag bot_veh}
                      }
                    }
                  }
                }
                {tag_add _mi_temp2}
                {tag_remove unhold_iq}
              }
            }
          }
          {"delay"
            {time 0.1}
          }
          {"delay"
            {time 5}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {ignore_captured_by_user 0}
                  {tag unhold_iq}
                  {type vehicle}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action rotate}
                    {target
                      {ignore_captured_by_user 0}
                      {tag enemy_near_iq}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action move}
                    {target
                      {ignore_captured_by_user 0}
                      {tag enemy_near_iq}
                    }
                  }
                  {"delay"
                    {time 5}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action rotate}
                    {target
                      {ignore_captured_by_user 0}
                      {tag enemy_near_iq}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action advance}
                    {target
                      {ignore_captured_by_user 0}
                      {tag enemy_near_iq}
                    }
                  }
                  {"delay"
                    {time 8}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action advance}
                    {target
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {zone
                            {zone "global"}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {state
                            {state inactive}
                          }
                        }
                      }
                      {sort
                        {type entity}
                        {entity
                          {ignore_captured_by_user 0}
                          {tag enemy_near_iq}
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 6}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action rotate}
                    {target
                      {ignore_captured_by_user 0}
                      {tag enemy_near_iq}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action attack}
                    {target
                      {ignore_captured_by_user 0}
                      {tag enemy_near_iq}
                    }
                  }
                  {"delay"
                    {time 8}
                  }
                }
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action move}
                    {target
                      {ignore_captured_by_user 0}
                      {tag enemy_near_iq}
                    }
                  }
                  {"delay"
                    {time 4}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action advance}
                    {target
                      {ignore_captured_by_user 0}
                      {tag enemy_near_iq}
                    }
                  }
                  {"delay"
                    {time 5}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action advance}
                    {target
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {zone
                            {zone "global"}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {state
                            {state inactive}
                          }
                        }
                      }
                      {sort
                        {type entity}
                        {entity
                          {ignore_captured_by_user 0}
                          {tag enemy_near_iq}
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 6}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {action attack}
                    {target
                      {ignore_captured_by_user 0}
                      {tag enemy_near_iq}
                    }
                  }
                  {"delay"
                    {time 8}
                  }
                }
              }
            }
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type see_enemy}
                {selector
                  {ignore_captured_by_user 0}
                  {tag unhold_iq}
                }
              }
              {"delay"
                {time 0.1}
              }
            }
            {"default"
              {"delay"
                {time 5}
              }
            }
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {ignore_captured_by_user 0}
                  {tag unhold_iq}
                  {type vehicle}
                  {state operatable}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {tag unhold_iq}
                  {state operatable}
                }
                {movement
                  {forward off}
                  {backward off}
                }
              }
              {"delay"
                {time 2}
              }
              {"actor_state"
                {selector
                  {tag unhold_iq}
                  {state operatable}
                }
                {fire_mode open}
                {move_mode free}
                {ai_move
                  {mode enable}
                }
                {movement
                  {speed slow}
                  {forward on}
                  {backward on}
                }
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.5}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_to_cover"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {mode random}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag unhold_iq}
                      {state operatable}
                    }
                    {fire_mode open}
                    {move_mode free}
                    {ai_move
                      {mode enable}
                    }
                    {ai
                      {advance_ratio 1}
                    }
                  }
                }
              }
            }
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag unhold_iq}
                      }
                    }
                    {include
                      {team
                        {team a}
                      }
                    }
                  }
                }
              }
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag bot}
                      }
                    }
                    {include
                      {prop
                        {prop human}
                      }
                      {state
                        {state operatable}
                      }
                      {team
                        {team a}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                  {amount 4
                  }
                  {sort
                    {type entity}
                    {entity
                      {ignore_captured_by_user 0}
                      {tag unhold_iq}
                    }
                  }
                }
                {drop orders}
                {move_mode free}
                {ai_move
                  {mode enable}
                }
                {ai
                  {advance_ratio 1}
                }
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag bot}
                      }
                    }
                    {include
                      {prop
                        {prop human}
                      }
                      {state
                        {state operatable}
                      }
                      {team
                        {team b}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                  {amount 4
                  }
                  {sort
                    {type entity}
                    {entity
                      {ignore_captured_by_user 0}
                      {tag unhold_iq}
                    }
                  }
                }
                {drop orders}
                {move_mode free}
                {ai_move
                  {mode enable}
                }
                {ai
                  {advance_ratio 1}
                }
              }
            }
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag unhold_iq}
            }
            {tag_add _mi_temp2}
            {tag_remove unhold_iq}
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type cmp_i}
                {var "players:composition@"}
                {op "=="}
                {value 8}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag enemy_near_iq}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                      {state
                        {state user_control}
                      }
                    }
                  }
                }
                {tag_add noted_by_ai}
              }
            }
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag enemy_near_iq}
            }
            {tag_remove enemy_near_iq}
          }
          {"delay"
            {time 20}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _mi_temp2}
            }
            {tag_remove _lua_mi}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _mi_temp2}
            }
            {tag_remove _mi_temp2}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "ai/ai_unhold"}
          }
        }
      }
      {"ai/tank_alt_fight"
        {condition
          {type 1}
          {terms
            {"1.see_actors"
              {selector
                {source advanced}
                {group
                  {select
                    {tag
                      {tag bot_tank}
                    }
                    {tag
                      {tag bot_car}
                    }
                  }
                  {include
                    {prop
                      {prop vehicle}
                    }
                    {state
                      {state "moveable inhabited"}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag engine_count_1}
                    }
                    {tag
                      {tag engine_count_2}
                    }
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 180}
              }
              {tag
                {"tag pair"}
                {"for selector" e_tank_alt_a}
                {"for enemy" p_tank_target}
              }
            }
            {"2.see_actors"
              {selector
                {source advanced}
                {group
                  {select
                    {tag
                      {tag bot_tank}
                    }
                    {tag
                      {tag bot_car}
                    }
                  }
                  {include
                    {prop
                      {prop vehicle}
                    }
                    {state
                      {state "moveable inhabited"}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag engine_count_1}
                    }
                    {tag
                      {tag engine_count_2}
                    }
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 180}
              }
              {tag
                {"tag pair"}
                {"for selector" e_tank_alt_b}
                {"for enemy" p_tank_target}
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"actor_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag e_tank_alt_a}
                  }
                  {tag
                    {tag e_tank_alt_b}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {state
                    {state user_control}
                  }
                }
              }
            }
            {drop orders}
            {fire_mode open}
            {ai_move
              {mode enable}
            }
            {movement
              {forward off}
              {backward off}
            }
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type cmp_i}
                {var "ai_on$"}
                {op "<<"}
                {value 1}
              }
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag e_tank_alt_a}
                }
                {tag_remove e_tank_alt_a}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag e_tank_alt_b}
                }
                {tag_remove e_tank_alt_b}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag p_tank_target}
                }
                {tag_remove p_tank_target}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {ignore_captured_by_user 0}
                      {tag e_tank_alt_a}
                      {zone "global"}
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag e_tank_alt_a}
                    }
                    {tag_add e_tank_alt}
                    {tag_remove e_tank_alt_a}
                  }
                  {"delay"
                    {time 0.4}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {group
                        {select
                          {tag
                            {tag bot}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {team
                            {team a}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {amount 5
                      }
                      {sort
                        {type entity}
                        {entity
                          {ignore_captured_by_user 0}
                          {tag e_tank_alt}
                        }
                      }
                    }
                    {tag_add temp2}
                  }
                  {"delay"
                    {time 0.1}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag e_tank_alt_b}
                    }
                    {tag_add e_tank_alt}
                    {tag_remove e_tank_alt_b}
                  }
                  {"delay"
                    {time 0.4}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag bot}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {team
                            {team b}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {amount 5
                      }
                      {sort
                        {type entity}
                        {entity
                          {ignore_captured_by_user 0}
                          {tag e_tank_alt}
                        }
                      }
                    }
                    {tag_add temp2}
                  }
                  {"delay"
                    {time 0.1}
                  }
                }
              }
              {"delay"
                {time 0.3}
              }
              {"while"
                {condition
                  {type near}
                  {units
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag temp2}
                        }
                      }
                      {include
                        {prop
                          {prop human}
                        }
                        {state
                          {state operatable}
                        }
                      }
                      {exclude
                        {tag
                          {tag e_tank_alt}
                        }
                      }
                    }
                  }
                  {near_to
                    {ignore_captured_by_user 0}
                    {tag e_tank_alt}
                  }
                  {distance 100}
                }
                {"delay"
                  {time 0.1}
                }
                {"entity_state"
                  {selector
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag temp2}
                        }
                      }
                      {include
                        {prop
                          {prop human}
                        }
                        {state
                          {state operatable}
                        }
                      }
                      {exclude
                        {tag
                          {tag e_tank_alt}
                        }
                      }
                    }
                    {sort
                      {type entity}
                      {entity
                        {ignore_captured_by_user 0}
                        {tag e_tank_alt}
                      }
                    }
                    {amount 1
                    }
                  }
                  {tag_add e_tank_alt}
                  {tag_remove temp2}
                }
                {"delay"
                  {time 0.1}
                }
              }
              {"delay"
                {time 0.3}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag e_tank_alt}
                  {state operatable}
                }
                {tag_add _lua_mi}
              }
              {"actor_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag e_tank_alt}
                  {type human}
                  {state operatable}
                }
                {drop orders}
                {fire_mode open}
                {move_mode free}
                {ai_move
                  {mode enable}
                }
                {ai
                  {advance_ratio "0.1"}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag e_tank_alt}
                  {type vehicle}
                  {state operatable}
                }
                {drop orders}
                {fire_mode open}
                {move_mode free}
                {ai_move
                  {mode enable}
                }
                {movement
                  {speed fast}
                  {forward on}
                  {backward on}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"squad_create"
                {selector
                  {ignore_captured_by_user 0}
                  {tag e_tank_alt}
                  {zone "global"}
                  {state operatable}
                }
                {name e_tank_squad}
              }
              {"delay"
                {time 0.3}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.5}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {tag e_tank_alt}
                      {zone "global"}
                      {type vehicle}
                      {state inhabited}
                    }
                    {drop orders}
                    {action rotate}
                    {target
                      {ignore_captured_by_user 0}
                      {tag p_tank_target}
                      {zone "global"}
                    }
                  }
                  {"delay"
                    {time 5}
                  }
                  {"actor_state"
                    {selector
                      {tag e_tank_alt}
                      {zone "global"}
                      {type vehicle}
                      {state inhabited}
                    }
                    {fire_mode open}
                    {ai_move
                      {mode enable}
                    }
                    {movement
                      {forward on}
                      {backward on}
                    }
                  }
                  {"delay"
                    {time 0.25}
                  }
                  {"action"
                    {selector
                      {tag e_tank_alt}
                      {zone "global"}
                      {type vehicle}
                      {state inhabited}
                    }
                    {action attack}
                    {target
                      {ignore_captured_by_user 0}
                      {tag p_tank_target}
                      {zone "global"}
                    }
                  }
                }
                {"default"
                  {"delay"
                    {time 0.25}
                  }
                  {"action"
                    {selector
                      {tag e_tank_alt}
                      {zone "global"}
                      {type vehicle}
                      {state inhabited}
                    }
                    {drop orders}
                    {action rotate}
                    {target
                      {ignore_captured_by_user 0}
                      {tag p_tank_target}
                      {zone "global"}
                    }
                  }
                  {"delay"
                    {time 5}
                  }
                  {"actor_state"
                    {selector
                      {tag e_tank_alt}
                      {zone "global"}
                      {type vehicle}
                      {state inhabited}
                    }
                    {fire_mode open}
                    {weapon_prepare on}
                    {ai_move
                      {mode enable}
                    }
                    {movement
                      {speed fast}
                      {forward on}
                      {backward off}
                    }
                  }
                  {"delay"
                    {time 0.25}
                  }
                  {"action"
                    {selector
                      {tag e_tank_alt}
                      {zone "global"}
                      {type vehicle}
                      {state inhabited}
                    }
                    {drop orders}
                    {action move}
                    {target
                      {ignore_captured_by_user 0}
                      {tag p_tank_target}
                      {zone "global"}
                    }
                  }
                  {"delay"
                    {time 8}
                  }
                  {"actor_state"
                    {selector
                      {tag e_tank_alt}
                      {zone "global"}
                      {type vehicle}
                      {state inhabited}
                    }
                    {fire_mode open}
                    {move_mode free}
                    {weapon_prepare on}
                    {ai_move
                      {mode enable}
                    }
                    {movement
                      {speed normal}
                      {forward on}
                      {backward on}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                  {"action"
                    {selector
                      {tag e_tank_alt}
                      {zone "global"}
                      {type vehicle}
                      {state inhabited}
                    }
                    {action attack}
                    {target
                      {ignore_captured_by_user 0}
                      {tag p_tank_target}
                      {zone "global"}
                    }
                  }
                }
              }
              {"delay"
                {time 1}
              }
              {"switch"
                {"case"
                  {condition
                    {type near}
                    {units
                      {tag e_tank_alt}
                      {type vehicle}
                      {state operatable}
                    }
                    {near_to
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag flag}
                          }
                        }
                        {exclude
                          {state
                            {state inactive}
                          }
                        }
                      }
                    }
                    {distance 100}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"effect"
                    {selector
                      {tag e_tank_alt}
                      {type vehicle}
                      {state operatable}
                    }
                    {effect smoke_screen}
                  }
                }
                {"default"}
              }
              {"delay"
                {time 30}
              }
              {"squad_dismiss"
                {squad e_tank_squad}
              }
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag e_tank_alt}
                  {zone "global"}
                  {type vehicle}
                }
                {movement
                  {speed normal}
                  {forward on}
                  {backward on}
                }
              }
              {"delay"
                {time 0.5}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "players:composition@"}
                    {op "=="}
                    {value 8}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag p_tank_target}
                          }
                        }
                        {include
                          {state
                            {state "operatable user_control"}
                          }
                        }
                      }
                    }
                    {tag_add noted_by_ai}
                  }
                }
              }
              {"delay"
                {time 1}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag e_tank_alt}
                }
                {tag_add _mi_temp5}
                {tag_remove e_tank_alt}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag p_tank_target}
                }
                {tag_remove p_tank_target}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag temp2}
                }
                {tag_remove temp2}
              }
              {"delay"
                {time 30}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag _mi_temp5}
                }
                {tag_remove _lua_mi}
              }
              {"delay"
                {time 1}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag _mi_temp5}
                }
                {tag_remove _mi_temp5}
              }
              {"delay"
                {time 0.1}
              }
              {"trigger"
                {name "ai/tank_alt_fight"}
              }
            }
          }
        }
      }
      {"ai/bail_portables"
        {condition
          {type 1}
          {terms
            {"1.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot_veh}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {state
                      {state linked}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {prop
                      {prop human}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 33}
              }
              {tag
                {"tag pair"}
                {"for selector" bail_veh}
                {"for enemy" bail_target}
              }
            }
            {"2.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot_veh}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {state
                      {state linked}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {prop
                      {prop human}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 33}
              }
              {tag
                {"tag pair"}
                {"for selector" bail_veh}
                {"for enemy" bail_target}
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"emit"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag bail_veh}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {state
                    {state user_control}
                  }
                }
              }
            }
            {drop orders}
            {emit
              {count 1}
            }
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag bail_target}
              {state operatable}
            }
            {tag_add noted_by_ai}
            {tag_remove bail_target}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag bail_veh}
            }
            {tag_remove bail_veh}
          }
          {"delay"
            {time 5}
          }
          {"trigger"
            {name "ai/bail_portables"}
          }
        }
      }
      {"ai/recrew_portables"
        {condition
          {type 1}
          {terms
            {"1.see_actors"
              {selector
                {source advanced}
                {group
                  {select
                    {tag
                      {tag bot}
                    }
                  }
                  {include
                    {prop
                      {prop human}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag repairing}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot_veh}
                    }
                    {tag
                      {tag player_veh}
                    }
                  }
                  {include
                    {prop
                      {prop vehicle}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag destroyed}
                    }
                    {tag
                      {tag "_no-recrew"}
                    }
                    {state
                      {state inhabited}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 48}
              }
              {tag
                {"tag pair"}
                {"for selector" ecrew_a}
                {"for enemy" ecannon_enter}
              }
            }
            {"2.see_actors"
              {selector
                {source advanced}
                {group
                  {select
                    {tag
                      {tag bot}
                    }
                  }
                  {include
                    {prop
                      {prop human}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag repairing}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot_veh}
                    }
                    {tag
                      {tag player_veh}
                    }
                  }
                  {include
                    {prop
                      {prop vehicle}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag destroyed}
                    }
                    {tag
                      {tag "_no-recrew"}
                    }
                    {state
                      {state inhabited}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 48}
              }
              {tag
                {"tag pair"}
                {"for selector" ecrew_b}
                {"for enemy" ecannon_enter}
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type see_actors}
                {selector
                  {tag ecrew_a}
                  {zone "global"}
                  {type human}
                  {state "not dead"}
                }
                {enemy
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {zone
                        {zone "global"}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                      {team
                        {team b}
                      }
                    }
                    {exclude
                      {state
                        {state inactive}
                      }
                    }
                  }
                }
                {distance
                  {mode near_than}
                  {meters 45}
                }
                {detection visible}
              }
              {"delay"
                {time 5}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ecrew_a}
                }
                {tag_remove ecrew_a}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ecrew_b}
                }
                {tag_remove ecrew_b}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ecannon_enter}
                }
                {tag_remove ecannon_enter}
              }
              {"delay"
                {time 20}
              }
            }
            {"case"
              {condition
                {type see_actors}
                {selector
                  {tag ecrew_b}
                  {zone "global"}
                  {type human}
                  {state "not dead"}
                }
                {enemy
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {zone
                        {zone "global"}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                      {team
                        {team a}
                      }
                    }
                    {exclude
                      {state
                        {state inactive}
                      }
                    }
                  }
                }
                {distance
                  {mode near_than}
                  {meters 45}
                }
                {detection visible}
              }
              {"delay"
                {time 5}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ecrew_a}
                }
                {tag_remove ecrew_a}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ecrew_b}
                }
                {tag_remove ecrew_b}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ecannon_enter}
                }
                {tag_remove ecannon_enter}
              }
              {"delay"
                {time 20}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ecrew_a}
                      {zone "global"}
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ecrew_a}
                    }
                    {tag_add ecrew}
                    {tag_remove ecrew_a}
                  }
                  {"delay"
                    {time 0.4}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag bot}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {team
                            {team a}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {tag
                            {tag ecrew}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {amount 2
                      }
                      {sort
                        {type entity}
                        {entity
                          {tag ecrew}
                        }
                      }
                    }
                    {tag_add temp1}
                  }
                  {"delay"
                    {time 0.1}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ecrew_b}
                    }
                    {tag_add ecrew}
                    {tag_remove ecrew_b}
                  }
                  {"delay"
                    {time 0.4}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag bot}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {team
                            {team b}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {tag
                            {tag ecrew}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {amount 2
                      }
                      {sort
                        {type entity}
                        {entity
                          {tag ecrew}
                        }
                      }
                    }
                    {tag_add temp1}
                  }
                  {"delay"
                    {time 0.1}
                  }
                }
              }
              {"delay"
                {time 0.2}
              }
              {"while"
                {condition
                  {type near}
                  {units
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag temp1}
                        }
                      }
                      {include
                        {prop
                          {prop human}
                        }
                        {state
                          {state operatable}
                        }
                      }
                      {exclude
                        {tag
                          {tag ecrew}
                        }
                        {state
                          {state inactive}
                        }
                        {state
                          {state linked}
                        }
                      }
                    }
                  }
                  {near_to
                    {ignore_captured_by_user 0}
                    {tag ecannon_enter}
                  }
                  {distance 110}
                }
                {"delay"
                  {time 0.1}
                }
                {"entity_state"
                  {selector
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag temp1}
                        }
                      }
                      {include
                        {prop
                          {prop human}
                        }
                        {state
                          {state operatable}
                        }
                      }
                      {exclude
                        {tag
                          {tag ecrew}
                        }
                        {state
                          {state inactive}
                        }
                        {state
                          {state linked}
                        }
                      }
                    }
                    {sort
                      {type entity}
                      {entity
                        {ignore_captured_by_user 0}
                        {tag ecannon_enter}
                      }
                    }
                    {amount 1
                    }
                  }
                  {tag_add ecrew}
                  {tag_remove temp1}
                }
                {"delay"
                  {time 0.1}
                }
              }
              {"delay"
                {time 0.3}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ecrew}
                  {state operatable}
                }
                {tag_add _lua_mi}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag ecrew}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                }
                {drop orders}
                {fire_mode open}
                {move_mode free}
                {movement
                  {speed assault}
                }
              }
              {"delay"
                {time 0.3}
              }
              {"action"
                {selector
                  {source advanced}
                  {group
                    {select
                      {tag
                        {tag ecrew}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                }
                {drop orders}
                {action move}
                {target
                  {ignore_captured_by_user 0}
                  {tag ecannon_enter}
                }
              }
              {"delay"
                {time 5}
              }
              {"switch"
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag ecannon_enter}
                          }
                        }
                        {include
                          {prop
                            {prop vehicle}
                          }
                        }
                        {exclude
                          {tag
                            {tag destroyed}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"board"
                    {selector
                      {source advanced}
                      {group
                        {select
                          {tag
                            {tag ecrew}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {tag
                            {tag repairing}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                    }
                    {vehicle
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag ecannon_enter}
                          }
                        }
                        {include
                          {prop
                            {prop vehicle}
                          }
                        }
                        {exclude
                          {tag
                            {tag destroyed}
                          }
                        }
                      }
                    }
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag ecrew}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {tag
                            {tag repairing}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                    }
                    {drop orders}
                    {fire_mode open}
                    {move_mode free}
                    {ai_move
                      {mode enable}
                    }
                  }
                }
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ecrew}
                  {state operatable}
                }
                {tag_add _mi_temp4}
              }
              {"delay"
                {time 20}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag ecrew}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                }
                {tag_remove ecrew}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ecannon_enter}
                }
                {tag_remove ecannon_enter}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag temp1}
                }
                {tag_remove temp1}
              }
              {"delay"
                {time 20}
              }
            }
          }
          {"delay"
            {time 30}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _mi_temp4}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {tag
                    {tag repairing}
                  }
                  {state
                    {state inactive}
                  }
                  {state
                    {state linked}
                  }
                }
              }
            }
            {tag_remove _lua_mi}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _mi_temp4}
            }
            {tag_remove _mi_temp4}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "ai/recrew_portables"}
          }
        }
      }
      {"ai/ai_flag_smoke"
        {condition
          {type 1}
          {terms
            {"1.see_actors"
              {selector
                {source advanced}
                {group
                  {select
                    {tag
                      {tag smk_}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag repairing}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _user}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 95}
              }
              {tag
                {"tag pair"}
                {"for selector" ai_smoke}
                {"for enemy" smk_target}
              }
            }
            {"2.see_actors"
              {selector
                {source advanced}
                {group
                  {select
                    {tag
                      {tag smk_}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag repairing}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _user}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 95}
              }
              {tag
                {"tag pair"}
                {"for selector" ai_smoke}
                {"for enemy" smk_target}
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type near}
                {units
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag smk_target}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                    }
                  }
                }
                {near_to
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag flag}
                      }
                    }
                    {exclude
                      {state
                        {state inactive}
                      }
                    }
                  }
                }
                {distance 150}
              }
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag ai_smoke}
                          }
                        }
                        {include
                          {with_item
                            {type amount}
                            {item "nbk39" "grenade"}
                            {min 1}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {group
                        {select
                          {tag
                            {tag smk_}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {with_item
                            {type amount}
                            {item "nbk39" "grenade"}
                            {min 1}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {tag
                            {tag ai_smoke}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {sort
                        {type entity}
                        {entity
                          {tag ai_smoke}
                        }
                      }
                      {amount 2
                      }
                    }
                    {tag_add ai_smoke}
                  }
                  {"delay"
                    {time 0.3}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {state operatable}
                    }
                    {tag_add _mi_temp1}
                  }
                  {"delay"
                    {time 0.2}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _mi_temp1}
                    }
                    {tag_add _lua_mi}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"inventory"
                    {selector
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {action take}
                    {item "nbk39" "grenade"}
                  }
                  {"delay"
                    {time 0.5}
                  }
                  {"action"
                    {selector
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {drop "orders sensor senseless"}
                    {action attack_ground}
                    {target
                      {ignore_captured_by_user 0}
                      {tag null}
                    }
                  }
                  {"delay"
                    {time 4}
                  }
                  {"action"
                    {selector
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {drop orders}
                    {action advance}
                    {target
                      {ignore_captured_by_user 0}
                      {tag smk_target}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                }
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag ai_smoke}
                          }
                        }
                        {include
                          {with_item
                            {type amount}
                            {item "rdg1_smoke" "grenade"}
                            {min 1}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {group
                        {select
                          {tag
                            {tag smk_}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {with_item
                            {type amount}
                            {item "rdg1_smoke" "grenade"}
                            {min 1}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {tag
                            {tag ai_smoke}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {sort
                        {type entity}
                        {entity
                          {tag ai_smoke}
                        }
                      }
                      {amount 2
                      }
                    }
                    {tag_add ai_smoke}
                  }
                  {"delay"
                    {time 0.3}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {state operatable}
                    }
                    {tag_add _mi_temp1}
                  }
                  {"delay"
                    {time 0.2}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _mi_temp1}
                    }
                    {tag_add _lua_mi}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"inventory"
                    {selector
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {action take}
                    {item "rdg1_smoke" "grenade"}
                  }
                  {"delay"
                    {time 0.5}
                  }
                  {"action"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {drop "orders sensor senseless"}
                    {action attack_ground}
                    {target
                      {ignore_captured_by_user 0}
                      {tag null}
                    }
                  }
                  {"delay"
                    {time 4}
                  }
                  {"action"
                    {selector
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {drop orders}
                    {action advance}
                    {target
                      {ignore_captured_by_user 0}
                      {tag smk_target}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                }
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag ai_smoke}
                          }
                        }
                        {include
                          {with_item
                            {type amount}
                            {item "m24_smoke" "grenade"}
                            {min 1}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {group
                        {select
                          {tag
                            {tag smk_}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {with_item
                            {type amount}
                            {item "m24_smoke" "grenade"}
                            {min 1}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {tag
                            {tag ai_smoke}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {sort
                        {type entity}
                        {entity
                          {tag ai_smoke}
                        }
                      }
                      {amount 2
                      }
                    }
                    {tag_add ai_smoke}
                  }
                  {"delay"
                    {time 0.3}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {state operatable}
                    }
                    {tag_add _mi_temp1}
                  }
                  {"delay"
                    {time 0.2}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _mi_temp1}
                    }
                    {tag_add _lua_mi}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"inventory"
                    {selector
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {action take}
                    {item "m24_smoke" "grenade"}
                  }
                  {"delay"
                    {time 0.5}
                  }
                  {"action"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {drop "orders sensor senseless"}
                    {action attack_ground}
                    {target
                      {ignore_captured_by_user 0}
                      {tag null}
                    }
                  }
                  {"delay"
                    {time 4}
                  }
                  {"action"
                    {selector
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {drop orders}
                    {action advance}
                    {target
                      {ignore_captured_by_user 0}
                      {tag smk_target}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                }
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag ai_smoke}
                          }
                        }
                        {include
                          {with_item
                            {type amount}
                            {item "m43_smoke" "grenade"}
                            {min 1}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {group
                        {select
                          {tag
                            {tag smk_}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {with_item
                            {type amount}
                            {item "m43_smoke" "grenade"}
                            {min 1}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {tag
                            {tag ai_smoke}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {sort
                        {type entity}
                        {entity
                          {tag ai_smoke}
                        }
                      }
                      {amount 2
                      }
                    }
                    {tag_add ai_smoke}
                  }
                  {"delay"
                    {time 0.3}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {state operatable}
                    }
                    {tag_add _mi_temp1}
                  }
                  {"delay"
                    {time 0.2}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _mi_temp1}
                    }
                    {tag_add _lua_mi}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"inventory"
                    {selector
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {action take}
                    {item "m43_smoke" "grenade"}
                  }
                  {"delay"
                    {time 0.5}
                  }
                  {"action"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {drop "orders sensor senseless"}
                    {action attack_ground}
                    {target
                      {ignore_captured_by_user 0}
                      {tag null}
                    }
                  }
                  {"delay"
                    {time 4}
                  }
                  {"action"
                    {selector
                      {tag ai_smoke}
                      {type human}
                      {state "not dead"}
                    }
                    {drop orders}
                    {action advance}
                    {target
                      {ignore_captured_by_user 0}
                      {tag smk_target}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                    }
                    {tag_remove ai_smoke}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag smk_target}
                    }
                    {tag_remove smk_target}
                  }
                }
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag smk_target}
                }
                {tag_remove smk_target}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag ai_smoke}
                }
                {tag_remove ai_smoke}
              }
            }
          }
          {"delay"
            {time 2}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {ignore_captured_by_user 0}
                  {tag ai_smoke}
                  {state operatable}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type see_enemy}
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {state operatable}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                  {"actor_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {state operatable}
                    }
                    {drop orders}
                    {fire_mode open}
                    {move_mode free}
                    {ai_move
                      {mode enable}
                    }
                    {ai
                      {advance_ratio "0.1"}
                    }
                  }
                  {"delay"
                    {time 1}
                  }
                  {"actor_to_cover"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {state operatable}
                    }
                  }
                }
                {"default"
                  {"delay"
                    {time 8}
                  }
                  {"actor_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag ai_smoke}
                      {state operatable}
                    }
                    {drop orders}
                    {fire_mode open}
                    {move_mode free}
                    {ai_move
                      {mode enable}
                    }
                    {ai
                      {advance_ratio "0.5"}
                    }
                  }
                }
              }
              {"delay"
                {time 1}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag smk_target}
                }
                {tag_remove smk_target}
              }
              {"delay"
                {time 50}
              }
            }
            {"default"}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag ai_smoke}
            }
            {tag_remove ai_smoke}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _mi_temp1}
            }
            {tag_remove _lua_mi}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _mi_temp1}
            }
            {tag_remove _mi_temp1}
          }
          {"delay"
            {time 80}
          }
          {"trigger"
            {name "ai/ai_flag_smoke"}
          }
        }
      }
      {"bots_units"
        {condition
          {terms
            {"1.entities"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                  }
                  {exclude
                    {tag
                      {tag _bot}
                    }
                    {tag
                      {tag hidden}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
            }
            {"2.cmp_i"
              {var "ai_on$"}
              {op ">"}
              {value 0}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {zone
                    {zone "global"}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {tag
                    {tag _bot}
                  }
                  {tag
                    {tag _ai}
                  }
                  {tag
                    {tag hidden}
                  }
                  {state
                    {state user_control}
                  }
                }
              }
            }
            {tag_add _ai}
          }
          {"delay"
            {time 0.4}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _ai}
                  }
                }
                {include
                  {prop
                    {prop tank}
                  }
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {tag
                    {tag bot_tank}
                  }
                  {state
                    {state user_control}
                  }
                }
              }
            }
            {tag_add bot_tank}
          }
          {"delay"
            {time 0.2}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _ai}
                  }
                }
                {include
                  {prop
                    {prop car}
                  }
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {tag
                    {tag bot_car}
                  }
                  {state
                    {state user_control}
                  }
                }
              }
            }
            {tag_add bot_car}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _ai}
                  }
                }
                {include
                  {prop
                    {prop vehicle}
                  }
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {tag
                    {tag bot_tank}
                  }
                  {tag
                    {tag bot_car}
                  }
                  {tag
                    {tag bot_veh}
                  }
                  {tag
                    {tag engine_count_1}
                  }
                  {tag
                    {tag engine_count_2}
                  }
                  {state
                    {state user_control}
                  }
                }
              }
            }
            {tag_add _bot_veh}
          }
          {"delay"
            {time 0.5}
          }
          {"ables"
            {selector
              {ignore_captured_by_user 0}
              {tag _ai}
              {zone "global"}
              {type human}
              {state operatable}
            }
            {remove personage}
          }
          {"delay"
            {time 0.5}
          }
          {"ables"
            {selector
              {ignore_captured_by_user 0}
              {tag _bot_veh}
              {zone "global"}
              {type vehicle}
              {state operatable}
            }
            {add emit_on_attack}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _ai}
                  }
                }
                {include
                  {prop
                    {prop human}
                  }
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {tag
                    {tag _bot}
                  }
                }
              }
            }
            {tag_add bot}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _bot_veh}
            }
            {tag_add bot_veh}
            {tag_remove _bot_veh}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {source advanced}
              {group
                {select
                  {tag
                    {tag bot_veh}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                  {state
                    {state linked}
                  }
                }
                {exclude
                  {tag
                    {tag bot_tow}
                  }
                  {state
                    {state user_control}
                  }
                }
              }
            }
            {tag_add bot_tow}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _ai}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {tag
                    {tag _bot}
                  }
                  {state
                    {state user_control}
                  }
                }
              }
            }
            {tag_add _bot}
            {tag_remove _ai}
          }
          {"delay"
            {time 1}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {ignore_captured_by_user 0}
                  {tag smk_}
                  {zone "global"}
                  {state operatable}
                }
                {count
                  {op "<<"}
                  {value 55}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag bot}
                      }
                    }
                    {include
                      {with_item
                        {type amount}
                        {item "nbk39" "grenade"}
                        {min 1}
                      }
                    }
                    {exclude
                      {tag
                        {tag smk_}
                      }
                      {state
                        {state dead}
                      }
                    }
                  }
                  {group
                    {select
                      {tag
                        {tag bot}
                      }
                    }
                    {include
                      {with_item
                        {type amount}
                        {item "rdg1_smoke" "grenade"}
                        {min 1}
                      }
                    }
                    {exclude
                      {tag
                        {tag smk_}
                      }
                      {state
                        {state dead}
                      }
                    }
                  }
                  {group
                    {select
                      {tag
                        {tag bot}
                      }
                    }
                    {include
                      {with_item
                        {type amount}
                        {item "m24_smoke" "grenade"}
                        {min 1}
                      }
                    }
                    {exclude
                      {tag
                        {tag smk_}
                      }
                      {state
                        {state dead}
                      }
                    }
                  }
                  {group
                    {select
                      {tag
                        {tag bot}
                      }
                    }
                    {include
                      {with_item
                        {type amount}
                        {item "m43_smoke"}
                        {min 1}
                      }
                    }
                    {exclude
                      {tag
                        {tag smk_}
                      }
                      {state
                        {state dead}
                      }
                    }
                  }
                }
                {tag_add smk_}
              }
            }
            {"default"}
          }
          {"delay"
            {time 5}
          }
          {"trigger"
            {name "bots_units"}
          }
        }
      }
      {"ai/user_a_detect"
        {condition
          {terms
            {"1.cmp_i"
              {var "ai_on$"}
              {op ">"}
              {value 0}
            }
            {"2.entities"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag player}
                    }
                  }
                  {include
                    {team
                      {team a}
                    }
                  }
                }
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"set_i"
            {var "user_team$"}
            {op "+"}
            {value 1}
          }
        }
      }
      {"ai/init"
        {condition
        }
        {actions
          {"delay"
            {time 1}
          }
          {"set_i"
            {var "error$"}
            {op "="}
            {value 0}
          }
          {"set_i"
            {var "mp$"}
            {op "="}
            {value 0}
          }
          {"set_i"
            {var "user_team$"}
            {op "="}
            {value 0}
          }
          {"set_i"
            {var "ignore_same_user$"}
            {op "="}
            {value 0}
          }
          {"delay"
            {time 4}
          }
          {"switch"
            {"case"
              {condition
                {type cmp_i}
                {var "players:composition@"}
                {op "=="}
                {value 2}
              }
              {"delay"
                {time 0.1}
              }
              {"set_i"
                {var "ai_on$"}
                {op "="}
                {value 1}
              }
              {"set_i"
                {var "mp$"}
                {op "="}
                {value 1}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "players:composition@"}
                {op "=="}
                {value 5}
              }
              {"delay"
                {time 0.1}
              }
              {"set_i"
                {var "ai_on$"}
                {op "="}
                {value 3}
              }
              {"set_i"
                {var "mp$"}
                {op "="}
                {value 2}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "players:composition@"}
                {op "=="}
                {value 6}
              }
              {"delay"
                {time 0.1}
              }
              {"set_i"
                {var "ai_on$"}
                {op "="}
                {value 2}
              }
              {"set_i"
                {var "mp$"}
                {op "="}
                {value 1}
              }
              {"set_i"
                {var "ignore_same_user$"}
                {op "="}
                {value 1}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"set_i"
                {var "ai_on$"}
                {op "="}
                {value 0}
              }
              {"set_i"
                {var "error$"}
                {op "="}
                {value 1}
              }
              {"timer"
                {time 15}
                {title "mission/multi/ev_error01"}
              }
            }
          }
        }
      }
      {"ai/chance_ai_pursue"
        {condition
          {type 1}
          {terms
            {"1.near"
              {units
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot}
                    }
                  }
                  {include
                    {prop
                      {prop human}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag repairing}
                    }
                    {tag
                      {tag _lua_mi}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
              {near_to
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag noted_by_ai}
                    }
                  }
                  {include
                    {zone
                      {zone "global"}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance 80}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"default"
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag bot}
                      }
                    }
                    {include
                      {zone
                        {zone "global"}
                      }
                      {prop
                        {prop human}
                      }
                      {state
                        {state operatable}
                      }
                      {team
                        {team b}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {tag
                        {tag _lua_mi}
                      }
                      {tag
                        {tag _lua_ignore}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                  {sort
                    {type entity}
                    {entity
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag noted_by_ai}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                          {team
                            {team a}
                          }
                        }
                        {exclude
                          {state
                            {state inactive}
                          }
                        }
                      }
                    }
                  }
                  {amount 5
                  }
                }
                {tag_add temp4}
              }
              {"delay"
                {time 0.5}
              }
              {"while"
                {condition
                  {type near}
                  {units
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag temp4}
                        }
                      }
                      {include
                        {prop
                          {prop human}
                        }
                        {state
                          {state operatable}
                        }
                      }
                      {exclude
                        {state
                          {state inactive}
                        }
                        {state
                          {state linked}
                        }
                      }
                    }
                  }
                  {near_to
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag noted_by_ai}
                        }
                      }
                      {include
                        {state
                          {state operatable}
                        }
                        {team
                          {team a}
                        }
                      }
                      {exclude
                        {state
                          {state inactive}
                        }
                      }
                    }
                  }
                  {distance 60}
                }
                {"delay"
                  {time 0.1}
                }
                {"entity_state"
                  {selector
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag temp4}
                        }
                      }
                      {include
                        {prop
                          {prop human}
                        }
                        {state
                          {state operatable}
                        }
                      }
                      {exclude
                        {state
                          {state inactive}
                        }
                        {state
                          {state linked}
                        }
                      }
                    }
                    {sort
                      {type entity}
                      {entity
                        {source advanced}
                        {ignore_captured_by_user 0}
                        {group
                          {select
                            {tag
                              {tag noted_by_ai}
                            }
                          }
                          {include
                            {state
                              {state operatable}
                            }
                            {team
                              {team a}
                            }
                          }
                          {exclude
                            {state
                              {state inactive}
                            }
                          }
                        }
                      }
                    }
                    {amount 1
                    }
                  }
                  {tag_add pursuer}
                  {tag_remove temp4}
                }
                {"delay"
                  {time 0.1}
                }
              }
              {"delay"
                {time 0.3}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag pursuer}
                  {state operatable}
                }
                {tag_add _lua_mi}
              }
              {"delay"
                {time 0.3}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag noted_by_ai}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                      {team
                        {team a}
                      }
                    }
                  }
                  {sort
                    {type entity}
                    {entity
                      {ignore_captured_by_user 0}
                      {tag pursuer}
                    }
                  }
                }
                {tag_add pursue_target}
                {tag_remove noted_by_ai}
              }
            }
          }
          {"delay"
            {time 0.5}
          }
          {"squad_create"
            {selector
              {ignore_captured_by_user 0}
              {tag pursuer}
              {zone "global"}
              {state operatable}
            }
            {name pursuer}
          }
          {"delay"
            {time 0.1}
          }
          {"actor_state"
            {selector
              {ignore_captured_by_user 0}
              {tag pursuer}
              {zone "global"}
              {state operatable}
            }
            {drop orders}
            {move_mode free}
            {weapon_prepare on}
            {ai_move
              {mode enable}
            }
            {ai
              {advance_ratio "0.5"}
            }
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {ignore_captured_by_user 0}
                  {tag pursue_target}
                  {type vehicle}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"action"
                {selector
                  {ignore_captured_by_user 0}
                  {tag pursuer}
                  {zone "global"}
                  {state operatable}
                }
                {action attack}
                {target
                  {ignore_captured_by_user 0}
                  {tag pursue_target}
                  {zone "global"}
                }
              }
              {"delay"
                {time 4}
              }
              {"action"
                {selector
                  {ignore_captured_by_user 0}
                  {tag pursuer}
                  {zone "global"}
                  {state operatable}
                }
                {action attack}
                {target
                  {ignore_captured_by_user 0}
                  {tag pursue_target}
                  {zone "global"}
                }
              }
              {"delay"
                {time 4}
              }
            }
            {"default"
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.5}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag pursuer}
                      {zone "global"}
                      {state operatable}
                    }
                    {action advance}
                    {target
                      {ignore_captured_by_user 0}
                      {tag pursue_target}
                      {zone "global"}
                    }
                  }
                  {"delay"
                    {time 4}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag pursuer}
                      {zone "global"}
                      {state operatable}
                    }
                    {action move}
                    {target
                      {ignore_captured_by_user 0}
                      {tag pursue_target}
                      {zone "global"}
                    }
                  }
                  {"delay"
                    {time 6}
                  }
                }
              }
            }
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {ignore_captured_by_user 0}
                  {tag pursuer}
                  {zone "global"}
                  {type human}
                  {state operatable}
                }
                {count
                  {op "<<"}
                  {value 2}
                }
              }
              {"delay"
                {time 0.1}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type see_enemy}
                    {selector
                      {ignore_captured_by_user 0}
                      {tag pursuer}
                      {state operatable}
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag pursuer}
                      {state operatable}
                    }
                    {action attack}
                    {target
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag pursue_target}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 8}
                  }
                }
                {"default"
                  {"delay"
                    {time 5}
                  }
                }
              }
            }
          }
          {"delay"
            {time 0.1}
          }
          {"actor_state"
            {selector
              {ignore_captured_by_user 0}
              {tag pursuer}
              {zone "global"}
              {state operatable}
            }
            {drop orders}
            {fire_mode open}
            {move_mode free}
            {ai
              {advance_ratio 1}
            }
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type rand}
                {value 0.5}
              }
              {"delay"
                {time 25}
              }
            }
            {"default"
              {"delay"
                {time 45}
              }
            }
          }
          {"delay"
            {time 0.1}
          }
          {"squad_dismiss"
            {squad pursuer}
          }
          {"delay"
            {time 0.1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag pursue_target}
            }
            {tag_remove pursue_target}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag pursuer}
            }
            {tag_add _mi_temp3}
            {tag_remove pursuer}
          }
          {"delay"
            {time 80}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _mi_temp3}
            }
            {tag_remove _lua_mi}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _mi_temp3}
            }
            {tag_remove _mi_temp3}
          }
          {"delay"
            {time 0.5}
          }
          {"trigger"
            {name "ai/chance_ai_pursue"}
          }
        }
      }
      {"lua/clean"
        {condition
          {type 1}
          {terms
            {"1.entities"
              {selector
                {ignore_captured_by_user 0}
                {tag _lua_alert}
                {zone "global"}
                {state "not operatable"}
              }
            }
            {"2.entities"
              {selector
                {ignore_captured_by_user 0}
                {tag _lua_ignore}
                {zone "global"}
                {state "not operatable"}
              }
            }
            {"3.entities"
              {selector
                {ignore_captured_by_user 0}
                {tag smk_}
                {zone "global"}
                {state "not operatable"}
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _bot}
              {zone "global"}
              {state "not operatable"}
            }
            {tag_remove _bot}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _lua_ignore}
                  }
                }
                {exclude
                  {tag
                    {tag _bot}
                  }
                }
              }
            }
            {tag_remove _lua_ignore}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _lua_alert}
                  }
                }
                {exclude
                  {tag
                    {tag _bot}
                  }
                }
              }
            }
            {tag_remove _lua_alert}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _lua_ignore}
                  }
                }
                {exclude
                  {zone
                    {zone "global"}
                  }
                }
              }
            }
            {tag_remove _lua_ignore}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _lua_alert}
                  }
                }
                {exclude
                  {zone
                    {zone "global"}
                  }
                }
              }
            }
            {tag_remove _lua_alert}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag smk_}
                  }
                }
                {exclude
                  {tag
                    {tag _bot}
                  }
                }
              }
            }
            {tag_remove smk_}
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag noted_by_ai}
              {zone "global"}
              {state "not operatable"}
            }
            {tag_remove noted_by_ai}
          }
          {"delay"
            {time 0.5}
          }
          {"switch"
            {"case"
              {condition
                {type trigger}
                {name "ai/recrew_portables"}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {group
                    {select
                      {tag
                        {tag _lua_mi}
                      }
                    }
                    {include
                      {tag
                        {tag ecrew}
                      }
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                }
                {tag_add _clean}
                {tag_remove _lua_mi}
              }
              {"delay"
                {time 0.5}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag _clean}
                }
                {tag_remove ecrew}
              }
              {"delay"
                {time 0.5}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag _clean}
                }
                {tag_remove _clean}
              }
            }
          }
          {"delay"
            {time 1}
          }
          {"switch"
            {"case"
              {condition
                {type trigger}
                {name "ai/recrew_tank"}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {group
                    {select
                      {tag
                        {tag _lua_mi}
                      }
                    }
                    {include
                      {tag
                        {tag tcrew}
                      }
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                }
                {tag_add _clean}
                {tag_remove _lua_mi}
              }
              {"delay"
                {time 0.5}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag _clean}
                }
                {tag_remove tcrew}
              }
              {"delay"
                {time 0.5}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag _clean}
                }
                {tag_remove _clean}
              }
            }
          }
          {"delay"
            {time 25}
          }
          {"trigger"
            {name "lua/clean"}
          }
        }
      }
      {"lua/ignore"
        {condition
          {expression "(1 & 2) | (1 & 3)"}
          {terms
            {"1.cmp_i"
              {var "ai_on$"}
              {op ">"}
              {value 0}
            }
            {"2.near"
              {units
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _bot}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {zone
                      {zone "base_a"}
                    }
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag _lua_ignore}
                    }
                    {tag
                      {tag _lua_alert}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {near_to
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag flag}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance 31}
            }
            {"3.entities"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _bot}
                    }
                  }
                  {include
                    {zone
                      {zone "base_a"}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag _lua_ignore}
                    }
                    {tag
                      {tag _lua_alert}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _bot}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                  {team
                    {team b}
                  }
                }
                {exclude
                  {zone
                    {zone "base_a"}
                  }
                  {tag
                    {tag _lua_mi}
                  }
                  {tag
                    {tag _lua_ignore}
                  }
                  {tag
                    {tag _lua_alert}
                  }
                  {state
                    {state inactive}
                  }
                  {state
                    {state linked}
                  }
                  {state
                    {state user_control}
                  }
                }
              }
              {amount 1
              }
              {sort
                {type entity}
                {entity
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag flag}
                      }
                    }
                    {exclude
                      {zone
                        {zone "base_a"}
                      }
                      {state
                        {state inactive}
                      }
                    }
                  }
                }
              }
            }
            {tag_add _local1}
          }
          {"delay"
            {time 0.5}
          }
          {"switch"
            {"case"
              {condition
                {type near}
                {units
                  {ignore_captured_by_user 0}
                  {tag _local1}
                  {state operatable}
                }
                {near_to
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag flag}
                      }
                    }
                    {exclude
                      {zone
                        {zone "base_a"}
                      }
                      {state
                        {state inactive}
                      }
                    }
                  }
                }
                {distance 35}
              }
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag _local1}
                  {state operatable}
                }
                {tag_add _lua_ignore}
              }
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _local1}
                      }
                    }
                    {include
                      {prop
                        {prop human}
                      }
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                    }
                  }
                }
                {drop orders}
                {fire_mode open}
                {move_mode zone}
                {ai_move
                  {mode enable}
                }
                {movement
                  {speed assault}
                }
                {ai
                  {advance_ratio 2}
                  {retreat_ratio 5}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _local1}
                      }
                    }
                    {include
                      {prop
                        {prop vehicle}
                      }
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                      {state
                        {state user_control}
                      }
                    }
                  }
                }
                {drop orders}
                {fire_mode open}
                {move_mode zone}
                {move_radius 60}
                {ai_move
                  {mode enable}
                }
                {movement
                  {speed normal}
                  {forward on}
                  {backward on}
                }
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _bot}
                      }
                    }
                    {include
                      {zone
                        {zone "base_a"}
                      }
                      {state
                        {state operatable}
                      }
                      {team
                        {team b}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                      {tag
                        {tag _lua_ignore}
                      }
                      {tag
                        {tag _lua_alert}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                      {state
                        {state user_control}
                      }
                    }
                  }
                }
                {tag_add _local2}
              }
              {"delay"
                {time 0.2}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag _local2}
                  {state operatable}
                }
                {tag_add _lua_ignore}
              }
              {"delay"
                {time 0.2}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _local2}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                    }
                  }
                }
                {fire_mode open}
                {move_mode free}
                {ai_move
                  {mode enable}
                }
                {movement
                  {speed assault}
                }
              }
              {"delay"
                {time 0.5}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.25}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag _local2}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {state
                            {state user_control}
                          }
                        }
                      }
                    }
                    {action advance}
                    {waypoint "2"}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.25}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag _local2}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {state
                            {state user_control}
                          }
                        }
                      }
                    }
                    {action advance}
                    {waypoint "3"}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.25}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag _local2}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {state
                            {state user_control}
                          }
                        }
                      }
                    }
                    {action advance}
                    {waypoint "4"}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.25}
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag _local2}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {state
                            {state user_control}
                          }
                        }
                      }
                    }
                    {action advance}
                    {waypoint "5"}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag _local2}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {state
                            {state user_control}
                          }
                        }
                      }
                    }
                    {action advance}
                    {waypoint "1"}
                  }
                }
              }
              {"delay"
                {time 5}
              }
              {"actor_to_cover"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _local2}
                      }
                    }
                    {include
                      {prop
                        {prop human}
                      }
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                    }
                  }
                }
                {drop orders}
              }
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _local2}
                      }
                    }
                    {include
                      {prop
                        {prop vehicle}
                      }
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                      {state
                        {state user_control}
                      }
                    }
                  }
                }
                {drop orders}
                {fire_mode open}
                {move_mode zone}
                {move_radius 60}
                {ai_move
                  {mode enable}
                }
                {movement
                  {speed slow}
                  {forward on}
                  {backward on}
                }
              }
              {"delay"
                {time 1}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _local2}
                      }
                    }
                    {include
                      {prop
                        {prop human}
                      }
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                    }
                  }
                }
                {fire_mode open}
                {move_mode zone}
                {ai_move
                  {mode enable}
                }
                {movement
                  {speed assault}
                }
                {ai
                  {advance_ratio 2}
                  {retreat_ratio 5}
                }
              }
            }
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _local1}
            }
            {tag_remove _local1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _local2}
            }
            {tag_remove _local2}
          }
          {"delay"
            {time 10}
          }
          {"trigger"
            {name "lua/ignore"}
          }
        }
      }
      {"lua/a/ignore"
        {condition
          {expression "(1 & 2) | (1 & 3)"}
          {terms
            {"1.cmp_i"
              {var "ai_on$"}
              {op ">"}
              {value 1}
            }
            {"2.near"
              {units
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _bot}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {zone
                      {zone "base_a"}
                    }
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag _lua_ignore}
                    }
                    {tag
                      {tag _lua_alert}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {near_to
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag flag}
                    }
                  }
                  {exclude
                    {state
                      {state inactive}
                    }
                  }
                }
              }
              {distance 31}
            }
            {"3.entities"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _bot}
                    }
                  }
                  {include
                    {zone
                      {zone "base_a"}
                    }
                    {prop
                      {prop vehicle}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag _lua_ignore}
                    }
                    {tag
                      {tag _lua_alert}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _bot}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                  {team
                    {team a}
                  }
                }
                {exclude
                  {zone
                    {zone "base_a"}
                  }
                  {tag
                    {tag _lua_mi}
                  }
                  {tag
                    {tag _lua_ignore}
                  }
                  {tag
                    {tag _lua_alert}
                  }
                  {state
                    {state inactive}
                  }
                  {state
                    {state linked}
                  }
                  {state
                    {state user_control}
                  }
                }
              }
              {amount 1
              }
              {sort
                {type entity}
                {entity
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag flag}
                      }
                    }
                    {exclude
                      {zone
                        {zone "base_a"}
                      }
                      {state
                        {state inactive}
                      }
                    }
                  }
                }
              }
            }
            {tag_add _local3}
          }
          {"delay"
            {time 0.5}
          }
          {"switch"
            {"case"
              {condition
                {type near}
                {units
                  {ignore_captured_by_user 0}
                  {tag _local3}
                  {state operatable}
                }
                {near_to
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag flag}
                      }
                    }
                    {exclude
                      {zone
                        {zone "base_a"}
                      }
                      {state
                        {state inactive}
                      }
                    }
                  }
                }
                {distance 35}
              }
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag _local3}
                  {state operatable}
                }
                {tag_add _lua_ignore}
              }
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {group
                    {select
                      {tag
                        {tag _local3}
                      }
                    }
                    {include
                      {prop
                        {prop human}
                      }
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                    }
                  }
                }
                {drop orders}
                {fire_mode open}
                {move_mode zone}
                {ai_move
                  {mode enable}
                }
                {movement
                  {speed assault}
                }
                {ai
                  {advance_ratio 2}
                  {retreat_ratio 5}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {group
                    {select
                      {tag
                        {tag _local3}
                      }
                    }
                    {include
                      {prop
                        {prop vehicle}
                      }
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                      {state
                        {state user_control}
                      }
                    }
                  }
                }
                {drop orders}
                {fire_mode open}
                {move_mode zone}
                {move_radius 60}
                {ai_move
                  {mode enable}
                }
                {movement
                  {speed normal}
                  {forward on}
                  {backward on}
                }
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _bot}
                      }
                    }
                    {include
                      {zone
                        {zone "base_a"}
                      }
                      {prop
                        {prop vehicle}
                      }
                      {state
                        {state operatable}
                      }
                      {team
                        {team a}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                      {tag
                        {tag _lua_ignore}
                      }
                      {tag
                        {tag _lua_alert}
                      }
                      {state
                        {state user_control}
                      }
                    }
                  }
                }
                {tag_add _local4}
              }
              {"delay"
                {time 0.2}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag _local4}
                  {state operatable}
                }
                {tag_add _lua_ignore}
              }
              {"delay"
                {time 0.2}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _local4}
                      }
                    }
                    {include
                      {prop
                        {prop vehicle}
                      }
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag _lua_mi}
                      }
                      {state
                        {state user_control}
                      }
                    }
                  }
                }
                {drop orders}
                {fire_mode open}
                {move_mode free}
                {ai_move
                  {mode enable}
                }
                {movement
                  {speed normal}
                }
              }
              {"delay"
                {time 0.5}
              }
              {"switch"
                {"case"
                  {condition
                    {type see_enemy}
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _local4}
                      {state operatable}
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag _local4}
                          }
                        }
                        {include
                          {prop
                            {prop vehicle}
                          }
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {state
                            {state user_control}
                          }
                        }
                      }
                    }
                    {action rotate}
                    {target
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag _bot}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                          {team
                            {team b}
                          }
                        }
                        {exclude
                          {state
                            {state user_control}
                          }
                        }
                      }
                    }
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"action"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag _local4}
                          }
                        }
                        {include
                          {prop
                            {prop vehicle}
                          }
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {state
                            {state user_control}
                          }
                        }
                      }
                    }
                    {action advance}
                    {target
                      {ignore_captured_by_user 0}
                      {amount 1
                      }
                      {tag spawn_b}
                    }
                    {waypoint "0"}
                  }
                  {"delay"
                    {time 6}
                  }
                  {"actor_state"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag _local4}
                          }
                        }
                        {include
                          {prop
                            {prop vehicle}
                          }
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {state
                            {state user_control}
                          }
                        }
                      }
                    }
                    {drop orders}
                    {fire_mode open}
                    {move_mode zone}
                    {move_radius 60}
                    {ai_move
                      {mode enable}
                    }
                    {movement
                      {speed slow}
                      {forward on}
                      {backward on}
                    }
                  }
                }
              }
            }
          }
          {"delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _local3}
            }
            {tag_remove _local3}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _local4}
            }
            {tag_remove _local4}
          }
          {"delay"
            {time 10}
          }
          {"trigger"
            {name "lua/a/ignore"}
          }
        }
      }
      {"lua/a/bot_base"
        {condition
          {terms
            {"1.cmp_i"
              {var "ai_on$"}
              {op ">"}
              {value 1}
            }
            {"2.entities"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "base_a"}
                    }
                  }
                  {include
                    {tag
                      {tag bot}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag _lua_ignore}
                    }
                    {tag
                      {tag _lua_alert}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
            }
          }
        }
        {actions
          {"delay"
            {time 2}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag bot}
                  }
                }
                {include
                  {zone
                    {zone "base_a"}
                  }
                  {state
                    {state operatable}
                  }
                  {team
                    {team a}
                  }
                }
                {exclude
                  {tag
                    {tag _lua_mi}
                  }
                  {tag
                    {tag _lua_ignore}
                  }
                  {tag
                    {tag _lua_alert}
                  }
                  {state
                    {state inactive}
                  }
                  {state
                    {state linked}
                  }
                }
              }
            }
            {tag_add _local5}
          }
          {"delay"
            {time 0.3}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _local5}
              {type human}
              {state operatable}
            }
            {tag_add _lua_ignore}
          }
          {"actor_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _local5}
              {type human}
              {state operatable}
            }
            {drop orders}
            {fire_mode open}
            {move_mode free}
            {weapon_prepare on}
            {ai_move
              {mode enable}
            }
            {movement
              {speed assault}
            }
            {ai
              {advance_ratio 2}
              {retreat_ratio 5}
            }
          }
          {"delay"
            {time 0.1}
          }
          {"squad_create"
            {selector
              {ignore_captured_by_user 0}
              {tag _local5}
              {type human}
              {state operatable}
            }
            {name _local5}
          }
          {"delay"
            {time 0.4}
          }
          {"squad_dismiss"
            {squad _local5}
          }
          {"delay"
            {time 0.5}
          }
          {"waypoint"
            {who
              {type actor}
              {actors
                {ignore_captured_by_user 0}
                {tag _local5}
                {type human}
                {state operatable}
              }
            }
            {action
              {type start}
              {waypoint "0"}
              {approach force}
            }
          }
          {"delay"
            {time 15}
          }
          {## "actor_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _local5}
              {type human}
              {state operatable}
            }
            {fire_mode open}
            {move_mode zone}
            {move_radius 30}
            {ai
              {advance_ratio 2}
              {retreat_ratio 5}
            }
          }
          {## "delay"
            {time 0.5}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _local5}
            }
            {tag_remove _local5}
          }
          {"delay"
            {time 0.5}
          }
          {"trigger"
            {name "lua/a/bot_base"}
          }
        }
      }
      {"lua/ignore_incheck"
        {condition
          {expression "(1 & 2) | (2 & 3)"}
          {terms
            {"1.entities"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _lua_ignore}
                    }
                  }
                  {include
                    {zone
                      {zone "global"}
                    }
                    {state
                      {state operatable}
                    }
                  }
                  {exclude
                    {zone
                      {zone "base_a"}
                    }
                  }
                }
              }
              {count
                {op ">"}
                {value 8}
              }
            }
            {"2.cmp_i"
              {var "ai_on$"}
              {op ">"}
              {value 0}
            }
            {"3.entities"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _lua_ignore}
                    }
                  }
                  {include
                    {zone
                      {zone "global"}
                    }
                    {tag
                      {tag _lua_mi}
                    }
                    {state
                      {state operatable}
                    }
                  }
                }
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _lua_ignore}
                      }
                    }
                    {include
                      {tag
                        {tag _lua_mi}
                      }
                      {team
                        {team b}
                      }
                    }
                  }
                }
              }
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _lua_ignore}
                      }
                    }
                    {include
                      {tag
                        {tag _lua_mi}
                      }
                      {team
                        {team b}
                      }
                    }
                  }
                }
                {tag_remove _lua_ignore}
              }
              {"delay"
                {time 10}
              }
              {"trigger"
                {name "lua/ignore_incheck"}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _lua_ignore}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {zone
                        {zone "base_a"}
                      }
                    }
                  }
                  {sort
                    {type entity}
                    {entity
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag flag}
                          }
                        }
                        {exclude
                          {state
                            {state inactive}
                          }
                        }
                      }
                    }
                    {mode farthest}
                  }
                  {amount 1
                  }
                }
                {tag_add _tidy1}
              }
              {"delay"
                {time 1}
              }
              {"switch"
                {"case"
                  {condition
                    {type see_enemy}
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _tidy1}
                      {state operatable}
                    }
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _tidy1}
                    }
                    {tag_remove _lua_ignore}
                  }
                  {"delay"
                    {time 1}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _tidy1}
                    }
                    {tag_remove _tidy1}
                  }
                }
              }
              {"delay"
                {time 15}
              }
              {"trigger"
                {name "lua/ignore_incheck"}
              }
            }
          }
        }
      }
      {"ai/recrew_tank"
        {condition
          {type 1}
          {terms
            {"1.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot}
                    }
                  }
                  {include
                    {prop
                      {prop human}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag repairing}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot_tank}
                    }
                    {tag
                      {tag player_armor}
                    }
                  }
                  {include
                    {zone
                      {zone "global"}
                    }
                    {prop
                      {prop vehicle}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag destroyed}
                    }
                    {tag
                      {tag body_break}
                    }
                    {tag
                      {tag ammo_cooked}
                    }
                    {state
                      {state inhabited}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 50}
              }
              {tag
                {"tag pair"}
                {"for selector" tcrew}
                {"for enemy" etank_enter}
              }
            }
            {"2.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot}
                    }
                  }
                  {include
                    {prop
                      {prop human}
                    }
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag repairing}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag bot_tank}
                    }
                    {tag
                      {tag player_armor}
                    }
                  }
                  {include
                    {zone
                      {zone "global"}
                    }
                    {prop
                      {prop vehicle}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag destroyed}
                    }
                    {tag
                      {tag body_break}
                    }
                    {tag
                      {tag ammo_cooked}
                    }
                    {state
                      {state inhabited}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 50}
              }
              {tag
                {"tag pair"}
                {"for selector" tcrew}
                {"for enemy" etank_enter}
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type see_enemy}
                {selector
                  {ignore_captured_by_user 0}
                  {tag tcrew}
                  {zone "global"}
                  {state operatable}
                }
              }
              {"delay"
                {time 1}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag tcrew}
                }
                {tag_remove tcrew}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag etank_enter}
                }
                {tag_remove etank_enter}
              }
              {"delay"
                {time 30}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag tcrew}
                          }
                        }
                        {include
                          {team
                            {team b}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag bot}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {team
                            {team b}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {tag
                            {tag tcrew}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {sort
                        {type entity}
                        {entity
                          {ignore_captured_by_user 0}
                          {tag tcrew}
                        }
                      }
                      {amount 1
                      }
                    }
                    {tag_add temp3}
                  }
                }
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag tcrew}
                          }
                        }
                        {include
                          {team
                            {team a}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag bot}
                          }
                        }
                        {include
                          {prop
                            {prop human}
                          }
                          {state
                            {state operatable}
                          }
                          {team
                            {team a}
                          }
                        }
                        {exclude
                          {tag
                            {tag _lua_mi}
                          }
                          {tag
                            {tag repairing}
                          }
                          {tag
                            {tag tcrew}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                      {sort
                        {type entity}
                        {entity
                          {ignore_captured_by_user 0}
                          {tag tcrew}
                        }
                      }
                      {amount 1
                      }
                    }
                    {tag_add temp3}
                  }
                }
                {"default"}
              }
              {"delay"
                {time 0.5}
              }
              {"while"
                {condition
                  {type near}
                  {units
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag temp3}
                        }
                      }
                      {include
                        {prop
                          {prop human}
                        }
                        {state
                          {state operatable}
                        }
                      }
                      {exclude
                        {tag
                          {tag tcrew}
                        }
                        {state
                          {state inactive}
                        }
                        {state
                          {state linked}
                        }
                      }
                    }
                  }
                  {near_to
                    {ignore_captured_by_user 0}
                    {tag etank_enter}
                  }
                  {distance 90}
                }
                {"delay"
                  {time 0.1}
                }
                {"entity_state"
                  {selector
                    {source advanced}
                    {ignore_captured_by_user 0}
                    {group
                      {select
                        {tag
                          {tag temp3}
                        }
                      }
                      {include
                        {prop
                          {prop human}
                        }
                        {state
                          {state operatable}
                        }
                      }
                      {exclude
                        {tag
                          {tag tcrew}
                        }
                        {state
                          {state inactive}
                        }
                        {state
                          {state linked}
                        }
                      }
                    }
                    {sort
                      {type entity}
                      {entity
                        {ignore_captured_by_user 0}
                        {tag etank_enter}
                      }
                    }
                    {amount 1
                    }
                  }
                  {tag_add tcrew}
                  {tag_remove temp3}
                }
                {"delay"
                  {time 0.1}
                }
              }
              {"delay"
                {time 0.3}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag tcrew}
                  {state operatable}
                }
                {tag_add _lua_mi}
              }
              {"actor_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag tcrew}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                }
                {drop orders}
                {fire_mode open}
                {move_mode free}
                {movement
                  {speed assault}
                }
              }
              {"delay"
                {time 0.3}
              }
              {"action"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag tcrew}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                }
                {drop orders}
                {action move}
                {target
                  {ignore_captured_by_user 0}
                  {tag etank_enter}
                }
              }
              {"delay"
                {time 6}
              }
              {"switch"
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag etank_enter}
                          }
                        }
                        {include
                          {prop
                            {prop vehicle}
                          }
                        }
                        {exclude
                          {tag
                            {tag destroyed}
                          }
                          {tag
                            {tag body_break}
                          }
                          {tag
                            {tag ammo_cooked}
                          }
                          {state
                            {state inhabited}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"board"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag tcrew}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {tag
                            {tag repairing}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                    }
                    {vehicle
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag etank_enter}
                          }
                        }
                        {include
                          {prop
                            {prop vehicle}
                          }
                        }
                        {exclude
                          {tag
                            {tag destroyed}
                          }
                          {tag
                            {tag ammo_cooked}
                          }
                          {tag
                            {tag body_break}
                          }
                        }
                      }
                    }
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag tcrew}
                          }
                        }
                        {include
                          {state
                            {state operatable}
                          }
                        }
                        {exclude
                          {tag
                            {tag repairing}
                          }
                          {state
                            {state inactive}
                          }
                          {state
                            {state linked}
                          }
                        }
                      }
                    }
                    {drop orders}
                    {fire_mode open}
                    {move_mode free}
                    {ai_move
                      {mode enable}
                    }
                  }
                }
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag tcrew}
                  {state operatable}
                }
                {tag_add _mi_temp6}
              }
              {"delay"
                {time 20}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {group
                    {select
                      {tag
                        {tag tcrew}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag repairing}
                      }
                      {state
                        {state inactive}
                      }
                      {state
                        {state linked}
                      }
                    }
                  }
                }
                {tag_remove tcrew}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag temp3}
                }
                {tag_remove temp3}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag etank_enter}
                }
                {tag_remove etank_enter}
              }
              {"delay"
                {time 30}
              }
            }
          }
          {"delay"
            {time 30}
          }
          {"entity_state"
            {selector
              {source advanced}
              {ignore_captured_by_user 0}
              {group
                {select
                  {tag
                    {tag _mi_temp6}
                  }
                }
                {include
                  {state
                    {state operatable}
                  }
                }
                {exclude
                  {tag
                    {tag repairing}
                  }
                  {state
                    {state inactive}
                  }
                  {state
                    {state linked}
                  }
                }
              }
            }
            {tag_remove _lua_mi}
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _mi_temp6}
            }
            {tag_remove _mi_temp6}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "ai/recrew_tank"}
          }
        }
      }
      {"lua/in_transit_act"
        {condition
          {type 1}
          {terms
            {"1.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _bot}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_alert}
                    }
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag _lua_ignore}
                    }
                    {tag
                      {tag repairing}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 90}
              }
              {tag
                {"tag pair"}
                {"for selector" _act}
              }
            }
            {"2.see_actors"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _bot}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team a}
                    }
                  }
                  {exclude
                    {tag
                      {tag _lua_alert}
                    }
                    {tag
                      {tag _lua_mi}
                    }
                    {tag
                      {tag _lua_ignore}
                    }
                    {tag
                      {tag repairing}
                    }
                    {state
                      {state inactive}
                    }
                    {state
                      {state linked}
                    }
                    {state
                      {state user_control}
                    }
                  }
                }
              }
              {enemy
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {zone
                      {zone "global"}
                    }
                  }
                  {include
                    {state
                      {state operatable}
                    }
                    {team
                      {team b}
                    }
                  }
                }
              }
              {distance
                {mode near_than}
                {meters 90}
              }
              {tag
                {"tag pair"}
                {"for selector" _act}
              }
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type see_enemy}
                {selector
                  {ignore_captured_by_user 0}
                  {tag _act}
                  {state operatable}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"switch"
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag _act}
                          }
                        }
                        {include
                          {tag
                            {tag bot_veh}
                          }
                          {prop
                            {prop vehicle}
                          }
                        }
                        {exclude
                          {state
                            {state user_control}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag _act}
                      {state operatable}
                    }
                    {drop orders}
                    {fire_mode open}
                    {ai_move
                      {mode enable}
                    }
                    {cannon fire}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _act}
                      {state operatable}
                    }
                    {tag_add _lua_alert}
                    {tag_remove _lua_ignore}
                  }
                  {"delay"
                    {time 10}
                  }
                }
                {"case"
                  {condition
                    {type entities}
                    {selector
                      {source advanced}
                      {ignore_captured_by_user 0}
                      {group
                        {select
                          {tag
                            {tag _act}
                          }
                        }
                        {include
                          {tag
                            {tag bot}
                          }
                          {prop
                            {prop human}
                          }
                        }
                        {exclude
                          {state
                            {state dead}
                          }
                        }
                      }
                    }
                  }
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag _act}
                      {state operatable}
                    }
                    {drop orders}
                    {fire_mode open}
                    {move_mode hold}
                    {ai_move
                      {mode enable}
                    }
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _act}
                      {state operatable}
                    }
                    {tag_add _lua_alert}
                    {tag_remove _lua_ignore}
                  }
                  {"delay"
                    {time 1}
                  }
                  {"actor_state"
                    {selector
                      {tag _act}
                      {state operatable}
                    }
                    {fire_mode open}
                    {move_mode free}
                    {ai_move
                      {mode enable}
                    }
                  }
                  {"delay"
                    {time 22}
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"actor_state"
                    {selector
                      {tag _act}
                      {type vehicle}
                      {state operatable}
                    }
                    {drop orders}
                    {fire_mode open}
                    {ai_move
                      {mode enable}
                    }
                    {movement
                      {forward off}
                      {backward off}
                    }
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _act}
                      {state operatable}
                    }
                    {tag_add _lua_alert}
                    {tag_remove _lua_ignore}
                  }
                  {"delay"
                    {time 2}
                  }
                  {"actor_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag _act}
                      {state operatable}
                    }
                    {fire_mode open}
                    {move_mode free}
                    {ai_move
                      {mode enable}
                    }
                    {movement
                      {speed normal}
                      {forward on}
                      {backward on}
                    }
                  }
                  {"delay"
                    {time 22}
                  }
                }
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
            }
          }
          {"delay"
            {time 1}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag _act}
            }
            {tag_remove _act}
          }
          {"delay"
            {time 5}
          }
          {"trigger"
            {name "lua/in_transit_act"}
          }
        }
      }
      {"lua/alert_clear"
        {condition
          {expression "(!1 & 2 & 4) | (3 & 4)"}
          {terms
            {"1.see_enemy"
              {selector
                {source advanced}
                {group
                  {select
                    {tag
                      {tag _lua_alert}
                    }
                  }
                  {include
                    {zone
                      {zone "global"}
                    }
                    {state
                      {state operatable}
                    }
                  }
                  {exclude
                    {state
                      {state user_control}
                    }
                  }
                }
              }
            }
            {"2.entities"
              {selector
                {source advanced}
                {group
                  {select
                    {tag
                      {tag _lua_alert}
                    }
                  }
                  {include
                    {zone
                      {zone "global"}
                    }
                    {state
                      {state operatable}
                    }
                  }
                  {exclude
                    {state
                      {state user_control}
                    }
                  }
                }
              }
            }
            {"3.entities"
              {selector
                {source advanced}
                {ignore_captured_by_user 0}
                {group
                  {select
                    {tag
                      {tag _lua_alert}
                    }
                  }
                  {include
                    {zone
                      {zone "global"}
                    }
                    {tag
                      {tag _lua_mi}
                    }
                    {state
                      {state operatable}
                    }
                  }
                }
              }
            }
            {"4.cmp_i"
              {var "ai_on$"}
              {op ">"}
              {value 0}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"entity_state"
            {selector
              {source advanced}
              {group
                {select
                  {tag
                    {tag _bot_veh}
                  }
                }
                {include
                  {tag
                    {tag _lua_alert}
                  }
                  {state
                    {state operatable}
                  }
                  {team
                    {team b}
                  }
                }
                {exclude
                  {state
                    {state user_control}
                  }
                }
              }
            }
            {tag_add alert_temp2}
          }
          {"delay"
            {time 0.4}
          }
          {"switch"
            {"case"
              {condition
                {type see_enemy}
                {selector
                  {tag alert_temp2}
                  {zone "global"}
                  {type vehicle}
                  {state operatable}
                }
              }
              {"delay"
                {time 0.1}
              }
              {"action"
                {selector
                  {source advanced}
                  {group
                    {select
                      {tag
                        {tag alert_temp2}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                      {team
                        {team b}
                      }
                    }
                  }
                }
                {action suppression_fire}
                {target
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {zone
                        {zone "global"}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                      {team
                        {team a}
                      }
                    }
                  }
                  {sort
                    {type entity}
                    {entity
                      {tag alert_temp2}
                    }
                  }
                }
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {ignore_captured_by_user 0}
                  {tag alert_temp2}
                }
                {tag_remove _lua_alert}
              }
              {"delay"
                {time 0.1}
              }
              {"action"
                {selector
                  {source advanced}
                  {group
                    {select
                      {tag
                        {tag alert_temp2}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                      {team
                        {team b}
                      }
                    }
                  }
                }
                {action advance}
                {target
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag flag}
                      }
                    }
                    {exclude
                      {state
                        {state inactive}
                      }
                    }
                  }
                  {sort
                    {type entity}
                    {entity
                      {ignore_captured_by_user 0}
                      {tag alert_temp2}
                    }
                  }
                }
              }
            }
          }
          {"delay"
            {time 0.5}
          }
          {"switch"
            {"case"
              {condition
                {type entities}
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _lua_alert}
                      }
                    }
                    {include
                      {tag
                        {tag _lua_mi}
                      }
                    }
                    {exclude
                      {tag
                        {tag alert_temp2}
                      }
                    }
                  }
                }
              }
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {ignore_captured_by_user 0}
                  {group
                    {select
                      {tag
                        {tag _lua_alert}
                      }
                    }
                    {include
                      {tag
                        {tag _lua_mi}
                      }
                    }
                  }
                }
                {tag_remove _lua_alert}
              }
            }
            {"default"
              {"delay"
                {time 0.1}
              }
              {"entity_state"
                {selector
                  {source advanced}
                  {group
                    {select
                      {tag
                        {tag _lua_alert}
                      }
                    }
                    {include
                      {state
                        {state operatable}
                      }
                    }
                    {exclude
                      {tag
                        {tag alert_temp2}
                      }
                    }
                  }
                  {amount 1
                  }
                }
                {tag_add alert_temp}
              }
              {"delay"
                {time 1}
              }
              {"switch"
                {"case"
                  {condition
                    {type see_enemy}
                    {selector
                      {ignore_captured_by_user 0}
                      {tag alert_temp}
                    }
                  }
                }
                {"default"
                  {"delay"
                    {time 0.1}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag alert_temp}
                    }
                    {tag_remove _lua_alert}
                  }
                  {"delay"
                    {time 1}
                  }
                  {"entity_state"
                    {selector
                      {ignore_captured_by_user 0}
                      {tag alert_temp}
                    }
                    {tag_remove alert_temp}
                  }
                }
              }
            }
          }
          {"delay"
            {time 5}
          }
          {"entity_state"
            {selector
              {ignore_captured_by_user 0}
              {tag alert_temp2}
            }
            {tag_remove alert_temp2}
          }
          {"delay"
            {time 3}
          }
          {"trigger"
            {name "lua/alert_clear"}
          }
        }
      }
      {"environment_any"
        {condition
          {terms
            {"1.event"
              {id "gamestart"}
            }
            {"2.mission_option"
              {name "any_weather"}
            }
          }
        }
        {actions
          {"switch"
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/4v4_olkhovatka/var1"}
                {time 1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/4v4_olkhovatka/var2"}
                {time 1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/goh/multi/4v4_olkhovatka/var3"}
                {time 1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/4v4_olkhovatka/varnight1"}
                {time -1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/4v4_olkhovatka/varnight2"}
                {time -1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/4v4_olkhovatka/varnight3"}
                {time -1}
                {apply}
              }
            }
            {"default"}
          }
        }
      }
      {"environment_day"
        {condition
          {terms
            {"1.event"
              {id "gamestart"}
            }
            {"2.mission_option"
              {name "day_weather"}
            }
          }
        }
        {actions
          {"switch"
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/4v4_olkhovatka/var1"}
                {time 1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/4v4_olkhovatka/var2"}
                {time 1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/4v4_olkhovatka/var3"}
                {time 1}
                {apply}
              }
            }
            {"default"}
          }
        }
      }
      {"environment_night"
        {condition
          {terms
            {"1.event"
              {id "gamestart"}
            }
            {"2.mission_option"
              {name "night_weather"}
            }
          }
        }
        {actions
          {"switch"
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/4v4_olkhovatka/varnight1"}
                {time -1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/4v4_olkhovatka/varnight2"}
                {time -1}
                {apply}
              }
            }
            {"case"
              {condition
                {type rand}
                {value 0.4}
              }
              {"environment"
                {name "goh/multi/4v4_olkhovatka/varnight3"}
                {time -1}
                {apply}
              }
            }
          }
        }
      }
      {"start"
        {condition
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"event"
            {event "gamestart"}
            {mode set}
            {delay 0}
          }
          {"delay"
            {time 0.1}
          }
          {"event"
            {event "ambient"}
            {mode set}
            {delay 0}
          }
        }
      }
      {"music_new/action_playlist/action_theme_3"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {start "/music/action_theme_3.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/action_playlist/action_theme_3"}
          }
        }
      }
      {"music_new/ambient_selection"
        {condition
          {expression "1 & (2|3)"}
          {terms
            {"1.event"
              {id "gamestart"}
            }
            {"2.event"
              {id "ambient"}
            }
            {"3.cmp_i"
              {var "ambient$"}
              {op ">="}
              {value 20}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"event"
            {event "action"}
            {mode reset}
            {delay 0}
          }
          {"event"
            {event "ambient"}
            {mode set}
            {delay 0}
          }
          {"delay"
            {time 0.1}
          }
          {"trigger"
            {name "music_new/music_fade"}
            {on}
          }
          {"delay"
            {time 0.1}
          }
          {"set_i"
            {var "action_selection$"}
            {op "="}
            {value 0}
          }
          {"set_i"
            {var "ambient$"}
            {op "="}
            {value 0}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/action_selection "}
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type cmp_i}
                {var "ambient_selection$"}
                {op "=="}
                {value 0}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.15}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 1}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.15}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 2}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 3}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.5}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 4}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 1}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 5}
                  }
                }
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "ambient_selection$"}
                {op "<<"}
                {value 5}
              }
              {"set_i"
                {var "ambient_selection$"}
                {op "+"}
                {value 1}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "ambient_selection$"}
                {op ">="}
                {value 5}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.2}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 1}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.2}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 2}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 3}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.5}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 4}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 1}
                  }
                  {"set_i"
                    {var "ambient_selection$"}
                    {op "="}
                    {value 5}
                  }
                }
              }
            }
          }
          {"switch"
            {"case"
              {condition
                {type cmp_i}
                {var "ambient_selection$"}
                {op "=="}
                {value 1}
              }
              {"trigger"
                {name "music_new/ambient_playlist/ambient_2"}
                {on}
              }
              {"delay"
                {time 105}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "ambient_selection$"}
                    {op "=="}
                    {value 1}
                  }
                  {"trigger"
                    {name "music_new/ambient_selection"}
                  }
                }
                {"default"}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "ambient_selection$"}
                {op "=="}
                {value 2}
              }
              {"trigger"
                {name "music_new/ambient_playlist/ambient_4"}
                {on}
              }
              {"delay"
                {time 165}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "ambient_selection$"}
                    {op "=="}
                    {value 2}
                  }
                  {"trigger"
                    {name "music_new/ambient_selection"}
                  }
                }
                {"default"}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "ambient_selection$"}
                {op "=="}
                {value 3}
              }
              {"trigger"
                {name "music_new/ambient_playlist/fin_ambient_lvl1"}
                {on}
              }
              {"delay"
                {time 155}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "ambient_selection$"}
                    {op "=="}
                    {value 3}
                  }
                  {"trigger"
                    {name "music_new/ambient_selection"}
                  }
                }
                {"default"}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "ambient_selection$"}
                {op "=="}
                {value 4}
              }
              {"trigger"
                {name "music_new/ambient_playlist/fin_ambient_lvl2"}
                {on}
              }
              {"delay"
                {time 115}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "ambient_selection$"}
                    {op "=="}
                    {value 4}
                  }
                  {"trigger"
                    {name "music_new/ambient_selection"}
                  }
                }
                {"default"}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "ambient_selection$"}
                {op "=="}
                {value 5}
              }
              {"trigger"
                {name "music_new/ambient_playlist/fin_ambient_lvl3"}
                {on}
              }
              {"delay"
                {time 95}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "ambient_selection$"}
                    {op "=="}
                    {value 5}
                  }
                  {"trigger"
                    {name "music_new/ambient_selection"}
                  }
                }
                {"default"}
              }
            }
            {"default"
              {"trigger"
                {name "music_new/ambient_selection"}
              }
            }
          }
        }
      }
      {"music_new/silent_timer"
        {condition
          {expression "1 & 2 & !3"}
          {terms
            {"1.event"
              {id "gamestart"}
            }
            {"2.event"
              {id "action"}
            }
            {"3.event"
              {id "ambient"}
            }
          }
        }
        {actions
          {"delay"
            {time 4}
          }
          {"set_i"
            {var "ambient$"}
            {op "+"}
            {value 4}
          }
          {"delay"
            {time 0.1}
          }
          {"trigger"
            {name "music_new/silent_timer"}
          }
        }
      }
      {"music_new/ambient_playlist/ambient_2"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {start "/music/ambient_2.wav"}
            {stop_all}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/ambient_playlist/ambient_2"}
          }
        }
      }
      {"music_new/ambient_playlist/ambient_4"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {start "/music/ambient_4.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/ambient_playlist/ambient_4"}
          }
        }
      }
      {"music_new/action_selection "
        {condition
          {expression "1 & (2|3)"}
          {terms
            {"1.event"
              {id "gamestart"}
            }
            {"2.event"
              {id "action"}
            }
            {"3.signal"
              {zone "global"}
              {signals "shot injure explosion"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"event"
            {event "ambient"}
            {mode reset}
            {delay 0}
          }
          {"event"
            {event "action"}
            {mode set}
            {delay 0}
          }
          {"delay"
            {time 0.1}
          }
          {"trigger"
            {name "music_new/music_fade"}
            {on}
          }
          {"delay"
            {time 0.1}
          }
          {"set_i"
            {var "ambient_selection$"}
            {op "="}
            {value 0}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/ambient_selection"}
          }
          {"delay"
            {time 0.1}
          }
          {"switch"
            {"case"
              {condition
                {type cmp_i}
                {var "action_selection$"}
                {op "=="}
                {value 0}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.25}
                  }
                  {"set_i"
                    {var "action_selection$"}
                    {op "="}
                    {value 1}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"set_i"
                    {var "action_selection$"}
                    {op "="}
                    {value 2}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.5}
                  }
                  {"set_i"
                    {var "action_selection$"}
                    {op "="}
                    {value 3}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 1}
                  }
                  {"set_i"
                    {var "action_selection$"}
                    {op "="}
                    {value 4}
                  }
                }
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "action_selection$"}
                {op "<<"}
                {value 4}
              }
              {"set_i"
                {var "action_selection$"}
                {op "+"}
                {value 1}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "action_selection$"}
                {op ">="}
                {value 4}
              }
              {"switch"
                {"case"
                  {condition
                    {type rand}
                    {value 0.3}
                  }
                  {"set_i"
                    {var "action_selection$"}
                    {op "="}
                    {value 1}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.25}
                  }
                  {"set_i"
                    {var "action_selection$"}
                    {op "="}
                    {value 2}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 0.5}
                  }
                  {"set_i"
                    {var "action_selection$"}
                    {op "="}
                    {value 3}
                  }
                }
                {"case"
                  {condition
                    {type rand}
                    {value 1}
                  }
                  {"set_i"
                    {var "action_selection$"}
                    {op "="}
                    {value 4}
                  }
                }
              }
            }
          }
          {"switch"
            {"case"
              {condition
                {type cmp_i}
                {var "action_selection$"}
                {op "=="}
                {value 1}
              }
              {"trigger"
                {name "music_new/action_playlist/action_theme_3"}
                {on}
              }
              {"delay"
                {time 170}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "action_selection$"}
                    {op "=="}
                    {value 1}
                  }
                  {"trigger"
                    {name "music_new/action_selection "}
                  }
                }
                {"default"}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "action_selection$"}
                {op "=="}
                {value 2}
              }
              {"trigger"
                {name "music_new/action_playlist/fin_battle_lvl1"}
                {on}
              }
              {"delay"
                {time 180}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "action_selection$"}
                    {op "=="}
                    {value 2}
                  }
                  {"trigger"
                    {name "music_new/action_selection "}
                  }
                }
                {"default"}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "action_selection$"}
                {op "=="}
                {value 3}
              }
              {"trigger"
                {name "music_new/action_playlist/fin_battle_lvl2"}
                {on}
              }
              {"delay"
                {time 95}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "action_selection$"}
                    {op "=="}
                    {value 3}
                  }
                  {"trigger"
                    {name "music_new/action_selection "}
                  }
                }
                {"default"}
              }
            }
            {"case"
              {condition
                {type cmp_i}
                {var "action_selection$"}
                {op "=="}
                {value 4}
              }
              {"trigger"
                {name "music_new/action_playlist/fin_battle_lvl3"}
                {on}
              }
              {"delay"
                {time 300}
              }
              {"switch"
                {"case"
                  {condition
                    {type cmp_i}
                    {var "action_selection$"}
                    {op "=="}
                    {value 4}
                  }
                  {"trigger"
                    {name "music_new/action_selection "}
                  }
                }
              }
            }
            {"default"
              {"trigger"
                {name "music_new/action_selection "}
              }
            }
          }
        }
      }
      {"music_new/music_fade"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {stop "/music/action_theme_3.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 0.01}
          }
          {"music"
            {stop "/music/fin_battle_lvl1.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 0.01}
          }
          {"music"
            {stop "/music/fin_battle_lvl2.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 0.01}
          }
          {"music"
            {stop "/music/fin_battle_lvl3.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 0.1}
          }
          {"music"
            {stop "/music/ambient_2.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 0.01}
          }
          {"music"
            {stop "/music/ambient_4.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 0.01}
          }
          {"music"
            {stop "/music/fin_ambient_lvl1.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 0.01}
          }
          {"music"
            {stop "/music/fin_ambient_lvl2.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 0.01}
          }
          {"music"
            {stop "/music/fin_ambient_lvl3.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 0.01}
          }
          {"trigger"
            {name "music_new/music_fade"}
          }
        }
      }
      {"music_new/silent_timer_reset"
        {condition
          {expression "1 & 2 & !3 & 4 & !5"}
          {terms
            {"1.event"
              {id "gamestart"}
            }
            {"2.event"
              {id "action"}
            }
            {"3.event"
              {id "ambient"}
            }
            {"4.signal"
              {zone "global"}
              {signals "shot injure explosion"}
            }
            {"5.cmp_i"
              {var "ambient$"}
              {op "=="}
              {value 0}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"set_i"
            {var "ambient$"}
            {op "="}
            {value 0}
          }
          {"delay"
            {time 4}
          }
          {"trigger"
            {name "music_new/silent_timer_reset"}
          }
        }
      }
      {"music_new/action_playlist/fin_battle_lvl1"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {start "/music/fin_battle_lvl1.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/action_playlist/fin_battle_lvl1"}
          }
        }
      }
      {"music_new/action_playlist/fin_battle_lvl2"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {start "/music/fin_battle_lvl2.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/action_playlist/fin_battle_lvl2"}
          }
        }
      }
      {"music_new/action_playlist/fin_battle_lvl3"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {start "/music/fin_battle_lvl3.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/action_playlist/fin_battle_lvl3"}
          }
        }
      }
      {"music_new/ambient_playlist/fin_ambient_lvl1"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {start "/music/fin_ambient_lvl1.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/ambient_playlist/fin_ambient_lvl1"}
          }
        }
      }
      {"music_new/ambient_playlist/fin_ambient_lvl2"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {start "/music/fin_ambient_lvl2.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/ambient_playlist/fin_ambient_lvl2"}
          }
        }
      }
      {"music_new/ambient_playlist/fin_ambient_lvl3"
        {condition
          {terms
            {"1.event"
              {id "disabled"}
            }
          }
        }
        {actions
          {"delay"
            {time 0.1}
          }
          {"music"
            {start "/music/fin_ambient_lvl3.wav"}
            {volume game}
            {fade 5}
          }
          {"delay"
            {time 1}
          }
          {"trigger"
            {name "music_new/ambient_playlist/fin_ambient_lvl3"}
          }
        }
      }
      {"drumsound"
        {condition
          {terms
            {"1.event"
              {id "gamestart"}
            }
          }
        }
        {actions
          {"sound"
            {name "gui/matchmaking"}
          }
        }
      }
      {"notifications"
        {condition
          {terms
            {"1.event"
              {id "gamestart"}
            }
          }
        }
        {actions
          {"delay"
            {time 300}
          }
          {"sound"
            {name "gui/level_up"}
          }
          {"delay"
            {time 600}
          }
          {"sound"
            {name "gui/level_up"}
          }
          {"delay"
            {time 600}
          }
          {"sound"
            {name "gui/level_up"}
          }
        }
      }
    }
    {waypoints
      {"0"
        {position -1530.44 -2303.36 27}
        {transition "1"}
        {transition "4"}
        {transition "5"}
        {transition "2"}
        {transition "3"}
        {transition "6"}
        {transition "7"}
        {transition "8"}
        {transition "9"}
        {transition "10"}
        {transition "11"}
        {transition "12"}
      }
      {"1"
        {position -1387.84 -2180.36 26.3375}
        {commands
          {"delay"
            {time 1}
          }
          {"actor_to_cover"}
        }
      }
      {"10"
        {position -2060.92 -2206.69 3}
        {commands
          {"delay"
            {time 1}
          }
          {"actor_to_cover"}
        }
      }
      {"11"
        {position -2832.18 -2345.38 12.1969}
        {commands
          {"delay"
            {time 1}
          }
          {"actor_to_cover"}
        }
      }
      {"12"
        {position -1253.34 -3630.12 2}
        {commands
          {"delay"
            {time 1}
          }
          {"actor_to_cover"}
        }
      }
      {"2"
        {position -929.34 -3328.27 1.29836}
        {commands
          {"delay"
            {time 1}
          }
          {"actor_to_cover"}
        }
      }
      {"3"
        {position -408.451 -1902.87 -12}
        {commands
          {"delay"
            {time 1}
          }
          {"actor_to_cover"}
        }
      }
      {"4"
        {position -566.197 -1560.01 5.73024}
        {commands
          {"delay"
            {time 1}
          }
          {"actor_to_cover"}
        }
      }
      {"5"
        {position -661.446 -1710.43 24}
        {commands
          {"delay"
            {time 1}
          }
          {"actor_to_cover"}
        }
      }
      {"6"
        {position -1030.6 -1344.56 26}
        {commands
          {"delay"
            {time 1}
          }
          {"actor_to_cover"}
        }
      }
      {"7"
        {position -1539.74 -1079.47 -8.99902}
        {commands
          {"delay"
            {time 1}
          }
          {"actor_to_cover"}
        }
      }
      {"8"
        {position -1116.68 -908.716 -7.18645}
        {commands
          {"delay"
            {time 1}
          }
          {"actor_to_cover"}
        }
      }
      {"9"
        {position -1838.84 -1639.53 2.13737}
        {commands
          {"delay"
            {time 1}
          }
          {"actor_to_cover"}
        }
      }
    }
  }
  {Players
    {count 17}
    {diplomacy
      1 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
      0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1
    }
  }
  {Fog 0}
  {EntityManager {Enabled}
    {CountScale "x0.5"}
  }
}
